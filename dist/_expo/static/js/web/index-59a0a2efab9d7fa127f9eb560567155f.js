__d((function(_g,_r,_i,_a,_m,_e2,_d){"use strict";Object.defineProperty(_e2,"__esModule",{value:!0});var e=_r(_d[0]),t=_r(_d[1]),s=_r(_d[2]),i=_r(_d[3]),r=_r(_d[4]),n=_r(_d[5]),a=_r(_d[6]);function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=o(e),h=o(i),p=o(a);const u="error",l="wc@2:universal_provider:",d="https://rpc.walletconnect.org/v1/",f="generic",m=`${d}bundler`,v="default_chain_changed";function g(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function P(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function w(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const b="[object String]",y="[object Number]",C="[object Boolean]",I="[object Arguments]";function O(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function j(e,t){return $(e,void 0,e,new Map,t)}function $(e,t,s,i=new Map,r=void 0){const n=r?.(e,t,s,i);if(null!=n)return n;if(g(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){const t=new Array(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=$(e[n],n,s,i,r);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;i.set(e,t);for(const[n,a]of e)t.set(n,$(a,n,s,i,r));return t}if(e instanceof Set){const t=new Set;i.set(e,t);for(const n of e)t.add($(n,void 0,s,i,r));return t}if(typeof Buffer<"u"&&Buffer.isBuffer(e))return e.subarray();if(O(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=$(e[n],n,s,i,r);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),H(t,e,s,i,r),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return i.set(e,t),H(t,e,s,i,r),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return i.set(e,t),H(t,e,s,i,r),t}if(e instanceof Error){const t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,H(t,e,s,i,r),t}if("object"==typeof e&&S(e)){const t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),H(t,e,s,i,r),t}return e}function H(e,t,s=e,i,r){const n=[...Object.keys(t),...P(t)];for(let a=0;a<n.length;a++){const o=n[a],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=$(t[o],o,s,i,r))}}function S(e){switch(w(e)){case I:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case C:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case y:case"[object Object]":case"[object RegExp]":case"[object Set]":case b:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}function q(e,t){return j(e,((s,i,r,n)=>{const a=t?.(s,i,r,n);if(null!=a)return a;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case y:case b:case C:{const t=new e.constructor(e?.valueOf());return H(t,e),t}case I:{const t={};return H(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}function E(e){return q(e)}function A(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===w(e)}function N(e){return"object"==typeof e&&null!==e}function D(){}function R(e){return O(e)}function k(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _(e){if(g(e))return e;if(Array.isArray(e)||O(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),s=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new s(e);if(e instanceof RegExp){const t=new s(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new s(e.buffer.slice(0));if(e instanceof Error){const t=new s(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new s([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const s=Object.create(t);return Object.assign(s,e)}return e}function x(e,...t){const s=t.slice(0,-1),i=t[t.length-1];let r=e;for(let e=0;e<s.length;e++){r=F(r,s[e],i,new Map)}return r}function F(e,t,s,i){if(g(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(i.has(t))return _(i.get(t));if(i.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const r=[...Object.keys(t),...P(t)];for(let n=0;n<r.length;n++){const a=r[n];let o=t[a],c=e[a];if(A(o)&&(o={...o}),A(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(o)&&(o=E(o)),Array.isArray(o))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let s=0;s<t.length;s++){const i=t[s];e[i]=c[i]}c=e}else c=[];const h=s(c,o,a,e,t,i);null!=h?e[a]=h:Array.isArray(o)||N(c)&&N(o)?e[a]=F(c,o,s,i):null==c&&k(o)?e[a]=F({},o,s,i):null==c&&R(o)?e[a]=E(o):(void 0===c||void 0!==o)&&(e[a]=o)}return e}function J(e,...t){return x(e,...t,D)}var M=Object.defineProperty,U=Object.defineProperties,B=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,K=(e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,L=(e,t)=>{for(var s in t||(t={}))T.call(t,s)&&K(e,s,t[s]);if(V)for(var s of V(t))z.call(t,s)&&K(e,s,t[s]);return e},W=(e,t)=>U(e,B(t));function G(e,s,i){var r;const n=t.parseChainId(e);return(null==(r=s.rpcMap)?void 0:r[n.reference])||`${d}?chainId=${n.namespace}:${n.reference}&projectId=${i}`}function Q(e){return e.includes(":")?e.split(":")[1]:e}function X(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function Y(e,t){const s=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!s.length)return[];const i=[];return s.forEach((e=>{const s=t.namespaces[e].accounts;i.push(...s)})),i}function Z(e={},t={}){return J(ee(e),ee(t))}function ee(e){var s,i,r,n,a;const o={};if(!t.isValidObject(e))return o;for(const[c,h]of Object.entries(e)){const e=t.isCaipNamespace(c)?[c]:h.chains,p=h.methods||[],u=h.events||[],l=h.rpcMap||{},d=t.parseNamespaceKey(c);o[d]=W(L(L({},o[d]),h),{chains:t.mergeArrays(e,null==(s=o[d])?void 0:s.chains),methods:t.mergeArrays(p,null==(i=o[d])?void 0:i.methods),events:t.mergeArrays(u,null==(r=o[d])?void 0:r.events)}),(t.isValidObject(l)||t.isValidObject((null==(n=o[d])?void 0:n.rpcMap)||{}))&&(o[d].rpcMap=L(L({},l),null==(a=o[d])?void 0:a.rpcMap))}return o}function te(e){return e.includes(":")?e.split(":")[2]:e}function se(e){const s={};for(const[i,r]of Object.entries(e)){const e=r.methods||[],n=r.events||[],a=r.accounts||[],o=t.isCaipNamespace(i)?[i]:r.chains?r.chains:X(r.accounts);s[i]={chains:o,methods:e,events:n,accounts:a}}return s}function ie(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const re={},ne=e=>re[e],ae=(e,t)=>{re[e]=t};var oe=Object.defineProperty,ce=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ue=(e,t,s)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,le=(e,t)=>{for(var s in t||(t={}))he.call(t,s)&&ue(e,s,t[s]);if(ce)for(var s of ce(t))pe.call(t,s)&&ue(e,s,t[s]);return e};const de="eip155",fe=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],me=e=>e&&e.startsWith("0x")?BigInt(e).toString(10):e,ve=e=>e&&e.startsWith("0x")?e:`0x${BigInt(e).toString(16)}`,ge=e=>Object.keys(e).filter((e=>fe.includes(e))).reduce(((t,s)=>(t[s]=e[s],t)),{}),Pe=(e,s,i)=>{const{sessionProperties:r={},scopedProperties:n={}}=e,a={};if(!t.isValidObject(n)&&!t.isValidObject(r))return;const o=ge(r);for(const e of i){const t=me(e);if(!t)continue;a[ve(t)]=o;const i=n?.[`${de}:${t}`];if(i){const e=i?.[`${de}:${t}:${s}`];a[ve(t)]=le(le({},a[ve(t)]),ge(e||i))}}for(const[e,t]of Object.entries(a))0===Object.keys(t).length&&delete a[e];return Object.keys(a).length>0?a:void 0};var we=Object.defineProperty,be=(e,t,s)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ye=(e,t,s)=>be(e,"symbol"!=typeof t?t+"":t,s);class Ce{constructor(e){ye(this,"name","polkadot"),ye(this,"client"),ye(this,"httpProviders"),ye(this,"events"),ye(this,"namespace"),ye(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=Q(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var Ie=Object.defineProperty,Oe=Object.defineProperties,je=Object.getOwnPropertyDescriptors,$e=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,qe=(e,t,s)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ee=(e,t)=>{for(var s in t||(t={}))He.call(t,s)&&qe(e,s,t[s]);if($e)for(var s of $e(t))Se.call(t,s)&&qe(e,s,t[s]);return e},Ae=(e,t)=>Oe(e,je(t)),Ne=(e,t,s)=>qe(e,"symbol"!=typeof t?t+"":t,s);class De{constructor(e){Ne(this,"name","eip155"),Ne(this,"client"),Ne(this,"chainId"),Ne(this,"namespace"),Ne(this,"httpProviders"),Ne(this,"events"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(v,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const s=t||G(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new i.HttpConnection(s,ne("disableProviderPing")))}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=parseInt(Q(t));e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const r=parseInt(i,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(s=this.namespace.chains)?void 0:s[0]}),this.setDefaultChain(`${r}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,s,i,r,n;const a=null==(s=null==(t=e.request)?void 0:t.params)?void 0:s[0],o=(null==(r=null==(i=e.request)?void 0:i.params)?void 0:r[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const c=this.client.session.get(e.topic),h=(null==(n=c?.sessionProperties)?void 0:n.capabilities)||{},p=`${a}${o.join(",")}`,u=h?.[p];if(u)return u;let l;try{l=Pe(c,a,o)}catch(e){console.warn("Failed to extract capabilities from session",e)}if(l)return l;const d=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Ae(Ee({},c.sessionProperties||{}),{capabilities:Ae(Ee({},h||{}),{[p]:d})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return d}async getCallStatus(e){var t,s;const i=this.client.session.get(e.topic),r=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(r){const t=this.getBundlerUrl(e.chainId,r);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const n=null==(s=i.sessionProperties)?void 0:s.bundler_url;if(n)try{return await this.getUserOperationReceipt(n,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,n)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var s;const i=new URL(e),r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.formatJsonRpcRequest("eth_getUserOperationReceipt",[null==(s=t.request.params)?void 0:s[0]]))});if(!r.ok)throw new Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,t){return`${m}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var Re=Object.defineProperty,ke=(e,t,s)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,_e=(e,t,s)=>ke(e,"symbol"!=typeof t?t+"":t,s);class xe{constructor(e){_e(this,"name","solana"),_e(this,"client"),_e(this,"httpProviders"),_e(this,"events"),_e(this,"namespace"),_e(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=Q(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var Fe=Object.defineProperty,Je=(e,t,s)=>t in e?Fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Me=(e,t,s)=>Je(e,"symbol"!=typeof t?t+"":t,s);class Ue{constructor(e){Me(this,"name","cosmos"),Me(this,"client"),Me(this,"httpProviders"),Me(this,"events"),Me(this,"namespace"),Me(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=Q(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var Be=Object.defineProperty,Ve=(e,t,s)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Te=(e,t,s)=>Ve(e,"symbol"!=typeof t?t+"":t,s);class ze{constructor(e){Te(this,"name","algorand"),Te(this,"client"),Te(this,"httpProviders"),Te(this,"events"),Te(this,"namespace"),Te(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const s=t||G(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(v,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var Ke=Object.defineProperty,Le=(e,t,s)=>t in e?Ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,We=(e,t,s)=>Le(e,"symbol"!=typeof t?t+"":t,s);class Ge{constructor(e){We(this,"name","cip34"),We(this,"client"),We(this,"httpProviders"),We(this,"events"),We(this,"namespace"),We(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const s=this.getCardanoRPCUrl(t),i=Q(t);e[i]=this.createHttpProvider(i,s)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||this.getCardanoRPCUrl(e);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var Qe=Object.defineProperty,Xe=(e,t,s)=>t in e?Qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ye=(e,t,s)=>Xe(e,"symbol"!=typeof t?t+"":t,s);class Ze{constructor(e){Ye(this,"name","elrond"),Ye(this,"client"),Ye(this,"httpProviders"),Ye(this,"events"),Ye(this,"namespace"),Ye(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=Q(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var et=Object.defineProperty,tt=(e,t,s)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,st=(e,t,s)=>tt(e,"symbol"!=typeof t?t+"":t,s);class it{constructor(e){st(this,"name","multiversx"),st(this,"client"),st(this,"httpProviders"),st(this,"events"),st(this,"namespace"),st(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;const i=Q(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var rt=Object.defineProperty,nt=(e,t,s)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,at=(e,t,s)=>nt(e,"symbol"!=typeof t?t+"":t,s);class ot{constructor(e){at(this,"name","near"),at(this,"client"),at(this,"httpProviders"),at(this,"events"),at(this,"namespace"),at(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||G(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(v,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace);return typeof s>"u"?void 0:new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var ct=Object.defineProperty,ht=(e,t,s)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,pt=(e,t,s)=>ht(e,"symbol"!=typeof t?t+"":t,s);class ut{constructor(e){pt(this,"name","tezos"),pt(this,"client"),pt(this,"httpProviders"),pt(this,"events"),pt(this,"namespace"),pt(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const s=t||G(`${this.name}:${e}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(v,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace);return typeof s>"u"?void 0:new r.JsonRpcProvider(new h.default(s))}}var lt=Object.defineProperty,dt=(e,t,s)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,ft=(e,t,s)=>dt(e,"symbol"!=typeof t?t+"":t,s);class mt{constructor(e){ft(this,"name",f),ft(this,"client"),ft(this,"httpProviders"),ft(this,"events"),ft(this,"namespace"),ft(this,"chainId"),this.namespace=e.namespace,this.events=ne("events"),this.client=ne("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(v,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,s;const i={};return null==(s=null==(e=this.namespace)?void 0:e.accounts)||s.forEach((e=>{const s=t.parseChainId(e);i[`${s.namespace}:${s.reference}`]=this.createHttpProvider(e)})),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){const s=t||G(e,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${e}`);return new r.JsonRpcProvider(new h.default(s,ne("disableProviderPing")))}}var vt=Object.defineProperty,gt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,wt=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable,Ct=(e,t,s)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,It=(e,t)=>{for(var s in t||(t={}))bt.call(t,s)&&Ct(e,s,t[s]);if(wt)for(var s of wt(t))yt.call(t,s)&&Ct(e,s,t[s]);return e},Ot=(e,t)=>gt(e,Pt(t)),jt=(e,t,s)=>Ct(e,"symbol"!=typeof t?t+"":t,s);class $t{constructor(e){jt(this,"client"),jt(this,"namespaces"),jt(this,"optionalNamespaces"),jt(this,"sessionProperties"),jt(this,"scopedProperties"),jt(this,"events",new p.default),jt(this,"rpcProviders",{}),jt(this,"session"),jt(this,"providerOpts"),jt(this,"logger"),jt(this,"uri"),jt(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:s.pino(s.getDefaultLoggerOptions({level:e?.logger||u})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new $t(e);return await t.initialize(),t}async request(e,t,s){const[i,r]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:It({},e),chainId:`${i}:${r}`,topic:this.session.topic,expiry:s})}sendAsync(e,t,s,i){const r=(new Date).getTime();this.request(e,s,i).then((e=>t(null,n.formatJsonRpcResult(r,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:t.getSdkError("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:s,response:i}=await this.client.authenticate(e,t);s&&(this.uri=s,this.events.emit("display_uri",s));const r=await i();if(this.session=r.session,this.session){const e=se(this.session.namespaces);this.namespaces=Z(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const i=await s();this.session=i;const r=se(i.namespaces);return this.namespaces=Z(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[s,i]=this.validateChain(e),r=this.getProvider(s);r.name===f?r.setDefaultChain(`${s}:${i}`,t):r.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const s=this.client.pairing.getAll();if(t.isValidArray(s)){for(const t of s)e.deletePairings?this.client.core.expirer.set(t.topic,0):await this.client.core.relayer.subscriber.unsubscribe(t.topic);this.logger.info(`Inactive pairings cleared: ${s.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await c.default.init({core:this.providerOpts.core,logger:this.providerOpts.logger||u,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(s){throw this.logger.error("Failed to get session",s),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>t.parseNamespaceKey(e))))];ae("client",this.client),ae("events",this.events),ae("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=Y(e,this.session),s=X(t),i=Z(this.namespaces,this.optionalNamespaces),r=Ot(It({},i[e]),{accounts:t,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new De({namespace:r});break;case"algorand":this.rpcProviders[e]=new ze({namespace:r});break;case"solana":this.rpcProviders[e]=new xe({namespace:r});break;case"cosmos":this.rpcProviders[e]=new Ue({namespace:r});break;case"polkadot":this.rpcProviders[e]=new Ce({namespace:r});break;case"cip34":this.rpcProviders[e]=new Ge({namespace:r});break;case"elrond":this.rpcProviders[e]=new Ze({namespace:r});break;case"multiversx":this.rpcProviders[e]=new it({namespace:r});break;case"near":this.rpcProviders[e]=new ot({namespace:r});break;case"tezos":this.rpcProviders[e]=new ut({namespace:r});break;default:this.rpcProviders[f]?this.rpcProviders[f].updateNamespace(r):this.rpcProviders[f]=new mt({namespace:r})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:s}=e;s===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var s;const{params:i,topic:r}=e;if(r!==(null==(s=this.session)?void 0:s.topic))return;const{event:n}=i;if("accountsChanged"===n.name){const e=n.data;e&&t.isValidArray(e)&&this.events.emit("accountsChanged",e.map(te))}else if("chainChanged"===n.name){const e=i.chainId,s=i.event.data,r=t.parseNamespaceKey(e),n=ie(e)!==ie(s)?`${r}:${ie(s)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var s,i;if(e!==(null==(s=this.session)?void 0:s.topic))return;const{namespaces:r}=t,n=null==(i=this.client)?void 0:i.session.get(e);this.session=Ot(It({},n),{namespaces:r}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var s;e.topic===(null==(s=this.session)?void 0:s.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ot(It({},t.getSdkError("USER_DISCONNECTED")),{data:e.topic})))})),this.on(v,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[f]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t={},optionalNamespaces:s={},sessionProperties:i,scopedProperties:r}=e;this.optionalNamespaces=Z(t,s),this.sessionProperties=i,this.scopedProperties=r}validateChain(e){const[s,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[s,i];if(s&&!Object.keys(this.namespaces||{}).map((e=>t.parseNamespaceKey(e))).includes(s))throw new Error(`Namespace '${s}' is not configured. Please call connect() first with namespace config.`);if(s&&i)return[s,i];const r=t.parseNamespaceKey(Object.keys(this.namespaces)[0]);return[r,this.rpcProviders[r].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[s,i]=this.validateChain(e);if(!i)return;this.updateNamespaceChain(s,i),this.events.emit("chainChanged",i);const r=this.getProvider(s).getDefaultChain();t||this.getProvider(s).setDefaultChain(i),this.emitAccountsChangedOnChainChange({namespace:s,previousChainId:r,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:s,newChainId:i}){var r,n;try{if(s===i)return;const a=null==(n=null==(r=this.session)?void 0:r.namespaces[e])?void 0:n.accounts;if(!a)return;const o=a.filter((e=>e.includes(`${i}:`))).map(te);if(!t.isValidArray(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const s=this.namespaces[e]?e:`${e}:${t}`,i={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[s]?this.namespaces[s]&&(this.namespaces[s].defaultChain=t):this.namespaces[s]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var s;const i=(null==(s=this.session)?void 0:s.topic)||"";await this.client.core.storage.setItem(`${l}/${e}${i}`,t)}async getFromStore(e){var t;const s=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${l}/${e}${s}`)}async deleteFromStore(e){var t;const s=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${l}/${e}${s}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(l)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}const Ht=$t;_e2.UniversalProvider=Ht,_e2.default=$t}),4178,[8178,8181,4197,4626,4609,4610,4181]);
__d((function(g,r,i,a,m,e,d){const b=r(d[0]),l=r(d[1]);m.exports={blake2b:b.blake2b,blake2bHex:b.blake2bHex,blake2bInit:b.blake2bInit,blake2bUpdate:b.blake2bUpdate,blake2bFinal:b.blake2bFinal,blake2s:l.blake2s,blake2sHex:l.blake2sHex,blake2sInit:l.blake2sInit,blake2sUpdate:l.blake2sUpdate,blake2sFinal:l.blake2sFinal}}),4605,[4606,4608]);
__d((function(g,r,_i,_a,_m,e,_d){const t=r(_d[0]);function n(t,n,o){const l=t[n]+t[o];let i=t[n+1]+t[o+1];l>=4294967296&&i++,t[n]=l,t[n+1]=i}function o(t,n,o,l){let i=t[n]+o;o<0&&(i+=4294967296);let c=t[n+1]+l;i>=4294967296&&c++,t[n]=i,t[n+1]=c}function l(t,n){return t[n]^t[n+1]<<8^t[n+2]<<16^t[n+3]<<24}function i(t,l,i,c,a,h){const w=f[a],s=f[a+1],b=f[h],p=f[h+1];n(u,t,l),o(u,t,w,s);let y=u[c]^u[t],U=u[c+1]^u[t+1];u[c]=U,u[c+1]=y,n(u,i,c),y=u[l]^u[i],U=u[l+1]^u[i+1],u[l]=y>>>24^U<<8,u[l+1]=U>>>24^y<<8,n(u,t,l),o(u,t,b,p),y=u[c]^u[t],U=u[c+1]^u[t+1],u[c]=y>>>16^U<<16,u[c+1]=U>>>16^y<<16,n(u,i,c),y=u[l]^u[i],U=u[l+1]^u[i+1],u[l]=U>>>31^y<<1,u[l+1]=y>>>31^U<<1}const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),a=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),u=new Uint32Array(32),f=new Uint32Array(32);function h(t,n){let o=0;for(o=0;o<16;o++)u[o]=t.h[o],u[o+16]=c[o];for(u[24]=u[24]^t.t,u[25]=u[25]^t.t/4294967296,n&&(u[28]=~u[28],u[29]=~u[29]),o=0;o<32;o++)f[o]=l(t.b,4*o);for(o=0;o<12;o++)i(0,8,16,24,a[16*o+0],a[16*o+1]),i(2,10,18,26,a[16*o+2],a[16*o+3]),i(4,12,20,28,a[16*o+4],a[16*o+5]),i(6,14,22,30,a[16*o+6],a[16*o+7]),i(0,10,20,30,a[16*o+8],a[16*o+9]),i(2,12,22,24,a[16*o+10],a[16*o+11]),i(4,14,16,26,a[16*o+12],a[16*o+13]),i(6,8,18,28,a[16*o+14],a[16*o+15]);for(o=0;o<16;o++)t.h[o]=t.h[o]^u[o]^u[o+16]}const w=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function s(t,n,o,i){if(0===t||t>64)throw new Error('Illegal output length, expected 0 < length <= 64');if(n&&n.length>64)throw new Error('Illegal key, expected Uint8Array with 0 < length <= 64');if(o&&16!==o.length)throw new Error('Illegal salt, expected Uint8Array with length is 16');if(i&&16!==i.length)throw new Error('Illegal personal, expected Uint8Array with length is 16');const a={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};w.fill(0),w[0]=t,n&&(w[1]=n.length),w[2]=1,w[3]=1,o&&w.set(o,32),i&&w.set(i,48);for(let t=0;t<16;t++)a.h[t]=c[t]^l(w,4*t);return n&&(b(a,n),a.c=128),a}function b(t,n){for(let o=0;o<n.length;o++)128===t.c&&(t.t+=t.c,h(t,!1),t.c=0),t.b[t.c++]=n[o]}function p(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;h(t,!0);const n=new Uint8Array(t.outlen);for(let o=0;o<t.outlen;o++)n[o]=t.h[o>>2]>>8*(3&o);return n}function y(n,o,l,i,c){l=l||64,n=t.normalizeInput(n),i&&(i=t.normalizeInput(i)),c&&(c=t.normalizeInput(c));const a=s(l,o,i,c);return b(a,n),p(a)}_m.exports={blake2b:y,blake2bHex:function(n,o,l,i,c){const a=y(n,o,l,i,c);return t.toHex(a)},blake2bInit:s,blake2bUpdate:b,blake2bFinal:p}}),4606,[4607]);
__d((function(g,r,_i,a,m,e,d){function n(n){return(4294967296+n).toString(16).substring(1)}m.exports={normalizeInput:function(n){let t;if(n instanceof Uint8Array)t=n;else{if('string'!=typeof n)throw new Error("Input must be an string, Buffer or Uint8Array");t=(new TextEncoder).encode(n)}return t},toHex:function(n){return Array.prototype.map.call(n,(function(n){return(n<16?'0':'')+n.toString(16)})).join('')},debugPrint:function(t,o,i){let s='\n'+t+' = ';for(let l=0;l<o.length;l+=2){if(32===i)s+=n(o[l]).toUpperCase(),s+=' ',s+=n(o[l+1]).toUpperCase();else{if(64!==i)throw new Error('Invalid size '+i);s+=n(o[l+1]).toUpperCase(),s+=n(o[l]).toUpperCase()}l%6==4?s+='\n'+new Array(t.length+4).join(' '):l<o.length-2&&(s+=' ')}console.log(s)},testSpeed:function(n,t,o){let i=(new Date).getTime();const s=new Uint8Array(t);for(let n=0;n<t;n++)s[n]=n%256;const l=(new Date).getTime();console.log('Generated random input in '+(l-i)+'ms'),i=l;for(let l=0;l<o;l++){const o=n(s),l=(new Date).getTime(),u=l-i;i=l,console.log('Hashed in '+u+'ms: '+o.substring(0,20)+'...'),console.log(Math.round(t/1048576/(u/1e3)*100)/100+' MB PER SECOND')}}}}),4607,[]);
__d((function(g,r,_i,_a,_m,e,_d){const n=r(_d[0]);function t(n,t){return n[t]^n[t+1]<<8^n[t+2]<<16^n[t+3]<<24}function o(n,t,o,i,u,l){f[n]=f[n]+f[t]+u,f[i]=c(f[i]^f[n],16),f[o]=f[o]+f[i],f[t]=c(f[t]^f[o],12),f[n]=f[n]+f[t]+l,f[i]=c(f[i]^f[n],8),f[o]=f[o]+f[i],f[t]=c(f[t]^f[o],7)}function c(n,t){return n>>>t^n<<32-t}const i=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),f=new Uint32Array(16),l=new Uint32Array(16);function a(n,c){let a=0;for(a=0;a<8;a++)f[a]=n.h[a],f[a+8]=i[a];for(f[12]^=n.t,f[13]^=n.t/4294967296,c&&(f[14]=~f[14]),a=0;a<16;a++)l[a]=t(n.b,4*a);for(a=0;a<10;a++)o(0,4,8,12,l[u[16*a+0]],l[u[16*a+1]]),o(1,5,9,13,l[u[16*a+2]],l[u[16*a+3]]),o(2,6,10,14,l[u[16*a+4]],l[u[16*a+5]]),o(3,7,11,15,l[u[16*a+6]],l[u[16*a+7]]),o(0,5,10,15,l[u[16*a+8]],l[u[16*a+9]]),o(1,6,11,12,l[u[16*a+10]],l[u[16*a+11]]),o(2,7,8,13,l[u[16*a+12]],l[u[16*a+13]]),o(3,4,9,14,l[u[16*a+14]],l[u[16*a+15]]);for(a=0;a<8;a++)n.h[a]^=f[a]^f[a+8]}function s(n,t){if(!(n>0&&n<=32))throw new Error('Incorrect output length, should be in [1, 32]');const o=t?t.length:0;if(t&&!(o>0&&o<=32))throw new Error('Incorrect key length, should be in [1, 32]');const c={h:new Uint32Array(i),b:new Uint8Array(64),c:0,t:0,outlen:n};return c.h[0]^=16842752^o<<8^n,o>0&&(h(c,t),c.c=64),c}function h(n,t){for(let o=0;o<t.length;o++)64===n.c&&(n.t+=n.c,a(n,!1),n.c=0),n.b[n.c++]=t[o]}function b(n){for(n.t+=n.c;n.c<64;)n.b[n.c++]=0;a(n,!0);const t=new Uint8Array(n.outlen);for(let o=0;o<n.outlen;o++)t[o]=n.h[o>>2]>>8*(3&o)&255;return t}function w(t,o,c){c=c||32,t=n.normalizeInput(t);const i=s(c,o);return h(i,t),b(i)}_m.exports={blake2s:w,blake2sHex:function(t,o,c){const i=w(t,o,c);return n.toHex(i)},blake2sInit:s,blake2sUpdate:h,blake2sFinal:b}}),4608,[4607]);
__d((function(_g,_r,_i,a,m,_e,_d){var e=_r(_d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=_e.HttpConnection=void 0;var t=_r(_d[1]),s=e(_r(_d[2])),i=_r(_d[3]),r=_r(_d[4]),n=Object.defineProperty,o=Object.defineProperties,h=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,d=(e,t,s)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,v=(e,t)=>{for(var s in t||(t={}))c.call(t,s)&&d(e,s,t[s]);if(l)for(var s of l(t))p.call(t,s)&&d(e,s,t[s]);return e},g=(e,t)=>o(e,h(t));const f={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};_e.default=_e.HttpConnection=class{constructor(e,s=!1){if(this.url=e,this.disableProviderPing=s,this.events=new t.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,r.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=s}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=(0,i.safeJsonStringify)(e),r=await(await(0,s.default)(this.url,g(v({},f),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,r.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=(0,i.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});await(0,s.default)(e,g(v({},f),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?(0,i.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const s=this.parseError(t),i=s.message||s.toString(),n=(0,r.formatJsonRpcError)(e,i);this.events.emit("payload",n)}parseError(e,t=this.url){return(0,r.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}}),4626,[7,4181,8455,4200,4610]);
__d((function(g,_r,_i,_a,_m,_e2,_d){Object.defineProperty(_e2,"__esModule",{value:!0}),_e2.default=_e2.WALLETCONNECT_DEEPLINK_CHOICE=_e2.TVF_METHODS=_e2.SignClient=_e2.SessionStore=_e2.SIGN_CLIENT_VERSION=_e2.SIGN_CLIENT_STORAGE_PREFIX=_e2.SIGN_CLIENT_STORAGE_OPTIONS=_e2.SIGN_CLIENT_PROTOCOL=_e2.SIGN_CLIENT_EVENTS=_e2.SIGN_CLIENT_DEFAULT=_e2.SIGN_CLIENT_CONTEXT=_e2.SESSION_REQUEST_EXPIRY_BOUNDARIES=_e2.SESSION_EXPIRY=_e2.SESSION_CONTEXT=_e2.REQUEST_CONTEXT=_e2.PROPOSAL_EXPIRY_MESSAGE=_e2.PROPOSAL_EXPIRY=_e2.PROPOSAL_CONTEXT=_e2.METHODS_TO_VERIFY=_e2.HISTORY_STORAGE_VERSION=_e2.HISTORY_EVENTS=_e2.HISTORY_CONTEXT=_e2.ENGINE_RPC_OPTS=_e2.ENGINE_QUEUE_STATES=_e2.ENGINE_CONTEXT=_e2.AUTH_VERSION=_e2.AUTH_STORAGE_PREFIX=_e2.AUTH_REQUEST_CONTEXT=_e2.AUTH_PUBLIC_KEY_NAME=_e2.AUTH_PROTOCOL=_e2.AUTH_PAIRING_TOPIC_CONTEXT=_e2.AUTH_KEYS_CONTEXT=_e2.AUTH_CONTEXT=void 0;var e=_r(_d[0]),t=_r(_d[1]),s=_r(_d[2]),i=_r(_d[3]),r=(function(e,t){if("function"==typeof WeakMap)var s=new WeakMap,i=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var r,n,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(r=t?i:s){if(r.has(e))return r.get(e);r.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?r(o,t,n):o[t]=e[t]);return o})(e,t)})(_r(_d[4])),n=_r(_d[5]),o=_r(_d[6]);const a=_e2.SIGN_CLIENT_PROTOCOL="wc",c=_e2.SIGN_CLIENT_VERSION=2,l=_e2.SIGN_CLIENT_CONTEXT="client",p=_e2.SIGN_CLIENT_STORAGE_PREFIX=`${a}@${c}:${l}:`,h=_e2.SIGN_CLIENT_DEFAULT={name:l,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},d=(_e2.SIGN_CLIENT_EVENTS={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_authenticate:"session_authenticate",session_request_expire:"session_request_expire",session_connect:"session_connect"},_e2.SIGN_CLIENT_STORAGE_OPTIONS={database:":memory:"},_e2.WALLETCONNECT_DEEPLINK_CHOICE="WALLETCONNECT_DEEPLINK_CHOICE"),u=(_e2.HISTORY_EVENTS={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_e2.HISTORY_CONTEXT="history",_e2.HISTORY_STORAGE_VERSION="0.3",_e2.PROPOSAL_CONTEXT="proposal"),E=(_e2.PROPOSAL_EXPIRY=n.THIRTY_DAYS,_e2.PROPOSAL_EXPIRY_MESSAGE="Proposal expired"),y=_e2.SESSION_CONTEXT="session",_=_e2.SESSION_EXPIRY=n.SEVEN_DAYS,m=_e2.ENGINE_CONTEXT="engine",w=_e2.ENGINE_RPC_OPTS={wc_sessionPropose:{req:{ttl:n.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:n.ONE_DAY,prompt:!1,tag:1104},res:{ttl:n.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:n.ONE_DAY,prompt:!1,tag:1106},res:{ttl:n.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:n.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:n.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:n.ONE_DAY,prompt:!1,tag:1112},res:{ttl:n.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:n.ONE_DAY,prompt:!1,tag:1114},res:{ttl:n.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:n.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:n.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:n.FIVE_MINUTES,prompt:!1,tag:1119}}},S=_e2.SESSION_REQUEST_EXPIRY_BOUNDARIES={min:n.FIVE_MINUTES,max:n.SEVEN_DAYS},T=_e2.ENGINE_QUEUE_STATES={idle:"IDLE",active:"ACTIVE"},I=_e2.TVF_METHODS={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},R=_e2.REQUEST_CONTEXT="request",N=_e2.METHODS_TO_VERIFY=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],f=_e2.AUTH_PROTOCOL="wc",v=(_e2.AUTH_VERSION=1.5,_e2.AUTH_CONTEXT="auth"),P=_e2.AUTH_KEYS_CONTEXT="authKeys",O=_e2.AUTH_PAIRING_TOPIC_CONTEXT="pairingTopics",q=_e2.AUTH_REQUEST_CONTEXT="requests",A=_e2.AUTH_STORAGE_PREFIX=`${f}@1.5:${v}:`,C=_e2.AUTH_PUBLIC_KEY_NAME=`${A}:PUB_KEY`;var V=Object.defineProperty,L=Object.defineProperties,x=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,k=(e,t,s)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,U=(e,t)=>{for(var s in t||(t={}))D.call(t,s)&&k(e,s,t[s]);if(b)for(var s of b(t))M.call(t,s)&&k(e,s,t[s]);return e},$=(e,t)=>L(e,x(t)),K=(e,t,s)=>k(e,"symbol"!=typeof t?t+"":t,s);class F extends s.IEngine{constructor(t){super(t),K(this,"name",m),K(this,"events",new r.default),K(this,"initialized",!1),K(this,"requestQueue",{state:T.idle,queue:[]}),K(this,"sessionRequestQueue",{state:T.idle,queue:[]}),K(this,"emittedSessionRequests",new i.LimitedSet({limit:500})),K(this,"requestQueueDelay",n.ONE_SECOND),K(this,"expectedPairingMethodMap",new Map),K(this,"recentlyDeletedMap",new Map),K(this,"recentlyDeletedLimit",200),K(this,"relayMessageCache",[]),K(this,"pendingSessions",new Map),K(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(w)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,n.toMiliseconds)(this.requestQueueDelay)))})),K(this,"connect",(async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=$(U({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=(0,i.mergeRequiredAndOptionalNamespaces)(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:r,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:l,scopedProperties:p,relays:h}=s;let d,u=r,y=!1;try{if(u){const e=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),e}if(!u||!y){const{topic:e,uri:t}=await this.client.core.pairing.create();u=e,d=t}if(!u){const{message:e}=(0,i.getInternalError)("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(e)}const _=await this.client.core.crypto.generateKeyPair(),m=w.wc_sessionPropose.req.ttl||n.FIVE_MINUTES,S=(0,i.calcExpiry)(m),T=$(U(U({requiredNamespaces:a,optionalNamespaces:c,relays:h??[{protocol:e.RELAYER_DEFAULT_PROTOCOL}],proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:S,pairingTopic:u},l&&{sessionProperties:l}),p&&{scopedProperties:p}),{id:(0,o.payloadId)()}),I=(0,i.engineEvent)("session_connect",T.id),{reject:R,resolve:N,done:f}=(0,i.createDelayedPromise)(m,E),v=({id:e})=>{e===T.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(T.id),this.events.emit(I,{error:{message:E,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(I,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?R(e):t&&N(t)})),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:T,throwOnFailedPublish:!0,clientRpcId:T.id}),await this.setProposal(T.id,T),{uri:d,approval:f}})),K(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),K(this,"approve",(async t=>{var s,r,n;const o=this.client.core.eventClient.createEvent({properties:{topic:null==(s=t?.id)?void 0:s.toString(),trace:[e.EVENT_CLIENT_SESSION_TRACES.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(t){throw o.setError(e.EVENT_CLIENT_SESSION_ERRORS.no_internet_connection),t}try{await this.isValidProposalId(t?.id)}catch(s){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),o.setError(e.EVENT_CLIENT_SESSION_ERRORS.proposal_not_found),s}try{await this.isValidApprove(t)}catch(t){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(e.EVENT_CLIENT_SESSION_ERRORS.session_approve_namespace_validation_failure),t}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:p,scopedProperties:h,sessionConfig:d}=t,u=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:E,proposer:y,requiredNamespaces:m,optionalNamespaces:w}=u;let S=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:E});S||(S=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:e.EVENT_CLIENT_SESSION_TRACES.session_approve_started,properties:{topic:E,trace:[e.EVENT_CLIENT_SESSION_TRACES.session_approve_started,e.EVENT_CLIENT_SESSION_TRACES.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),I=y.publicKey,R=await this.client.core.crypto.generateSharedKey(T,I),N=U(U(U({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:T,metadata:this.client.metadata},expiry:(0,i.calcExpiry)(_)},p&&{sessionProperties:p}),h&&{scopedProperties:h}),d&&{sessionConfig:d}),f=e.TRANSPORT_TYPES.relay;S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:f})}catch(t){throw S.setError(e.EVENT_CLIENT_SESSION_ERRORS.subscribe_session_topic_failure),t}S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.subscribe_session_topic_success);const v=$(U({},N),{topic:R,requiredNamespaces:m,optionalNamespaces:w,pairingTopic:E,acknowledged:!1,self:N.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:T,transportType:e.TRANSPORT_TYPES.relay});await this.client.session.set(R,v),S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.store_session);try{S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:N,throwOnFailedPublish:!0}).catch((t=>{throw S?.setError(e.EVENT_CLIENT_SESSION_ERRORS.session_settle_publish_failure),t})),S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.session_settle_publish_success),S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.publishing_session_approve),await this.sendResult({id:a,topic:E,result:{relay:{protocol:c??"irn"},responderPublicKey:T},throwOnFailedPublish:!0}).catch((t=>{throw S?.setError(e.EVENT_CLIENT_SESSION_ERRORS.session_approve_publish_failure),t})),S.addTrace(e.EVENT_CLIENT_SESSION_TRACES.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(R,(0,i.getSdkError)("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),e}return this.client.core.eventClient.deleteEvent({eventId:S.eventId}),await this.client.core.pairing.updateMetadata({topic:E,metadata:y.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:E}),await this.setExpiry(R,(0,i.calcExpiry)(_)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}})),K(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:s}=e;let i;try{i=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}i&&await this.sendError({id:t,topic:i,error:s,rpcOpts:w.wc_sessionPropose.reject}),await this.deleteProposal(t)})),K(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:s}=e,{done:r,resolve:n,reject:a}=(0,i.createDelayedPromise)(),c=(0,o.payloadId)(),l=(0,o.getBigIntRpcId)().toString(),p=this.client.session.get(t).namespaces;return this.events.once((0,i.engineEvent)("session_update",c),(({error:e})=>{e?a(e):n()})),await this.client.session.update(t,{namespaces:s}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:p}),a(e)})),{acknowledged:r}})),K(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,s=(0,o.payloadId)(),{done:r,resolve:n,reject:a}=(0,i.createDelayedPromise)();return this.events.once((0,i.engineEvent)("session_extend",s),(({error:e})=>{e?a(e):n()})),await this.setExpiry(t,(0,i.calcExpiry)(_)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch((e=>{a(e)})),{acknowledged:r}})),K(this,"request",(async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:s,request:r,topic:n,expiry:a=w.wc_sessionRequest.req.ttl}=t,c=this.client.session.get(n);c?.transportType===e.TRANSPORT_TYPES.relay&&await this.confirmOnlineStateOrThrow();const l=(0,o.payloadId)(),p=(0,o.getBigIntRpcId)().toString(),{done:h,resolve:u,reject:E}=(0,i.createDelayedPromise)(a,"Request expired. Please try again.");this.events.once((0,i.engineEvent)("session_request",l),(({error:e,result:t})=>{e?E(e):u(t)}));const y="wc_sessionRequest",_=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);if(_)return await this.sendRequest({clientRpcId:l,relayRpcId:p,topic:n,method:y,params:{request:$(U({},r),{expiryTimestamp:(0,i.calcExpiry)(a)}),chainId:s},expiry:a,throwOnFailedPublish:!0,appLink:_}).catch((e=>E(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:s,id:l}),await h();const m={request:$(U({},r),{expiryTimestamp:(0,i.calcExpiry)(a)}),chainId:s};return await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:l,relayRpcId:p,topic:n,method:y,params:m,expiry:a,throwOnFailedPublish:!0,tvf:this.getTVFParams(l,m)}).catch((e=>E(e))),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:s,id:l}),e()})),new Promise((async e=>{var t;if(null==(t=c.sessionConfig)||!t.disableDeepLink){const e=await(0,i.getDeepLink)(this.client.core.storage,d);await(0,i.handleDeeplinkRedirect)({id:l,topic:n,wcDeepLink:e})}e()})),h()]).then((e=>e[2]))})),K(this,"respond",(async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:s,response:i}=t,{id:r}=i,n=this.client.session.get(s);n.transportType===e.TRANSPORT_TYPES.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);(0,o.isJsonRpcResult)(i)?await this.sendResult({id:r,topic:s,result:i.result,throwOnFailedPublish:!0,appLink:a}):(0,o.isJsonRpcError)(i)&&await this.sendError({id:r,topic:s,error:i.error,appLink:a}),this.cleanupAfterResponse(t)})),K(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=(0,o.payloadId)(),s=(0,o.getBigIntRpcId)().toString(),{done:r,resolve:n,reject:a}=(0,i.createDelayedPromise)();this.events.once((0,i.engineEvent)("session_ping",e),(({error:e})=>{e?a(e):n()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:s}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),K(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:s,chainId:i}=e,r=(0,o.getBigIntRpcId)().toString(),n=(0,o.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:r,clientRpcId:n})})),K(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:(0,i.getSdkError)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=(0,i.getInternalError)("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),K(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>(0,i.isSessionCompatible)(t,e)))))),K(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),K(this,"authenticate",(async(t,s)=>{var r;this.isInitialized(),this.isValidAuthenticate(t);const n=s&&this.client.core.linkModeSupportedApps.includes(s)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=n?e.TRANSPORT_TYPES.link_mode:e.TRANSPORT_TYPES.relay;a===e.TRANSPORT_TYPES.relay&&await this.confirmOnlineStateOrThrow();const{chains:c,statement:l="",uri:p,domain:h,nonce:d,type:u,exp:E,nbf:y,methods:m=[],expiry:S}=t,T=[...t.resources||[]],{topic:I,uri:R}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:I,uri:R}});const N=await this.client.core.crypto.generateKeyPair(),f=(0,i.hashKey)(N);if(await Promise.all([this.client.auth.authKeys.set(C,{responseTopic:f,publicKey:N}),this.client.auth.pairingTopics.set(f,{topic:f,pairingTopic:I})]),await this.client.core.relayer.subscribe(f,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${I}`),m.length>0){const{namespace:e}=(0,i.parseChainId)(c[0]);let t=(0,i.createEncodedRecap)(e,"request",m);(0,i.getRecapFromResources)(T)&&(t=(0,i.mergeEncodedRecaps)(t,T.pop())),T.push(t)}const v=S&&S>w.wc_sessionAuthenticate.req.ttl?S:w.wc_sessionAuthenticate.req.ttl,P={authPayload:{type:u??"caip122",chains:c,statement:l,aud:p,domain:h,version:"1",nonce:d,iat:(new Date).toISOString(),exp:E,nbf:y,resources:T},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:(0,i.calcExpiry)(v)},O={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:c,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:I,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:(0,i.calcExpiry)(w.wc_sessionPropose.req.ttl),id:(0,o.payloadId)()},{done:q,resolve:A,reject:V}=(0,i.createDelayedPromise)(v,"Request expired"),L=(0,o.payloadId)(),x=(0,i.engineEvent)("session_connect",O.id),b=(0,i.engineEvent)("session_request",L),D=async({error:e,session:t})=>{this.events.off(b,M),e?V(e):t&&A({session:t})},M=async t=>{var r,n,o;if(await this.deletePendingAuthRequest(L,{message:"fulfilled",code:0}),t.error){const e=(0,i.getSdkError)("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return t.error.code===e.code?void 0:(this.events.off(x,D),V(t.error.message))}await this.deleteProposal(O.id),this.events.off(x,D);const{cacaos:c,responder:l}=t.result,p=[],h=[];for(const e of c){await(0,i.validateSignedCacao)({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),V((0,i.getSdkError)("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,s=(0,i.getRecapFromResources)(t.resources),r=[(0,i.getNamespacedDidChainId)(t.iss)],n=(0,i.getDidAddress)(t.iss);if(s){const e=(0,i.getMethodsFromRecap)(s),t=(0,i.getChainsFromRecap)(s);p.push(...e),r.push(...t)}for(const e of r)h.push(`${e}:${n}`)}const d=await this.client.core.crypto.generateSharedKey(N,l.publicKey);let u;p.length>0&&(u={topic:d,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:l,controller:l.publicKey,expiry:(0,i.calcExpiry)(_),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:I,namespaces:(0,i.buildNamespacesFromAuth)([...new Set(p)],[...new Set(h)]),transportType:a},await this.client.core.relayer.subscribe(d,{transportType:a}),await this.client.session.set(d,u),I&&await this.client.core.pairing.updateMetadata({topic:I,metadata:l.metadata}),u=this.client.session.get(d)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=l.metadata.redirect)&&n.linkMode&&null!=(o=l.metadata.redirect)&&o.universal&&s&&(this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.session.update(d,{transportType:e.TRANSPORT_TYPES.link_mode})),A({auths:c,session:u})};let k;this.events.once(x,D),this.events.once(b,M);try{if(n){const e=(0,o.formatJsonRpcRequest)("wc_sessionAuthenticate",P,L);this.client.core.history.set(I,e);const t=await this.client.core.crypto.encode("",e,{type:i.TYPE_2,encoding:i.BASE64URL});k=(0,i.getLinkModeURL)(s,I,t)}else await Promise.all([this.sendRequest({topic:I,method:"wc_sessionAuthenticate",params:P,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:L}),this.sendRequest({topic:I,method:"wc_sessionPropose",params:O,expiry:w.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:O.id})])}catch(e){throw this.events.off(x,D),this.events.off(b,M),e}return await this.setProposal(O.id,O),await this.setAuthRequest(L,{request:$(U({},P),{verifyContext:{}}),pairingTopic:I,transportType:a}),{uri:k??R,response:q}})),K(this,"approveSessionAuthenticate",(async t=>{const{id:s,auths:r}=t,n=this.client.core.eventClient.createEvent({properties:{topic:s.toString(),trace:[e.EVENT_CLIENT_AUTHENTICATE_TRACES.authenticated_session_approve_started]}});try{this.isInitialized()}catch(t){throw n.setError(e.EVENT_CLIENT_AUTHENTICATE_ERRORS.no_internet_connection),t}const o=this.getPendingAuthRequest(s);if(!o)throw n.setError(e.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${s}`);const a=o.transportType||e.TRANSPORT_TYPES.relay;a===e.TRANSPORT_TYPES.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),p=(0,i.hashKey)(c),h={type:i.TYPE_1,receiverPublicKey:c,senderPublicKey:l},d=[],u=[];for(const t of r){if(!await(0,i.validateSignedCacao)({cacao:t,projectId:this.client.core.projectId})){n.setError(e.EVENT_CLIENT_AUTHENTICATE_ERRORS.invalid_cacao);const t=(0,i.getSdkError)("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:s,topic:p,error:t,encodeOpts:h}),new Error(t.message)}n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.cacaos_verified);const{p:r}=t,o=(0,i.getRecapFromResources)(r.resources),a=[(0,i.getNamespacedDidChainId)(r.iss)],c=(0,i.getDidAddress)(r.iss);if(o){const e=(0,i.getMethodsFromRecap)(o),t=(0,i.getChainsFromRecap)(o);d.push(...e),a.push(...t)}for(const e of a)u.push(`${e}:${c}`)}const E=await this.client.core.crypto.generateSharedKey(l,c);let y;if(n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.create_authenticated_session_topic),d?.length>0){y={topic:E,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:(0,i.calcExpiry)(_),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:(0,i.buildNamespacesFromAuth)([...new Set(d)],[...new Set(u)]),transportType:a},n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:a})}catch(t){throw n.setError(e.EVENT_CLIENT_AUTHENTICATE_ERRORS.subscribe_authenticated_session_topic_failure),t}n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.subscribe_authenticated_session_topic_success),await this.client.session.set(E,y),n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}n.addTrace(e.EVENT_CLIENT_AUTHENTICATE_TRACES.publishing_authenticated_session_approve);try{await this.sendResult({topic:p,id:s,result:{cacaos:r,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(t){throw n.setError(e.EVENT_CLIENT_AUTHENTICATE_ERRORS.authenticated_session_approve_publish_failure),t}return await this.client.auth.requests.delete(s,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:y}})),K(this,"rejectSessionAuthenticate",(async t=>{this.isInitialized();const{id:s,reason:r}=t,n=this.getPendingAuthRequest(s);if(!n)throw new Error(`Could not find pending auth request with id ${s}`);n.transportType===e.TRANSPORT_TYPES.relay&&await this.confirmOnlineStateOrThrow();const o=n.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=(0,i.hashKey)(o),l={type:i.TYPE_1,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:s,topic:c,error:r,encodeOpts:l,rpcOpts:w.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(s,{message:"rejected",code:0}),await this.deleteProposal(s)})),K(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:s}=e;return(0,i.formatMessage)(t,s)})),K(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),K(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter((s=>{var i,r;return(null==(i=s.peerMetadata)?void 0:i.url)&&(null==(r=s.peerMetadata)?void 0:r.url)===e.peer.metadata.url&&s.topic&&s.topic!==t.topic}));if(0===s.length)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),K(this,"deleteSession",(async e=>{var t;const{topic:s,expirerHasDeleted:r=!1,emitEvent:n=!0,id:o=0}=e,{self:a}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,(0,i.getSdkError)("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),r||this.client.core.expirer.del(s),this.client.core.storage.removeItem(d).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===s&&this.deletePendingSessionRequest(e.id,(0,i.getSdkError)("USER_DISCONNECTED"))})),s===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=T.idle),n&&this.client.events.emit("session_delete",{id:o,topic:s})})),K(this,"deleteProposal",(async(t,s)=>{if(s)try{const s=this.client.proposal.get(t),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i?.setError(e.EVENT_CLIENT_SESSION_ERRORS.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,(0,i.getSdkError)("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")})),K(this,"deletePendingSessionRequest",(async(e,t,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),s?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),s&&(this.sessionRequestQueue.state=T.idle,this.client.events.emit("session_request_expire",{id:e}))})),K(this,"deletePendingAuthRequest",(async(e,t,s=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),s?Promise.resolve():this.client.core.expirer.del(e)])})),K(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),K(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,(0,i.calcExpiry)(w.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),K(this,"setAuthRequest",(async(t,s)=>{const{request:i,pairingTopic:r,transportType:n=e.TRANSPORT_TYPES.relay}=s;this.client.core.expirer.set(t,i.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:t,pairingTopic:r,verifyContext:i.verifyContext,transportType:n})})),K(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:s,params:r,verifyContext:n}=e,o=r.request.expiryTimestamp||(0,i.calcExpiry)(w.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,o),await this.client.pendingRequest.set(t,{id:t,topic:s,params:r,verifyContext:n})})),K(this,"sendRequest",(async e=>{const{topic:t,method:s,params:r,expiry:n,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:p,tvf:h}=e,d=(0,o.formatJsonRpcRequest)(s,r,c);let u;const E=!!p;try{const e=E?i.BASE64URL:i.BASE64;u=await this.client.core.crypto.encode(t,d,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let y;if(N.includes(s)){const e=(0,i.hashMessage)(JSON.stringify(d)),t=(0,i.hashMessage)(u);y=await this.client.core.verify.register({id:t,decryptedId:e})}const _=w[s].req;if(_.attestation=y,n&&(_.ttl=n),a&&(_.id=a),this.client.core.history.set(t,d),E){const e=(0,i.getLinkModeURL)(p,t,u);await g.Linking.openURL(e,this.client.name)}else{const e=w[s].req;n&&(e.ttl=n),a&&(e.id=a),e.tvf=$(U({},h),{correlationId:d.id}),l?(e.internal=$(U({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,u,e)):this.client.core.relayer.publish(t,u,e).catch((e=>this.client.logger.error(e)))}return d.id})),K(this,"sendResult",(async e=>{const{id:t,topic:s,result:r,throwOnFailedPublish:n,encodeOpts:a,appLink:c}=e,l=(0,o.formatJsonRpcResult)(t,r);let p;const h=c&&typeof(null==g?void 0:g.Linking)<"u";try{const e=h?i.BASE64URL:i.BASE64;p=await this.client.core.crypto.encode(s,l,$(U({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),e}let d,u;try{d=await this.client.core.history.get(s,t);const e=d.request;try{u=this.getTVFParams(t,e.params,r)}catch(e){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${e?.message}`)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${t}) failed`),e}if(h){const e=(0,i.getLinkModeURL)(c,s,p);await g.Linking.openURL(e,this.client.name)}else{const e=d.request.method,i=w[e].res;i.tvf=$(U({},u),{correlationId:t}),n?(i.internal=$(U({},i.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,p,i)):this.client.core.relayer.publish(s,p,i).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(l)})),K(this,"sendError",(async e=>{const{id:t,topic:s,error:r,encodeOpts:n,rpcOpts:a,appLink:c}=e,l=(0,o.formatJsonRpcError)(t,r);let p;const h=c&&typeof(null==g?void 0:g.Linking)<"u";try{const e=h?i.BASE64URL:i.BASE64;p=await this.client.core.crypto.encode(s,l,$(U({},n||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}let d;try{d=await this.client.core.history.get(s,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${t}) failed`),e}if(h){const e=(0,i.getLinkModeURL)(c,s,p);await g.Linking.openURL(e,this.client.name)}else{const e=d.request.method,t=a||w[e].res;this.client.core.relayer.publish(s,p,t)}await this.client.core.history.resolve(l)})),K(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let s=!1;(0,i.isExpired)(t.expiry)&&(s=!0),this.client.core.crypto.keychain.has(t.topic)||(s=!0),s&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{(0,i.isExpired)(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),K(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),K(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),K(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==T.active){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=T.active;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=T.idle}else this.client.logger.info("Request queue already active, skipping...")})),K(this,"processRequest",(async e=>{const{topic:t,payload:s,attestation:i,transportType:r,encryptedId:n}=e,o=s.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:s,attestation:i,encryptedId:n});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,s);case"wc_sessionPing":return await this.onSessionPingRequest(t,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:s,attestation:i,encryptedId:n,transportType:r});case"wc_sessionEvent":return await this.onSessionEventRequest(t,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:s,attestation:i,encryptedId:n,transportType:r});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),K(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:s,transportType:i}=e,r=(await this.client.core.history.get(t,s.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(t,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,s);case"wc_sessionExtend":return this.onSessionExtendResponse(t,s);case"wc_sessionPing":return this.onSessionPingResponse(t,s);case"wc_sessionRequest":return this.onSessionRequestResponse(t,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,s);default:return this.client.logger.info(`Unsupported response method ${r}`)}})),K(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:s}=(0,i.getInternalError)("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)})),K(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:s}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(s))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)})),K(this,"onSessionProposeRequest",(async t=>{const{topic:s,payload:r,attestation:n,encryptedId:o}=t,{params:a,id:c}=r;try{const t=this.client.core.eventClient.getEvent({topic:s});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),t?.setError(e.EVENT_CLIENT_PAIRING_ERRORS.proposal_listener_not_found)),this.isValidConnect(U({},r.params));const l=a.expiryTimestamp||(0,i.calcExpiry)(w.wc_sessionPropose.req.ttl),p=U({id:c,pairingTopic:s,expiryTimestamp:l,attestation:n,encryptedId:o},a);await this.setProposal(c,p);const h=await this.getVerifyContext({attestationId:n,hash:(0,i.hashMessage)(JSON.stringify(r)),encryptedId:o,metadata:p.proposer.metadata});t?.addTrace(e.EVENT_CLIENT_PAIRING_TRACES.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:p,verifyContext:h})}catch(e){await this.sendError({id:c,topic:s,error:e,rpcOpts:w.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),K(this,"onSessionProposeResponse",(async(e,t,s)=>{const{id:r}=t;if((0,o.isJsonRpcResult)(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const n=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});const o=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(r,{sessionTopic:c,pairingTopic:e,proposalId:r,publicKey:o});const l=await this.client.core.relayer.subscribe(c,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if((0,o.isJsonRpcError)(t)){await this.deleteProposal(r);const e=(0,i.engineEvent)("session_connect",r);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),K(this,"onSessionSettleRequest",(async(t,s)=>{const{id:r,params:n}=s;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:o,expiry:a,namespaces:c,sessionProperties:l,scopedProperties:p,sessionConfig:h}=s.params,d=[...this.pendingSessions.values()].find((e=>e.sessionTopic===t));if(!d)return this.client.logger.error(`Pending session not found for topic ${t}`);const u=this.client.proposal.get(d.proposalId),E=$(U(U(U({topic:t,relay:r,expiry:a,namespaces:c,acknowledged:!0,pairingTopic:d.pairingTopic,requiredNamespaces:u.requiredNamespaces,optionalNamespaces:u.optionalNamespaces,controller:o.publicKey,self:{publicKey:d.publicKey,metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},l&&{sessionProperties:l}),p&&{scopedProperties:p}),h&&{sessionConfig:h}),{transportType:e.TRANSPORT_TYPES.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:d.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit((0,i.engineEvent)("session_connect",d.proposalId),{session:E}),this.pendingSessions.delete(d.proposalId),this.deleteProposal(d.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:s.id,topic:t,result:!0})}catch(e){await this.sendError({id:r,topic:t,error:e}),this.client.logger.error(e)}})),K(this,"onSessionSettleResponse",(async(e,t)=>{const{id:s}=t;(0,o.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,i.engineEvent)("session_approve",s),{})):(0,o.isJsonRpcError)(t)&&(await this.client.session.delete(e,(0,i.getSdkError)("USER_DISCONNECTED")),this.events.emit((0,i.engineEvent)("session_approve",s),{error:t.error}))})),K(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:s,id:r}=t;try{const t=`${e}_session_update`,n=i.MemoryStore.get(t);if(n&&this.isRequestOutOfSync(n,r))return this.client.logger.warn(`Discarding out of sync request - ${r}`),void this.sendError({id:r,topic:e,error:(0,i.getSdkError)("INVALID_UPDATE_REQUEST")});this.isValidUpdate(U({topic:e},s));try{i.MemoryStore.set(t,r),await this.client.session.update(e,{namespaces:s.namespaces}),await this.sendResult({id:r,topic:e,result:!0})}catch(e){throw i.MemoryStore.delete(t),e}this.client.events.emit("session_update",{id:r,topic:e,params:s})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),K(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),K(this,"onSessionUpdateResponse",((e,t)=>{const{id:s}=t,r=(0,i.engineEvent)("session_update",s);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,o.isJsonRpcResult)(t)?this.events.emit((0,i.engineEvent)("session_update",s),{}):(0,o.isJsonRpcError)(t)&&this.events.emit((0,i.engineEvent)("session_update",s),{error:t.error})})),K(this,"onSessionExtendRequest",(async(e,t)=>{const{id:s}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,i.calcExpiry)(_)),await this.sendResult({id:s,topic:e,result:!0}),this.client.events.emit("session_extend",{id:s,topic:e})}catch(t){await this.sendError({id:s,topic:e,error:t}),this.client.logger.error(t)}})),K(this,"onSessionExtendResponse",((e,t)=>{const{id:s}=t,r=(0,i.engineEvent)("session_extend",s);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,o.isJsonRpcResult)(t)?this.events.emit((0,i.engineEvent)("session_extend",s),{}):(0,o.isJsonRpcError)(t)&&this.events.emit((0,i.engineEvent)("session_extend",s),{error:t.error})})),K(this,"onSessionPingRequest",(async(e,t)=>{const{id:s}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:e})}catch(t){await this.sendError({id:s,topic:e,error:t}),this.client.logger.error(t)}})),K(this,"onSessionPingResponse",((e,t)=>{const{id:s}=t,r=(0,i.engineEvent)("session_ping",s);setTimeout((()=>{if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners 2176`);(0,o.isJsonRpcResult)(t)?this.events.emit((0,i.engineEvent)("session_ping",s),{}):(0,o.isJsonRpcError)(t)&&this.events.emit((0,i.engineEvent)("session_ping",s),{error:t.error})}),500)})),K(this,"onSessionDeleteRequest",(async(t,s)=>{const{id:r}=s;try{this.isValidDisconnect({topic:t,reason:s.params}),Promise.all([new Promise((s=>{this.client.core.relayer.once(e.RELAYER_EVENTS.publish,(async()=>{s(await this.deleteSession({topic:t,id:r}))}))})),this.sendResult({id:r,topic:t,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:(0,i.getSdkError)("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),K(this,"onSessionRequest",(async t=>{var s,r,n;const{topic:a,payload:c,attestation:l,encryptedId:p,transportType:h}=t,{id:d,params:u}=c;try{await this.isValidRequest(U({topic:a},u));const t=this.client.session.get(a),c={id:d,topic:a,params:u,verifyContext:await this.getVerifyContext({attestationId:l,hash:(0,i.hashMessage)(JSON.stringify((0,o.formatJsonRpcRequest)("wc_sessionRequest",u,d))),encryptedId:p,metadata:t.peer.metadata,transportType:h})};await this.setPendingSessionRequest(c),h===e.TRANSPORT_TYPES.link_mode&&null!=(s=t.peer.metadata.redirect)&&s.universal&&this.client.core.addLinkModeSupportedApp(null==(r=t.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(c):(this.addSessionRequestToSessionRequestQueue(c),this.processSessionRequestQueue())}catch(e){await this.sendError({id:d,topic:a,error:e}),this.client.logger.error(e)}})),K(this,"onSessionRequestResponse",((e,t)=>{const{id:s}=t,r=(0,i.engineEvent)("session_request",s);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);(0,o.isJsonRpcResult)(t)?this.events.emit((0,i.engineEvent)("session_request",s),{result:t.result}):(0,o.isJsonRpcError)(t)&&this.events.emit((0,i.engineEvent)("session_request",s),{error:t.error})})),K(this,"onSessionEventRequest",(async(e,t)=>{const{id:s,params:r}=t;try{const t=`${e}_session_event_${r.event.name}`,n=i.MemoryStore.get(t);if(n&&this.isRequestOutOfSync(n,s))return void this.client.logger.info(`Discarding out of sync request - ${s}`);this.isValidEmit(U({topic:e},r)),this.client.events.emit("session_event",{id:s,topic:e,params:r}),i.MemoryStore.set(t,s)}catch(t){await this.sendError({id:s,topic:e,error:t}),this.client.logger.error(t)}})),K(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:s}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,o.isJsonRpcResult)(t)?this.events.emit((0,i.engineEvent)("session_request",s),{result:t.result}):(0,o.isJsonRpcError)(t)&&this.events.emit((0,i.engineEvent)("session_request",s),{error:t.error})})),K(this,"onSessionAuthenticateRequest",(async t=>{var s;const{topic:r,payload:n,attestation:o,encryptedId:a,transportType:c}=t;try{const{requester:t,authPayload:l,expiryTimestamp:p}=n.params,h=await this.getVerifyContext({attestationId:o,hash:(0,i.hashMessage)(JSON.stringify(n)),encryptedId:a,metadata:t.metadata,transportType:c}),d={requester:t,pairingTopic:r,id:n.id,authPayload:l,verifyContext:h,expiryTimestamp:p};await this.setAuthRequest(n.id,{request:d,pairingTopic:r,transportType:c}),c===e.TRANSPORT_TYPES.link_mode&&null!=(s=t.metadata.redirect)&&s.universal&&this.client.core.addLinkModeSupportedApp(t.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:h})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=this.getAppLinkIfEnabled(n.params.requester.metadata,c),a={type:i.TYPE_1,receiverPublicKey:t,senderPublicKey:s};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:w.wc_sessionAuthenticate.autoReject,appLink:o})}})),K(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),K(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=T.idle,this.processSessionRequestQueue()}),(0,n.toMiliseconds)(this.requestQueueDelay))})),K(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const s=this.client.core.history.pending;s.length>0&&s.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const s=e.request.id,r=(0,i.engineEvent)("session_request",s);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit((0,i.engineEvent)("session_request",e.request.id),{error:t})}))})),K(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===T.active)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),K(this,"emitSessionRequest",(e=>{this.emittedSessionRequests.has(e.id)?this.client.logger.warn({id:e.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${e.id}`):(this.sessionRequestQueue.state=T.active,this.emittedSessionRequests.add(e.id),this.client.events.emit("session_request",e))})),K(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,o.formatJsonRpcRequest)("wc_sessionPropose",$(U({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id),attestation:t.attestation,encryptedId:t.encryptedId})})),K(this,"isValidConnect",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:s,optionalNamespaces:r,sessionProperties:n,scopedProperties:o,relays:a}=e;if((0,i.isUndefined)(t)||await this.isValidPairingTopic(t),!(0,i.isValidRelays)(a,!0)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(e)}if(!(0,i.isUndefined)(s)&&0!==(0,i.isValidObject)(s)){const e="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(e):this.client.logger.warn(e),this.validateNamespaces(s,"requiredNamespaces")}if(!(0,i.isUndefined)(r)&&0!==(0,i.isValidObject)(r)&&this.validateNamespaces(r,"optionalNamespaces"),(0,i.isUndefined)(n)||this.validateSessionProps(n,"sessionProperties"),!(0,i.isUndefined)(o)){this.validateSessionProps(o,"scopedProperties");const e=Object.keys(s||{}).concat(Object.keys(r||{}));if(!Object.keys(o).every((t=>e.includes(t.split(":")[0]))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),K(this,"validateNamespaces",((e,t)=>{const s=(0,i.isValidRequiredNamespaces)(e,"connect()",t);if(s)throw new Error(s.message)})),K(this,"isValidApprove",(async e=>{if(!(0,i.isValidParams)(e))throw new Error((0,i.getInternalError)("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:s,relayProtocol:r,sessionProperties:n,scopedProperties:o}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const a=this.client.proposal.get(t),c=(0,i.isValidNamespaces)(s,"approve()");if(c)throw new Error(c.message);const l=(0,i.isConformingNamespaces)(a.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!(0,i.isValidString)(r,!0)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw new Error(e)}if((0,i.isUndefined)(n)||this.validateSessionProps(n,"sessionProperties"),!(0,i.isUndefined)(o)){this.validateSessionProps(o,"scopedProperties");const e=new Set(Object.keys(s));if(!Object.keys(o).every((t=>e.has(t.split(":")[0]))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),K(this,"isValidReject",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:s}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!(0,i.isValidErrorReason)(s)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(e)}})),K(this,"isValidSessionSettleRequest",(e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:s,namespaces:r,expiry:n}=e;if(!(0,i.isValidRelay)(t)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const o=(0,i.isValidController)(s,"onSessionSettleRequest()");if(o)throw new Error(o.message);const a=(0,i.isValidNamespaces)(r,"onSessionSettleRequest()");if(a)throw new Error(a.message);if((0,i.isExpired)(n)){const{message:e}=(0,i.getInternalError)("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),K(this,"isValidUpdate",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:s}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const r=this.client.session.get(t),n=(0,i.isValidNamespaces)(s,"update()");if(n)throw new Error(n.message);const o=(0,i.isConformingNamespaces)(r.requiredNamespaces,s,"update()");if(o)throw new Error(o.message)})),K(this,"isValidExtend",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),K(this,"isValidRequest",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:s,chainId:r,expiry:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:o}=this.client.session.get(t);if(!(0,i.isValidNamespacesChainId)(o,r)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`request() chainId: ${r}`);throw new Error(e)}if(!(0,i.isValidRequest)(s)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(e)}if(!(0,i.isValidNamespacesRequest)(o,r,s.method)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(e)}if(n&&!(0,i.isValidRequestExpiry)(n,S)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`request() expiry: ${n}. Expiry must be a number (in seconds) between ${S.min} and ${S.max}`);throw new Error(e)}})),K(this,"isValidRespond",(async e=>{var t;if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:s,response:r}=e;try{await this.isValidSessionTopic(s)}catch(s){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),s}if(!(0,i.isValidResponse)(r)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(e)}})),K(this,"isValidPing",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),K(this,"isValidEmit",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:s,chainId:r}=e;await this.isValidSessionTopic(t);const{namespaces:n}=this.client.session.get(t);if(!(0,i.isValidNamespacesChainId)(n,r)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw new Error(e)}if(!(0,i.isValidEvent)(s)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(e)}if(!(0,i.isValidNamespacesEvent)(n,r,s.name)){const{message:e}=(0,i.getInternalError)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(e)}})),K(this,"isValidDisconnect",(async e=>{if(!(0,i.isValidParams)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),K(this,"isValidAuthenticate",(e=>{const{chains:t,uri:s,domain:r,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!(0,i.isValidString)(s,!1))throw new Error("uri is required parameter");if(!(0,i.isValidString)(r,!1))throw new Error("domain is required parameter");if(!(0,i.isValidString)(n,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>(0,i.parseChainId)(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=(0,i.parseChainId)(t[0]);if("eip155"!==o)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),K(this,"getVerifyContext",(async t=>{const{attestationId:s,hash:i,encryptedId:r,metadata:n,transportType:o}=t,a={verified:{verifyUrl:n.verifyUrl||e.VERIFY_SERVER,validation:"UNKNOWN",origin:n.url||""}};try{if(o===e.TRANSPORT_TYPES.link_mode){const e=this.getAppLinkIfEnabled(n,o);return a.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",a}const t=await this.client.core.verify.resolve({attestationId:s,hash:i,encryptedId:r,verifyUrl:n.verifyUrl});t&&(a.verified.origin=t.origin,a.verified.isScam=t.isScam,a.verified.validation=t.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(a)}`),a})),K(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((s,r)=>{if(null==s){const{message:n}=(0,i.getInternalError)("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${s} for key ${Object.keys(e)[r]}`);throw new Error(n)}}))})),K(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),K(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const s of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(s)}}})),K(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:s}=(0,i.getInternalError)("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(s)}})),K(this,"isLinkModeEnabled",((t,s)=>{var i,r,n,o,a,c,l,p,h;return!(!t||s!==e.TRANSPORT_TYPES.link_mode)&&(!0===(null==(r=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:r.linkMode)&&void 0!==(null==(o=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(l=t?.redirect)?void 0:l.universal)&&""!==(null==(p=t?.redirect)?void 0:p.universal)&&!0===(null==(h=t?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(null==g?void 0:g.Linking)<"u")})),K(this,"getAppLinkIfEnabled",((e,t)=>{var s;return this.isLinkModeEnabled(e,t)?null==(s=e?.redirect)?void 0:s.universal:void 0})),K(this,"handleLinkModeMessage",(({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const s=(0,i.getSearchParamFromURL)(t,"topic")||"",r=decodeURIComponent((0,i.getSearchParamFromURL)(t,"wc_ev")||""),n=this.client.session.keys.includes(s);n&&this.client.session.update(s,{transportType:e.TRANSPORT_TYPES.link_mode}),this.client.core.dispatchEnvelope({topic:s,message:r,sessionExists:n})})),K(this,"registerLinkModeListeners",(async()=>{var e;if((0,i.isTestRun)()||(0,i.isReactNative)()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==g?void 0:g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),K(this,"getTVFParams",((e,t,s)=>{var i,r,n;if(null==(i=t.request)||!i.method)return{};const o={correlationId:e,rpcMethods:[t.request.method],chainId:t.chainId};try{const e=this.extractTxHashesFromResult(t.request,s);o.txHashes=e,o.contractAddresses=this.isValidContractData(t.request.params)?[null==(n=null==(r=t.request.params)?void 0:r[0])?void 0:n.to]:[]}catch(e){this.client.logger.warn("Error getting TVF params",e)}return o})),K(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const s=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1})),K(this,"extractTxHashesFromResult",((e,t)=>{var s;try{if(!t)return[];const r=e.method,n=I[r];if("sui_signTransaction"===r)return[(0,i.getSuiDigest)(t.transactionBytes)];if("near_signTransaction"===r)return[(0,i.getNearTransactionIdFromSignedTransaction)(t)];if("near_signTransactions"===r)return t.map((e=>(0,i.getNearTransactionIdFromSignedTransaction)(e)));if("xrpl_signTransactionFor"===r||"xrpl_signTransaction"===r)return[null==(s=t.tx_json)?void 0:s.hash];if("polkadot_signTransaction"===r)return[(0,i.buildSignedExtrinsicHash)({transaction:e.params.transactionPayload,signature:t.signature})];if("algo_signTxn"===r)return(0,i.isValidArray)(t)?t.map((e=>(0,i.getAlgorandTransactionId)(e))):[(0,i.getAlgorandTransactionId)(t)];if("cosmos_signDirect"===r)return[(0,i.getSignDirectHash)(t)];if("string"==typeof t)return[t];const o=t[n.key];if((0,i.isValidArray)(o))return"solana_signAllTransactions"===r?o.map((e=>(0,i.extractSolanaTransactionId)(e))):o;if("string"==typeof o)return[o]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,s]of Object.entries(t))for(const t of s)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,i.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(e.RELAYER_EVENTS.message,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(t){const{topic:s,message:r,attestation:n,transportType:a}=t,{publicKey:c}=this.client.auth.authKeys.keys.includes(C)?this.client.auth.authKeys.get(C):{responseTopic:void 0,publicKey:void 0};try{const t=await this.client.core.crypto.decode(s,r,{receiverPublicKey:c,encoding:a===e.TRANSPORT_TYPES.link_mode?i.BASE64URL:i.BASE64});(0,o.isJsonRpcRequest)(t)?(this.client.core.history.set(s,t),await this.onRelayEventRequest({topic:s,payload:t,attestation:n,transportType:a,encryptedId:(0,i.hashMessage)(r)})):(0,o.isJsonRpcResponse)(t)?(await this.client.core.history.resolve(t),await this.onRelayEventResponse({topic:s,payload:t,transportType:a}),this.client.core.history.delete(s,t.id)):await this.onRelayEventUnknownPayload({topic:s,payload:t,transportType:a}),await this.client.core.relayer.messages.ack(s,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(e.EXPIRER_EVENTS.expired,(async e=>{const{topic:t,id:s}=(0,i.parseExpirerTarget)(e.target);return s&&this.client.pendingRequest.keys.includes(s)?await this.deletePendingSessionRequest(s,(0,i.getInternalError)("EXPIRED"),!0):s&&this.client.auth.requests.keys.includes(s)?await this.deletePendingAuthRequest(s,(0,i.getInternalError)("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s})))}))}registerPairingEvents(){this.client.core.pairing.events.on(e.PAIRING_EVENTS.create,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(e.PAIRING_EVENTS.delete,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!(0,i.isValidString)(e,!1)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=(0,i.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if((0,i.isExpired)(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=(0,i.getInternalError)("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!(0,i.isValidString)(e,!1)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=(0,i.getInternalError)("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if((0,i.isExpired)(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=(0,i.getInternalError)("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if((0,i.isValidString)(e,!1)){const{message:t}=(0,i.getInternalError)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!(0,i.isValidId)(e)){const{message:t}=(0,i.getInternalError)("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=(0,i.getInternalError)("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if((0,i.isExpired)(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=(0,i.getInternalError)("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class G extends e.Store{constructor(e,t){super(e,t,u,p),this.core=e,this.logger=t}}class Y extends e.Store{constructor(e,t){super(e,t,y,p),this.core=e,this.logger=t}}class j extends e.Store{constructor(e,t){super(e,t,R,p,(e=>e.id)),this.core=e,this.logger=t}}class H extends e.Store{constructor(e,t){super(e,t,P,A,(()=>C)),this.core=e,this.logger=t}}class Q extends e.Store{constructor(e,t){super(e,t,O,A),this.core=e,this.logger=t}}class J extends e.Store{constructor(e,t){super(e,t,q,A,(e=>e.id)),this.core=e,this.logger=t}}var X=Object.defineProperty,z=(e,t,s)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,B=(e,t,s)=>z(e,"symbol"!=typeof t?t+"":t,s);class W{constructor(e,t){this.core=e,this.logger=t,B(this,"authKeys"),B(this,"pairingTopics"),B(this,"requests"),this.authKeys=new H(this.core,this.logger),this.pairingTopics=new Q(this.core,this.logger),this.requests=new J(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Z=Object.defineProperty,ee=(e,t,s)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,te=(e,t,s)=>ee(e,"symbol"!=typeof t?t+"":t,s);class se extends s.ISignClient{constructor(s){super(s),te(this,"protocol",a),te(this,"version",c),te(this,"name",h.name),te(this,"metadata"),te(this,"core"),te(this,"logger"),te(this,"events",new r.EventEmitter),te(this,"engine"),te(this,"session"),te(this,"proposal"),te(this,"pendingRequest"),te(this,"auth"),te(this,"signConfig"),te(this,"on",((e,t)=>this.events.on(e,t))),te(this,"once",((e,t)=>this.events.once(e,t))),te(this,"off",((e,t)=>this.events.off(e,t))),te(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),te(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),te(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),te(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),te(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),te(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=s?.name||h.name,this.metadata=(0,i.populateAppMetadata)(s?.metadata),this.signConfig=s?.signConfig;const n=typeof s?.logger<"u"&&"string"!=typeof s?.logger?s.logger:(0,t.pino)((0,t.getDefaultLoggerOptions)({level:s?.logger||h.logger}));this.core=s?.core||new e.Core(s),this.logger=(0,t.generateChildLogger)(n,this.name),this.session=new Y(this.core,this.logger),this.proposal=new G(this.core,this.logger),this.pendingRequest=new j(this.core,this.logger),this.engine=new F(this),this.auth=new W(this.core,this.logger)}static async init(e){const t=new se(e);return await t.initialize(),t}get context(){return(0,t.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}_e2.default=se;_e2.SessionStore=Y,_e2.SignClient=se}),8178,[8179,4197,8180,8181,4181,4183,4610]);
__d((function(_g,_r2,_i2,_a,m,_e2,_d){var e=_r2(_d[0]);Object.defineProperty(_e2,"__esModule",{value:!0}),_e2.default=_e2.WALLETCONNECT_LINK_MODE_APPS=_e2.WALLETCONNECT_CLIENT_ID=_e2.Verify=_e2.VERIFY_SERVER_V3=_e2.VERIFY_SERVER=_e2.VERIFY_CONTEXT=_e2.TRUSTED_VERIFY_URLS=_e2.TRANSPORT_TYPES=_e2.Subscriber=_e2.Store=_e2.SUBSCRIBER_STORAGE_VERSION=_e2.SUBSCRIBER_EVENTS=_e2.SUBSCRIBER_DEFAULT_TTL=_e2.SUBSCRIBER_CONTEXT=_e2.STORE_STORAGE_VERSION=_e2.Relayer=_e2.RELAYER_TRANSPORT_CUTOFF=_e2.RELAYER_SUBSCRIBER_SUFFIX=_e2.RELAYER_STORAGE_OPTIONS=_e2.RELAYER_SDK_VERSION=_e2.RELAYER_RECONNECT_TIMEOUT=_e2.RELAYER_PROVIDER_EVENTS=_e2.RELAYER_EVENTS=_e2.RELAYER_DEFAULT_RELAY_URL=_e2.RELAYER_DEFAULT_PROTOCOL=_e2.RELAYER_DEFAULT_LOGGER=_e2.RELAYER_CONTEXT=_e2.Pairing=_e2.PUBLISHER_DEFAULT_TTL=_e2.PUBLISHER_CONTEXT=_e2.PENDING_SUB_RESOLUTION_TIMEOUT=_e2.PAIRING_STORAGE_VERSION=_e2.PAIRING_RPC_OPTS=_e2.PAIRING_EVENTS=_e2.PAIRING_DEFAULT_TTL=_e2.PAIRING_CONTEXT=_e2.MessageTracker=_e2.MESSAGE_DIRECTION=_e2.MESSAGES_STORAGE_VERSION=_e2.MESSAGES_CONTEXT=_e2.KeyChain=_e2.KEYCHAIN_STORAGE_VERSION=_e2.KEYCHAIN_CONTEXT=_e2.JsonRpcHistory=_e2.HISTORY_STORAGE_VERSION=_e2.HISTORY_EVENTS=_e2.HISTORY_CONTEXT=_e2.Expirer=_e2.EventClient=_e2.EchoClient=_e2.EXPIRER_STORAGE_VERSION=_e2.EXPIRER_EVENTS=_e2.EXPIRER_DEFAULT_TTL=_e2.EXPIRER_CONTEXT=_e2.EVENT_CLIENT_SESSION_TRACES=_e2.EVENT_CLIENT_SESSION_ERRORS=_e2.EVENT_CLIENT_PAIRING_TRACES=_e2.EVENT_CLIENT_PAIRING_ERRORS=_e2.EVENT_CLIENT_CONTEXT=_e2.EVENT_CLIENT_AUTHENTICATE_TRACES=_e2.EVENT_CLIENT_AUTHENTICATE_ERRORS=_e2.EVENTS_STORAGE_VERSION=_e2.EVENTS_STORAGE_CONTEXT=_e2.EVENTS_STORAGE_CLEANUP_INTERVAL=_e2.EVENTS_CLIENT_API_URL=_e2.ECHO_URL=_e2.ECHO_CONTEXT=_e2.Crypto=_e2.Core=_e2.CRYPTO_JWT_TTL=_e2.CRYPTO_CONTEXT=_e2.CRYPTO_CLIENT_SEED=_e2.CORE_VERSION=_e2.CORE_STORAGE_PREFIX=_e2.CORE_STORAGE_OPTIONS=_e2.CORE_PROTOCOL=_e2.CORE_DEFAULT=_e2.CORE_CONTEXT=void 0;var t=b(_r2(_d[1])),i=_r2(_d[2]),s=e(_r2(_d[3])),r=_r2(_d[4]),o=_r2(_d[5]),n=_r2(_d[6]),a=_r2(_d[7]),c=b(_r2(_d[8])),h=c,l=_r2(_d[9]),g=_r2(_d[10]),p=_r2(_d[11]),d=_r2(_d[12]),u=e(_r2(_d[13])),y=_r2(_d[14]);function b(e,t){if("function"==typeof WeakMap)var i=new WeakMap,s=new WeakMap;return(b=function(e,t){if(!t&&e&&e.__esModule)return e;var r,o,n={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return n;if(r=t?s:i){if(r.has(e))return r.get(e);r.set(e,n)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?r(n,t,o):n[t]=e[t]);return n})(e,t)}const E=_e2.CORE_PROTOCOL="wc",f=_e2.CORE_VERSION=2,_=_e2.CORE_CONTEXT="core",w=_e2.CORE_STORAGE_PREFIX=`${E}@2:${_}:`,v=_e2.CORE_DEFAULT={name:_,logger:"error"},T=_e2.CORE_STORAGE_OPTIONS={database:":memory:"},I=_e2.CRYPTO_CONTEXT="crypto",R=_e2.CRYPTO_CLIENT_SEED="client_ed25519_seed",S=_e2.CRYPTO_JWT_TTL=n.ONE_DAY,P=_e2.KEYCHAIN_CONTEXT="keychain",O=_e2.KEYCHAIN_STORAGE_VERSION="0.3",C=_e2.MESSAGES_CONTEXT="messages",A=_e2.MESSAGES_STORAGE_VERSION="0.3",N=_e2.PUBLISHER_DEFAULT_TTL=n.SIX_HOURS,x=_e2.PUBLISHER_CONTEXT="publisher",L=_e2.RELAYER_DEFAULT_PROTOCOL="irn",D=_e2.RELAYER_DEFAULT_LOGGER="error",U=_e2.RELAYER_DEFAULT_RELAY_URL="wss://relay.walletconnect.org",k=_e2.RELAYER_CONTEXT="relayer",M=_e2.RELAYER_EVENTS={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},z=_e2.RELAYER_SUBSCRIBER_SUFFIX="_subscription",j=_e2.RELAYER_PROVIDER_EVENTS={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},V=_e2.RELAYER_RECONNECT_TIMEOUT=.1,K=(_e2.RELAYER_STORAGE_OPTIONS={database:":memory:"},_e2.RELAYER_SDK_VERSION="2.21.4"),$=(_e2.RELAYER_TRANSPORT_CUTOFF=1e4,_e2.TRANSPORT_TYPES={link_mode:"link_mode",relay:"relay"}),B=_e2.MESSAGE_DIRECTION={inbound:"inbound",outbound:"outbound"},F=_e2.STORE_STORAGE_VERSION="0.3",G=_e2.WALLETCONNECT_CLIENT_ID="WALLETCONNECT_CLIENT_ID",Y=_e2.WALLETCONNECT_LINK_MODE_APPS="WALLETCONNECT_LINK_MODE_APPS",q=_e2.SUBSCRIBER_EVENTS={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},H=(_e2.SUBSCRIBER_DEFAULT_TTL=n.THIRTY_DAYS,_e2.SUBSCRIBER_CONTEXT="subscription"),W=_e2.SUBSCRIBER_STORAGE_VERSION="0.3",J=(_e2.PENDING_SUB_RESOLUTION_TIMEOUT=1e3*n.FIVE_SECONDS,_e2.PAIRING_CONTEXT="pairing"),X=_e2.PAIRING_STORAGE_VERSION="0.3",Z=(_e2.PAIRING_DEFAULT_TTL=n.THIRTY_DAYS,_e2.PAIRING_RPC_OPTS={wc_pairingDelete:{req:{ttl:n.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:n.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:n.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:n.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:n.ONE_DAY,prompt:!1,tag:0},res:{ttl:n.ONE_DAY,prompt:!1,tag:0}}}),Q=_e2.PAIRING_EVENTS={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ee=_e2.HISTORY_EVENTS={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},te=_e2.HISTORY_CONTEXT="history",ie=_e2.HISTORY_STORAGE_VERSION="0.3",se=_e2.EXPIRER_CONTEXT="expirer",re=_e2.EXPIRER_EVENTS={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},oe=_e2.EXPIRER_STORAGE_VERSION="0.3",ne=(_e2.EXPIRER_DEFAULT_TTL=n.ONE_DAY,_e2.VERIFY_CONTEXT="verify-api"),ae="https://verify.walletconnect.org",ce=_e2.VERIFY_SERVER=ae,he=_e2.VERIFY_SERVER_V3=`${ce}/v3`,le=_e2.TRUSTED_VERIFY_URLS=["https://verify.walletconnect.com",ae],ge=_e2.ECHO_CONTEXT="echo",pe=_e2.ECHO_URL="https://echo.walletconnect.com",de=(_e2.EVENT_CLIENT_CONTEXT="event-client",_e2.EVENT_CLIENT_PAIRING_TRACES={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"}),ue=_e2.EVENT_CLIENT_PAIRING_ERRORS={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ye=(_e2.EVENT_CLIENT_SESSION_TRACES={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},_e2.EVENT_CLIENT_SESSION_ERRORS={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},_e2.EVENT_CLIENT_AUTHENTICATE_TRACES={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},_e2.EVENT_CLIENT_AUTHENTICATE_ERRORS={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},_e2.EVENTS_STORAGE_VERSION=.1),be=_e2.EVENTS_STORAGE_CONTEXT="event-client",me=_e2.EVENTS_STORAGE_CLEANUP_INTERVAL=86400,Ee=_e2.EVENTS_CLIENT_API_URL="https://pulse.walletconnect.org/batch";var fe=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),s=0;s<i.length;s++)i[s]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),n=o.charCodeAt(0);if(255!==i[n])throw new TypeError(o+" is ambiguous");i[n]=r}var a=e.length,c=e.charAt(0),h=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function g(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var s=0,r=0;e[t]===c;)s++,t++;for(var o=(e.length-t)*h+1>>>0,n=new Uint8Array(o);e[t];){var l=i[e.charCodeAt(t)];if(255===l)return;for(var g=0,p=o-1;(0!==l||g<r)&&-1!==p;p--,g++)l+=a*n[p]>>>0,n[p]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");r=g,t++}if(" "!==e[t]){for(var d=o-r;d!==o&&0===n[d];)d++;for(var u=new Uint8Array(s+(o-d)),y=s;d!==o;)u[y++]=n[d++];return u}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var i=0,s=0,r=0,o=t.length;r!==o&&0===t[r];)r++,i++;for(var n=(o-r)*l+1>>>0,h=new Uint8Array(n);r!==o;){for(var g=t[r],p=0,d=n-1;(0!==g||p<s)&&-1!==d;d--,p++)g+=256*h[d]>>>0,h[d]=g%a>>>0,g=g/a>>>0;if(0!==g)throw new Error("Non-zero carry");s=p,r++}for(var u=n-s;u!==n&&0===h[u];)u++;for(var y=c.repeat(i);u<n;++u)y+=e.charAt(h[u]);return y},decodeUnsafe:g,decode:function(e){var i=g(e);if(i)return i;throw new Error(`Non-${t} character`)}}};const _e=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},we=e=>(new TextEncoder).encode(e),ve=e=>(new TextDecoder).decode(e);class Te{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ie{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Se(this,e)}}class Re{constructor(e){this.decoders=e}or(e){return Se(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Se=(e,t)=>new Re({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Pe{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Te(e,t,i),this.decoder=new Ie(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Oe=({name:e,prefix:t,encode:i,decode:s})=>new Pe(e,t,i,s),Ce=({prefix:e,name:t,alphabet:i})=>{const{encode:s,decode:r}=fe(i,t);return Oe({prefix:e,name:t,encode:s,decode:e=>_e(r(e))})},Ae=(e,t,i,s)=>{const r={};for(let e=0;e<t.length;++e)r[t[e]]=e;let o=e.length;for(;"="===e[o-1];)--o;const n=new Uint8Array(o*i/8|0);let a=0,c=0,h=0;for(let t=0;t<o;++t){const o=r[e[t]];if(void 0===o)throw new SyntaxError(`Non-${s} character`);c=c<<i|o,a+=i,a>=8&&(a-=8,n[h++]=255&c>>a)}if(a>=i||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return n},Ne=(e,t,i)=>{const s="="===t[t.length-1],r=(1<<i)-1;let o="",n=0,a=0;for(let s=0;s<e.length;++s)for(a=a<<8|e[s],n+=8;n>i;)n-=i,o+=t[r&a>>n];if(n&&(o+=t[r&a<<i-n]),s)for(;o.length*i&7;)o+="=";return o},xe=({name:e,prefix:t,bitsPerChar:i,alphabet:s})=>Oe({prefix:t,name:e,encode:e=>Ne(e,s,i),decode:t=>Ae(t,s,i,e)}),Le=Oe({prefix:"\0",name:"identity",encode:e=>ve(e),decode:e=>we(e)});var De=Object.freeze({__proto__:null,identity:Le});const Ue=xe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ke=Object.freeze({__proto__:null,base2:Ue});const Me=xe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ze=Object.freeze({__proto__:null,base8:Me});const je=Ce({prefix:"9",name:"base10",alphabet:"0123456789"});var Ve=Object.freeze({__proto__:null,base10:je});const Ke=xe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),$e=xe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Be=Object.freeze({__proto__:null,base16:Ke,base16upper:$e});const Fe=xe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ge=xe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ye=xe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qe=xe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),He=xe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),We=xe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Je=xe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xe=xe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ze=xe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Qe=Object.freeze({__proto__:null,base32:Fe,base32upper:Ge,base32pad:Ye,base32padupper:qe,base32hex:He,base32hexupper:We,base32hexpad:Je,base32hexpadupper:Xe,base32z:Ze});const et=Ce({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tt=Ce({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var it=Object.freeze({__proto__:null,base36:et,base36upper:tt});const st=Ce({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rt=Ce({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ot=Object.freeze({__proto__:null,base58btc:st,base58flickr:rt});const nt=xe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),at=xe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ct=xe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ht=xe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lt=Object.freeze({__proto__:null,base64:nt,base64pad:at,base64url:ct,base64urlpad:ht});const gt=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),pt=gt.reduce(((e,t,i)=>(e[i]=t,e)),[]),dt=gt.reduce(((e,t,i)=>(e[t.codePointAt(0)]=i,e)),[]);const ut=Oe({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=pt[t]),"")},decode:function(e){const t=[];for(const i of e){const e=dt[i.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${i}`);t.push(e)}return new Uint8Array(t)}});var yt=Object.freeze({__proto__:null,base256emoji:ut}),bt=function e(t,i,s){i=i||[];for(var r=s=s||0;t>=ft;)i[s++]=255&t|mt,t/=128;for(;t&Et;)i[s++]=255&t|mt,t>>>=7;return i[s]=0|t,e.bytes=s-r+1,i},mt=128,Et=-128,ft=Math.pow(2,31);var _t=function e(t,i){var s,r=0,o=0,n=i=i||0,a=t.length;do{if(n>=a)throw e.bytes=0,new RangeError("Could not decode varint");s=t[n++],r+=o<28?(s&vt)<<o:(s&vt)*Math.pow(2,o),o+=7}while(s>=wt);return e.bytes=n-i,r},wt=128,vt=127;var Tt=Math.pow(2,7),It=Math.pow(2,14),Rt=Math.pow(2,21),St=Math.pow(2,28),Pt=Math.pow(2,35),Ot=Math.pow(2,42),Ct=Math.pow(2,49),At=Math.pow(2,56),Nt=Math.pow(2,63),xt={encode:bt,decode:_t,encodingLength:function(e){return e<Tt?1:e<It?2:e<Rt?3:e<St?4:e<Pt?5:e<Ot?6:e<Ct?7:e<At?8:e<Nt?9:10}};const Lt=(e,t,i=0)=>(xt.encode(e,t,i),t),Dt=e=>xt.encodingLength(e),Ut=(e,t)=>{const i=t.byteLength,s=Dt(e),r=s+Dt(i),o=new Uint8Array(r+i);return Lt(e,o,0),Lt(i,o,s),o.set(t,r),new kt(e,i,t,o)};class kt{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Mt=({name:e,code:t,encode:i})=>new zt(e,t,i);class zt{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ut(this.code,t):t.then((e=>Ut(this.code,e)))}throw Error("Unknown type, must be binary type")}}const jt=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Vt=Mt({name:"sha2-256",code:18,encode:jt("SHA-256")}),Kt=Mt({name:"sha2-512",code:19,encode:jt("SHA-512")});Object.freeze({__proto__:null,sha256:Vt,sha512:Kt});const $t=_e,Bt={code:0,name:"identity",encode:$t,digest:e=>Ut(0,$t(e))};Object.freeze({__proto__:null,identity:Bt});new TextEncoder,new TextDecoder;const Ft={...De,...ke,...ze,...Ve,...Be,...Qe,...it,...ot,...lt,...yt};function Gt(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Yt(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Gt(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function qt(e,t,i,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:s}}}const Ht=qt("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Wt=qt("ascii","a",(e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}),(e=>{const t=Yt((e=e.substring(1)).length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t})),Jt={utf8:Ht,"utf-8":Ht,hex:Ft.base16,latin1:Wt,ascii:Wt,binary:Wt,...Ft};function Xt(e,t="utf8"){const i=Jt[t];if(!i)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?i.decoder.decode(`${i.prefix}${e}`):Gt(globalThis.Buffer.from(e,"utf-8"))}var Zt=Object.defineProperty,Qt=(e,t,i)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ei=(e,t,i)=>Qt(e,"symbol"!=typeof t?t+"":t,i);class ti{constructor(e,t){this.core=e,this.logger=t,ei(this,"keychain",new Map),ei(this,"name",P),ei(this,"version",O),ei(this,"initialized",!1),ei(this,"storagePrefix",w),ei(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),ei(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),ei(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),ei(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),ei(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=(0,r.generateChildLogger)(t,this.name)}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,l.mapToObj)(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,l.objToMap)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.KeyChain=ti;var ii=Object.defineProperty,si=(e,t,i)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ri=(e,t,i)=>si(e,"symbol"!=typeof t?t+"":t,i);class oi{constructor(e,t,i){this.core=e,this.logger=t,ri(this,"name",I),ri(this,"keychain"),ri(this,"randomSessionIdentifier",(0,l.generateRandomBytes32)()),ri(this,"initialized",!1),ri(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),ri(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),ri(this,"getClientId",(async()=>{this.isInitialized();const e=await this.getClientSeed(),t=h.generateKeyPair(e);return h.encodeIss(t.publicKey)})),ri(this,"generateKeyPair",(()=>{this.isInitialized();const e=(0,l.generateKeyPair)();return this.setPrivateKey(e.publicKey,e.privateKey)})),ri(this,"signJWT",(async e=>{this.isInitialized();const t=await this.getClientSeed(),i=h.generateKeyPair(t),s=this.randomSessionIdentifier,r=S;return await h.signJWT(s,e,r,i)})),ri(this,"generateSharedKey",((e,t,i)=>{this.isInitialized();const s=this.getPrivateKey(e),r=(0,l.deriveSymKey)(s,t);return this.setSymKey(r,i)})),ri(this,"setSymKey",(async(e,t)=>{this.isInitialized();const i=t||(0,l.hashKey)(e);return await this.keychain.set(i,e),i})),ri(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),ri(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),ri(this,"encode",(async(e,t,i)=>{this.isInitialized();const s=(0,l.validateEncoding)(i),r=(0,a.safeJsonStringify)(t);if((0,l.isTypeTwoEnvelope)(s))return(0,l.encodeTypeTwoEnvelope)(r,i?.encoding);if((0,l.isTypeOneEnvelope)(s)){const t=s.senderPublicKey,i=s.receiverPublicKey;e=await this.generateSharedKey(t,i)}const o=this.getSymKey(e),{type:n,senderPublicKey:c}=s;return(0,l.encrypt)({type:n,symKey:o,message:r,senderPublicKey:c,encoding:i?.encoding})})),ri(this,"decode",(async(e,t,i)=>{this.isInitialized();const s=(0,l.validateDecoding)(t,i);if((0,l.isTypeTwoEnvelope)(s)){const e=(0,l.decodeTypeTwoEnvelope)(t,i?.encoding);return(0,a.safeJsonParse)(e)}if((0,l.isTypeOneEnvelope)(s)){const t=s.receiverPublicKey,i=s.senderPublicKey;e=await this.generateSharedKey(t,i)}try{const s=this.getSymKey(e),r=(0,l.decrypt)({symKey:s,encoded:t,encoding:i?.encoding});return(0,a.safeJsonParse)(r)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),ri(this,"getPayloadType",((e,t=l.BASE64)=>{const i=(0,l.deserialize)({encoded:e,encoding:t});return(0,l.decodeTypeByte)(i.type)})),ri(this,"getPayloadSenderPublicKey",((e,t=l.BASE64)=>{const i=(0,l.deserialize)({encoded:e,encoding:t});return i.senderPublicKey?(0,g.toString)(i.senderPublicKey,l.BASE16):void 0})),this.core=e,this.logger=(0,r.generateChildLogger)(t,this.name),this.keychain=i||new ti(this.core,this.logger)}get context(){return(0,r.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(R)}catch{e=(0,l.generateRandomBytes32)(),await this.keychain.set(R,e)}return Xt(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.Crypto=oi;var ni=Object.defineProperty,ai=Object.defineProperties,ci=Object.getOwnPropertyDescriptors,hi=Object.getOwnPropertySymbols,li=Object.prototype.hasOwnProperty,gi=Object.prototype.propertyIsEnumerable,pi=(e,t,i)=>t in e?ni(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,di=(e,t)=>{for(var i in t||(t={}))li.call(t,i)&&pi(e,i,t[i]);if(hi)for(var i of hi(t))gi.call(t,i)&&pi(e,i,t[i]);return e},ui=(e,t)=>ai(e,ci(t)),yi=(e,t,i)=>pi(e,"symbol"!=typeof t?t+"":t,i);class bi extends o.IMessageTracker{constructor(e,t){super(e,t),this.logger=e,this.core=t,yi(this,"messages",new Map),yi(this,"messagesWithoutClientAck",new Map),yi(this,"name",C),yi(this,"version",A),yi(this,"initialized",!1),yi(this,"storagePrefix",w),yi(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),yi(this,"set",(async(e,t,i)=>{this.isInitialized();const s=(0,l.hashMessage)(t);let r=this.messages.get(e);if(typeof r>"u"&&(r={}),typeof r[s]<"u")return s;if(r[s]=t,this.messages.set(e,r),i===B.inbound){const i=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,ui(di({},i),{[s]:t}))}return await this.persist(),s})),yi(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),yi(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const i of e){const e=this.messagesWithoutClientAck.get(i)||{};t[i]=Object.values(e)}return t})),yi(this,"has",((e,t)=>{this.isInitialized();return typeof this.get(e)[(0,l.hashMessage)(t)]<"u"})),yi(this,"ack",(async(e,t)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(e);if(typeof i>"u")return;delete i[(0,l.hashMessage)(t)],0===Object.keys(i).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,i),await this.persist()})),yi(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=(0,r.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,l.mapToObj)(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,(0,l.mapToObj)(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?(0,l.objToMap)(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?(0,l.objToMap)(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.MessageTracker=bi;var mi=Object.defineProperty,Ei=Object.defineProperties,fi=Object.getOwnPropertyDescriptors,_i=Object.getOwnPropertySymbols,wi=Object.prototype.hasOwnProperty,vi=Object.prototype.propertyIsEnumerable,Ti=(e,t,i)=>t in e?mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ii=(e,t)=>{for(var i in t||(t={}))wi.call(t,i)&&Ti(e,i,t[i]);if(_i)for(var i of _i(t))vi.call(t,i)&&Ti(e,i,t[i]);return e},Ri=(e,t)=>Ei(e,fi(t)),Si=(e,t,i)=>Ti(e,"symbol"!=typeof t?t+"":t,i);class Pi extends o.IPublisher{constructor(e,i){super(e,i),this.relayer=e,this.logger=i,Si(this,"events",new t.EventEmitter),Si(this,"name",x),Si(this,"queue",new Map),Si(this,"publishTimeout",(0,n.toMiliseconds)(n.ONE_MINUTE)),Si(this,"initialPublishTimeout",(0,n.toMiliseconds)(15*n.ONE_SECOND)),Si(this,"needsTransportRestart",!1),Si(this,"publish",(async(e,t,i)=>{var s;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:i}});const r=i?.ttl||N,o=(0,l.getRelayProtocolName)(i),n=i?.prompt||!1,a=i?.tag||0,c=i?.id||(0,d.getBigIntRpcId)().toString(),h={topic:e,message:t,opts:{ttl:r,relay:o,prompt:n,tag:a,id:c,attestation:i?.attestation,tvf:i?.tvf}},g=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const s=new Promise((async s=>{const o=({id:e})=>{h.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(M.publish,o),s(h))};this.relayer.events.on(M.publish,o);const g=(0,l.createExpiringPromise)(new Promise(((s,o)=>{this.rpcPublish({topic:e,message:t,ttl:r,prompt:n,tag:a,id:c,attestation:i?.attestation,tvf:i?.tvf}).then(s).catch((e=>{this.logger.warn(e,e?.message),o(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await g,this.events.removeListener(M.publish,o)}catch(e){this.queue.set(c,Ri(Ii({},h),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:i}}),await(0,l.createExpiringPromise)(s,this.publishTimeout,g)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(s=i?.internal)&&s.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),Si(this,"on",((e,t)=>{this.events.on(e,t)})),Si(this,"once",((e,t)=>{this.events.once(e,t)})),Si(this,"off",((e,t)=>{this.events.off(e,t)})),Si(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=(0,r.generateChildLogger)(i,this.name),this.registerEventListeners()}get context(){return(0,r.getLoggerContext)(this.logger)}async rpcPublish(e){var t,i,s,r;const{topic:o,message:n,ttl:a=N,prompt:c,tag:h,id:g,attestation:p,tvf:d}=e,u={method:(0,l.getRelayProtocolApi)((0,l.getRelayProtocolName)().protocol).publish,params:Ii({topic:o,message:n,ttl:a,prompt:c,tag:h,attestation:p},d),id:g};(0,l.isUndefined)(null==(t=u.params)?void 0:t.prompt)&&(null==(i=u.params)||delete i.prompt),(0,l.isUndefined)(null==(s=u.params)?void 0:s.tag)&&(null==(r=u.params)||delete r.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:u});const y=await this.relayer.request(u);return this.relayer.events.emit(M.publish,e),this.logger.debug("Successfully Published Payload"),y}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const i=e.attempt+1;this.queue.set(t,Ri(Ii({},e),{attempt:i}));const{topic:s,message:r,opts:o,attestation:n}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(Ri(Ii({},e),{topic:s,message:r,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:n,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(M.connection_stalled);this.checkQueue()})),this.relayer.on(M.message_ack,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var Oi=Object.defineProperty,Ci=(e,t,i)=>t in e?Oi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ai=(e,t,i)=>Ci(e,"symbol"!=typeof t?t+"":t,i);class Ni{constructor(){Ai(this,"map",new Map),Ai(this,"set",((e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])})),Ai(this,"get",(e=>this.map.get(e)||[])),Ai(this,"exists",((e,t)=>this.get(e).includes(t))),Ai(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter((e=>e!==t));s.length?this.map.set(e,s):this.map.delete(e)})),Ai(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var xi=Object.defineProperty,Li=Object.defineProperties,Di=Object.getOwnPropertyDescriptors,Ui=Object.getOwnPropertySymbols,ki=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable,zi=(e,t,i)=>t in e?xi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ji=(e,t)=>{for(var i in t||(t={}))ki.call(t,i)&&zi(e,i,t[i]);if(Ui)for(var i of Ui(t))Mi.call(t,i)&&zi(e,i,t[i]);return e},Vi=(e,t)=>Li(e,Di(t)),Ki=(e,t,i)=>zi(e,"symbol"!=typeof t?t+"":t,i);class $i extends o.ISubscriber{constructor(e,s){super(e,s),this.relayer=e,this.logger=s,Ki(this,"subscriptions",new Map),Ki(this,"topicMap",new Ni),Ki(this,"events",new t.EventEmitter),Ki(this,"name",H),Ki(this,"version",W),Ki(this,"pending",new Map),Ki(this,"cached",[]),Ki(this,"initialized",!1),Ki(this,"storagePrefix",w),Ki(this,"subscribeTimeout",(0,n.toMiliseconds)(n.ONE_MINUTE)),Ki(this,"initialSubscribeTimeout",(0,n.toMiliseconds)(15*n.ONE_SECOND)),Ki(this,"clientId"),Ki(this,"batchSubscribeTopicsLimit",500),Ki(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),Ki(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const i=(0,l.getRelayProtocolName)(t),s={topic:e,relay:i,transportType:t?.transportType};this.pending.set(e,s);const r=await this.rpcSubscribe(e,i,t);return"string"==typeof r&&(this.onSubscribe(r,s),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),r}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),Ki(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),Ki(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),Ki(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),Ki(this,"on",((e,t)=>{this.events.on(e,t)})),Ki(this,"once",((e,t)=>{this.events.once(e,t)})),Ki(this,"off",((e,t)=>{this.events.off(e,t)})),Ki(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),Ki(this,"start",(async()=>{await this.onConnect()})),Ki(this,"stop",(async()=>{await this.onDisconnect()})),Ki(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),Ki(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),Ki(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.events.on(q.created,(async e=>{const t=q.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(q.deleted,(async e=>{const t=q.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=(0,r.generateChildLogger)(s,this.name),this.clientId=""}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map((async i=>await this.unsubscribeById(e,i,t))))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=(0,l.getRelayProtocolName)(i);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const r=(0,l.getSdkError)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,r),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,i){var s;(!i||i?.transportType===$.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const r={method:(0,l.getRelayProtocolApi)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});const o=null==(s=i?.internal)?void 0:s.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(i?.transportType===$.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(r).catch((e=>this.logger.warn(e)))}),(0,n.toMiliseconds)(n.ONE_SECOND)),t;const s=new Promise((async t=>{const i=s=>{s.topic===e&&(this.events.removeListener(q.created,i),t(s.id))};this.events.on(q.created,i);try{const s=await(0,l.createExpiringPromise)(new Promise(((e,t)=>{this.relayer.request(r).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(q.created,i),t(s)}catch{}})),a=await(0,l.createExpiringPromise)(s,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!a&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return a?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(M.connection_stalled),o)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:(0,l.getRelayProtocolApi)(t.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await(0,l.createExpiringPromise)(new Promise((e=>{this.relayer.request(i).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(M.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:(0,l.getRelayProtocolApi)(t.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let s;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{s=await await(0,l.createExpiringPromise)(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e),t(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(M.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:(0,l.getRelayProtocolApi)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,Vi(ji({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,ji({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,ji({},t)),this.topicMap.set(t.topic,e),this.events.emit(q.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(q.deleted,Vi(ji({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(q.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(q.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=(0,l.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>Vi(ji({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await(0,l.sleep)((0,n.toMiliseconds)(n.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return(0,l.hashMessage)(e+await this.getClientId())}}_e2.Subscriber=$i;var Bi=Object.defineProperty,Fi=Object.getOwnPropertySymbols,Gi=Object.prototype.hasOwnProperty,Yi=Object.prototype.propertyIsEnumerable,qi=(e,t,i)=>t in e?Bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Hi=(e,t)=>{for(var i in t||(t={}))Gi.call(t,i)&&qi(e,i,t[i]);if(Fi)for(var i of Fi(t))Yi.call(t,i)&&qi(e,i,t[i]);return e},Wi=(e,t,i)=>qi(e,"symbol"!=typeof t?t+"":t,i);class Ji extends o.IRelayer{constructor(e){super(e),Wi(this,"protocol","wc"),Wi(this,"version",2),Wi(this,"core"),Wi(this,"logger"),Wi(this,"events",new t.EventEmitter),Wi(this,"provider"),Wi(this,"messages"),Wi(this,"subscriber"),Wi(this,"publisher"),Wi(this,"name",k),Wi(this,"transportExplicitlyClosed",!1),Wi(this,"initialized",!1),Wi(this,"connectionAttemptInProgress",!1),Wi(this,"relayUrl"),Wi(this,"projectId"),Wi(this,"packageName"),Wi(this,"bundleId"),Wi(this,"hasExperiencedNetworkDisruption",!1),Wi(this,"pingTimeout"),Wi(this,"heartBeatTimeout",(0,n.toMiliseconds)(n.THIRTY_SECONDS+n.FIVE_SECONDS)),Wi(this,"reconnectTimeout"),Wi(this,"connectPromise"),Wi(this,"reconnectInProgress",!1),Wi(this,"requestsInFlight",[]),Wi(this,"connectTimeout",(0,n.toMiliseconds)(15*n.ONE_SECOND)),Wi(this,"request",(async e=>{var t,i;this.logger.debug("Publishing Request Payload");const s=e.id||(0,d.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const r=`${s}:${(null==(i=e.params)?void 0:i.tag)||""}`;this.requestsInFlight.push(r);const o=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==r)),o}catch(e){throw this.logger.debug(`Failed to Publish Request: ${s}`),e}})),Wi(this,"resetPingTimeout",(()=>{(0,l.isNode)()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(s=null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.terminate)||s.call(i)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),Wi(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),Wi(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected \ud83d\udedc"),this.startPingTimeout(),this.events.emit(M.connect)})),Wi(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected \ud83d\uded1"),this.requestsInFlight=[],this.onProviderDisconnect()})),Wi(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(M.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),Wi(this,"registerProviderListeners",(()=>{this.provider.on(j.payload,this.onPayloadHandler),this.provider.on(j.connect,this.onConnectHandler),this.provider.on(j.disconnect,this.onDisconnectHandler),this.provider.on(j.error,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,r.generateChildLogger)(e.logger,this.name):(0,r.pino)((0,r.getDefaultLoggerOptions)({level:e.logger||D})),this.messages=new bi(this.logger,e.core),this.subscriber=new $i(this,this.logger),this.publisher=new Pi(this,this.logger),this.relayUrl=e?.relayUrl||U,this.projectId=e.projectId,(0,l.isAndroid)()?this.packageName=(0,l.getAppId)():(0,l.isIos)()&&(this.bundleId=(0,l.getAppId)()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch((e=>this.logger.warn(e,e?.message)))}get context(){return(0,r.getLoggerContext)(this.logger)}get connected(){var e,t,i;return 1===(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)||!1}get connecting(){var e,t,i;return 0===(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:$.relay},B.outbound)}async subscribe(e,t){var i,s,r;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const o=typeof(null==(i=t?.internal)?void 0:i.throwOnFailedPublish)>"u"||(null==(s=t?.internal)?void 0:s.throwOnFailedPublish);let n,a=(null==(r=this.subscriber.topicMap.get(e))?void 0:r[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(q.created,c),n())};return await Promise.all([new Promise((e=>{n=e,this.subscriber.on(q.created,c)})),new Promise((async(i,s)=>{a=await this.subscriber.subscribe(e,Hi({internal:{throwOnFailedPublish:o}},t)).catch((e=>{o&&s(e)}))||a,i()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await(0,l.createExpiringPromise)(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,i)=>{await this.connect(e).then(t).catch(i).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,l.isOnline)())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const e={topic:i,expiry:(0,l.calcExpiry)(n.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,e)}this.events.emit(M.message,e),await this.recordMessageEvent(e,B.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const i=()=>{t(new Error("Connection interrupted while trying to connect"))};this.provider.once(j.disconnect,i),await(0,l.createExpiringPromise)(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(j.disconnect,i),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,i)=>{const s=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(j.disconnect,s),await this.subscriber.start().then(e).catch(i).finally((()=>{this.provider.off(j.disconnect,s)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,n.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,i,s,r;if((0,l.isNode)())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(r=null==(s=null==(i=this.provider)?void 0:i.connection)?void 0:s.socket)||r.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new p.JsonRpcProvider(new u.default((0,l.formatRelayRpcUrl)({sdkVersion:K,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:i,message:s}=e;await this.messages.set(i,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||0===i.length)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.warn(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,d.isJsonRpcRequest)(e)){if(!e.method.endsWith(z))return;const t=e.params,{topic:i,message:s,publishedAt:r,attestation:o}=t.data,n={topic:i,message:s,publishedAt:r,transportType:$.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Hi({type:"event",event:t.id},n)),this.events.emit(t.id,n),await this.acknowledgePayload(e),await this.onMessageEvent(n)}else(0,d.isJsonRpcResponse)(e)&&this.events.emit(M.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,B.inbound),this.events.emit(M.message,e))}async acknowledgePayload(e){const t=(0,d.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(j.payload,this.onPayloadHandler),this.provider.off(j.connect,this.onConnectHandler),this.provider.off(j.disconnect,this.onDisconnectHandler),this.provider.off(j.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await(0,l.isOnline)();(0,l.subscribeToNetworkChange)((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})),this.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&(0,l.isAppVisible)())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(M.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,n.toMiliseconds)(V)))))}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise)return void await this.connectPromise;await this.connect()}}}function Xi(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}function Zi(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Qi(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}_e2.Relayer=Ji;const es="[object Arguments]",ts="[object Object]";function is(){}function ss(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function rs(e,t,i){return os(e,t,void 0,void 0,void 0,void 0,i)}function os(e,t,i,s,r,o,n){const a=n(e,t,i,s,r,o);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return ns(e,t,o,n)}return ns(e,t,o,n)}function ns(e,t,i,s){if(Object.is(e,t))return!0;let r=Qi(e),o=Qi(t);if(r===es&&(r=ts),o===es&&(o=ts),r!==o)return!1;switch(r){case"[object String]":return e.toString()===t.toString();case"[object Number]":return Xi(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const n=(i=i??new Map).get(e),a=i.get(t);if(null!=n&&null!=a)return n===t;i.set(e,t),i.set(t,e);try{switch(r){case"[object Map]":if(e.size!==t.size)return!1;for(const[r,o]of e.entries())if(!t.has(r)||!os(o,t.get(r),r,e,t,i,s))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const r=Array.from(e.values()),o=Array.from(t.values());for(let n=0;n<r.length;n++){const a=r[n],c=o.findIndex((r=>os(a,r,void 0,e,t,i,s)));if(-1===c)return!1;o.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Buffer<"u"&&Buffer.isBuffer(e)!==Buffer.isBuffer(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!os(e[r],t[r],r,e,t,i,s))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&ns(new Uint8Array(e),new Uint8Array(t),i,s);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&ns(new Uint8Array(e),new Uint8Array(t),i,s);case"[object Error]":return e.name===t.name&&e.message===t.message;case ts:{if(!(ns(e.constructor,t.constructor,i,s)||ss(e)&&ss(t)))return!1;const r=[...Object.keys(e),...Zi(e)],o=[...Object.keys(t),...Zi(t)];if(r.length!==o.length)return!1;for(let o=0;o<r.length;o++){const n=r[o],a=e[n];if(!Object.hasOwn(t,n))return!1;if(!os(a,t[n],n,e,t,i,s))return!1}return!0}default:return!1}}finally{i.delete(e),i.delete(t)}}function as(e,t){return rs(e,t,is)}var cs=Object.defineProperty,hs=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,gs=Object.prototype.propertyIsEnumerable,ps=(e,t,i)=>t in e?cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ds=(e,t)=>{for(var i in t||(t={}))ls.call(t,i)&&ps(e,i,t[i]);if(hs)for(var i of hs(t))gs.call(t,i)&&ps(e,i,t[i]);return e},us=(e,t,i)=>ps(e,"symbol"!=typeof t?t+"":t,i);class ys extends o.IStore{constructor(e,t,i,s=w,o=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,us(this,"map",new Map),us(this,"version",F),us(this,"cached",[]),us(this,"initialized",!1),us(this,"getKey"),us(this,"storagePrefix",w),us(this,"recentlyDeleted",[]),us(this,"recentlyDeletedLimit",200),us(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!(0,l.isUndefined)(e)?this.map.set(this.getKey(e),e):(0,l.isProposalStruct)(e)?this.map.set(e.id,e):(0,l.isSessionStruct)(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),us(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),us(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),us(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((i=>as(t[i],e[i]))))):this.values))),us(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const i=ds(ds({},this.getData(e)),t);this.map.set(e,i),await this.persist()})),us(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=(0,r.generateChildLogger)(t,this.name),this.storagePrefix=s,this.getKey=o}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=(0,l.getInternalError)("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=(0,l.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.Store=ys;var bs=Object.defineProperty,ms=(e,t,i)=>t in e?bs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Es=(e,t,i)=>ms(e,"symbol"!=typeof t?t+"":t,i);class fs{constructor(e,i){this.core=e,this.logger=i,Es(this,"name",J),Es(this,"version",X),Es(this,"events",new t.default),Es(this,"pairings"),Es(this,"initialized",!1),Es(this,"storagePrefix",w),Es(this,"ignoredPayloadTypes",[l.TYPE_1]),Es(this,"registeredMethods",[]),Es(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),Es(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),Es(this,"create",(async e=>{this.isInitialized();const t=(0,l.generateRandomBytes32)(),i=await this.core.crypto.setSymKey(t),s=(0,l.calcExpiry)(n.FIVE_MINUTES),r={protocol:L},o={topic:i,expiry:s,relay:r,active:!1,methods:e?.methods},a=(0,l.formatUri)({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:t,relay:r,expiryTimestamp:s,methods:e?.methods});return this.events.emit(Q.create,o),this.core.expirer.set(i,s),await this.pairings.set(i,o),await this.core.relayer.subscribe(i,{transportType:e?.transportType}),{topic:i,uri:a}})),Es(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[de.pairing_started]}});this.isValidPair(e,t);const{topic:i,symKey:s,relay:r,expiryTimestamp:o,methods:a}=(0,l.parseUri)(e.uri);let c;if(t.props.properties.topic=i,t.addTrace(de.pairing_uri_validation_success),t.addTrace(de.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(c=this.pairings.get(i),t.addTrace(de.existing_pairing),c.active)throw t.setError(ue.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);t.addTrace(de.pairing_not_expired)}const h=o||(0,l.calcExpiry)(n.FIVE_MINUTES),g={topic:i,relay:r,expiry:h,active:!1,methods:a};this.core.expirer.set(i,h),await this.pairings.set(i,g),t.addTrace(de.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(Q.create,g),t.addTrace(de.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(s,i),t.addTrace(de.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError(ue.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:r})}catch(e){throw t.setError(ue.subscribe_pairing_topic_failure),e}return t.addTrace(de.subscribe_pairing_topic_success),g})),Es(this,"activate",(async({topic:e})=>{this.isInitialized();const t=(0,l.calcExpiry)(n.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),Es(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:i,resolve:s,reject:r}=(0,l.createDelayedPromise)();this.events.once((0,l.engineEvent)("pairing_ping",e),(({error:e})=>{e?r(e):s()})),await i()}})),Es(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),Es(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),Es(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),Es(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",(0,l.getSdkError)("USER_DISCONNECTED")),await this.deletePairing(t))})),Es(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:i,expiry:s,methods:r}=e,o=this.core.crypto.keychain.get(t);return(0,l.formatUri)({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:o,relay:i,expiryTimestamp:s,methods:r})})),Es(this,"sendRequest",(async(e,t,i)=>{const s=(0,d.formatJsonRpcRequest)(t,i),r=await this.core.crypto.encode(e,s),o=Z[t].req;return this.core.history.set(e,s),this.core.relayer.publish(e,r,o),s.id})),Es(this,"sendResult",(async(e,t,i)=>{const s=(0,d.formatJsonRpcResult)(e,i),r=await this.core.crypto.encode(t,s),o=(await this.core.history.get(t,e)).request.method,n=Z[o].res;await this.core.relayer.publish(t,r,n),await this.core.history.resolve(s)})),Es(this,"sendError",(async(e,t,i)=>{const s=(0,d.formatJsonRpcError)(e,i),r=await this.core.crypto.encode(t,s),o=(await this.core.history.get(t,e)).request.method,n=Z[o]?Z[o].res:Z.unregistered_method.res;await this.core.relayer.publish(t,r,n),await this.core.history.resolve(s)})),Es(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,(0,l.getSdkError)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),Es(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>(0,l.isExpired)(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),Es(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:i}=e;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,i);default:return await this.onUnknownRpcMethodRequest(t,i)}})),Es(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:i}=e,s=(await this.core.history.get(t,i.id)).request.method;return"wc_pairingPing"===s?this.onPairingPingResponse(t,i):this.onUnknownRpcMethodResponse(s)})),Es(this,"onPairingPingRequest",(async(e,t)=>{const{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult(i,e,!0),this.events.emit(Q.ping,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}})),Es(this,"onPairingPingResponse",((e,t)=>{const{id:i}=t;setTimeout((()=>{(0,d.isJsonRpcResult)(t)?this.events.emit((0,l.engineEvent)("pairing_ping",i),{}):(0,d.isJsonRpcError)(t)&&this.events.emit((0,l.engineEvent)("pairing_ping",i),{error:t.error})}),500)})),Es(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:i}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(Q.delete,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}})),Es(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:i,method:s}=t;try{if(this.registeredMethods.includes(s))return;const t=(0,l.getSdkError)("WC_METHOD_UNSUPPORTED",s);await this.sendError(i,e,t),this.logger.error(t)}catch(t){await this.sendError(i,e,t),this.logger.error(t)}})),Es(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error((0,l.getSdkError)("WC_METHOD_UNSUPPORTED",e))})),Es(this,"isValidPair",((e,t)=>{var i;if(!(0,l.isValidParams)(e)){const{message:i}=(0,l.getInternalError)("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(ue.malformed_pairing_uri),new Error(i)}if(!(0,l.isValidUrl)(e.uri)){const{message:i}=(0,l.getInternalError)("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(ue.malformed_pairing_uri),new Error(i)}const s=(0,l.parseUri)(e?.uri);if(null==(i=s?.relay)||!i.protocol){const{message:e}=(0,l.getInternalError)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(ue.malformed_pairing_uri),new Error(e)}if(null==s||!s.symKey){const{message:e}=(0,l.getInternalError)("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(ue.malformed_pairing_uri),new Error(e)}if(null!=s&&s.expiryTimestamp&&(0,n.toMiliseconds)(s?.expiryTimestamp)<Date.now()){t.setError(ue.pairing_expired);const{message:e}=(0,l.getInternalError)("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),Es(this,"isValidPing",(async e=>{if(!(0,l.isValidParams)(e)){const{message:t}=(0,l.getInternalError)("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Es(this,"isValidDisconnect",(async e=>{if(!(0,l.isValidParams)(e)){const{message:t}=(0,l.getInternalError)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Es(this,"isValidPairingTopic",(async e=>{if(!(0,l.isValidString)(e,!1)){const{message:t}=(0,l.getInternalError)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if((0,l.isExpired)(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=(0,l.getInternalError)("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=(0,r.generateChildLogger)(i,this.name),this.pairings=new ys(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,r.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(M.message,(async e=>{const{topic:t,message:i,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==$.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))try{const e=await this.core.crypto.decode(t,i);(0,d.isJsonRpcRequest)(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):(0,d.isJsonRpcResponse)(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,i)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(re.expired,(async e=>{const{topic:t}=(0,l.parseExpirerTarget)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Q.expire,{topic:t}))}))}}_e2.Pairing=fs;var _s=Object.defineProperty,ws=(e,t,i)=>t in e?_s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,vs=(e,t,i)=>ws(e,"symbol"!=typeof t?t+"":t,i);class Ts extends o.IJsonRpcHistory{constructor(e,i){super(e,i),this.core=e,this.logger=i,vs(this,"records",new Map),vs(this,"events",new t.EventEmitter),vs(this,"name",te),vs(this,"version",ie),vs(this,"cached",[]),vs(this,"initialized",!1),vs(this,"storagePrefix",w),vs(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),vs(this,"set",((e,t,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:i}),this.records.has(t.id))return;const s={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:i,expiry:(0,l.calcExpiry)(n.THIRTY_DAYS)};this.records.set(s.id,s),this.persist(),this.events.emit(ee.created,s)})),vs(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,d.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(ee.updated,t))})),vs(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),vs(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((i=>{if(i.topic===e){if(typeof t<"u"&&i.id!==t)return;this.records.delete(i.id),this.events.emit(ee.deleted,i)}})),this.persist()})),vs(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),vs(this,"on",((e,t)=>{this.events.on(e,t)})),vs(this,"once",((e,t)=>{this.events.once(e,t)})),vs(this,"off",((e,t)=>{this.events.off(e,t)})),vs(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,r.generateChildLogger)(i,this.name)}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:(0,d.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ee.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=(0,l.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ee.created,(e=>{const t=ee.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(ee.updated,(e=>{const t=ee.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(ee.deleted,(e=>{const t=ee.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,n.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(ee.deleted,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.JsonRpcHistory=Ts;var Is=Object.defineProperty,Rs=(e,t,i)=>t in e?Is(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ss=(e,t,i)=>Rs(e,"symbol"!=typeof t?t+"":t,i);class Ps extends o.IExpirer{constructor(e,i){super(e,i),this.core=e,this.logger=i,Ss(this,"expirations",new Map),Ss(this,"events",new t.EventEmitter),Ss(this,"name",se),Ss(this,"version",oe),Ss(this,"cached",[]),Ss(this,"initialized",!1),Ss(this,"storagePrefix",w),Ss(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Ss(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),Ss(this,"set",((e,t)=>{this.isInitialized();const i=this.formatTarget(e),s={target:i,expiry:t};this.expirations.set(i,s),this.checkExpiry(i,s),this.events.emit(re.created,{target:i,expiration:s})})),Ss(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),Ss(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),i=this.getExpiration(t);this.expirations.delete(t),this.events.emit(re.deleted,{target:t,expiration:i})}})),Ss(this,"on",((e,t)=>{this.events.on(e,t)})),Ss(this,"once",((e,t)=>{this.events.once(e,t)})),Ss(this,"off",((e,t)=>{this.events.off(e,t)})),Ss(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,r.generateChildLogger)(i,this.name)}get context(){return(0,r.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,l.formatTopicTarget)(e);if("number"==typeof e)return(0,l.formatIdTarget)(e);const{message:t}=(0,l.getInternalError)("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(re.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=(0,l.getInternalError)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=(0,l.getInternalError)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:i}=t;(0,n.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(re.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(re.created,(e=>{const t=re.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(re.expired,(e=>{const t=re.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(re.deleted,(e=>{const t=re.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=(0,l.getInternalError)("NOT_INITIALIZED",this.name);throw new Error(e)}}}_e2.Expirer=Ps;var Os=Object.defineProperty,Cs=(e,t,i)=>t in e?Os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,As=(e,t,i)=>Cs(e,"symbol"!=typeof t?t+"":t,i);class Ns extends o.IVerify{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,As(this,"name",ne),As(this,"abortController"),As(this,"isDevEnv"),As(this,"verifyUrlV3",he),As(this,"storagePrefix",w),As(this,"version",f),As(this,"publicKey"),As(this,"fetchPromise"),As(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,n.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),As(this,"register",(async e=>{if(!(0,l.isBrowser)()||this.isDevEnv)return;const t=window.location.origin,{id:i,decryptedId:s}=e,r=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${i}&decryptedId=${s}`;try{const e=(0,y.getDocument)(),t=this.startAbortTimer(5*n.ONE_SECOND),s=await new Promise(((s,o)=>{const n=()=>{window.removeEventListener("message",h),e.body.removeChild(a),o("attestation aborted")};this.abortController.signal.addEventListener("abort",n);const a=e.createElement("iframe");a.src=r,a.style.display="none",a.addEventListener("error",n,{signal:this.abortController.signal});const h=r=>{if(r.data&&"string"==typeof r.data)try{const o=JSON.parse(r.data);if("verify_attestation"===o.type){if((0,c.decodeJWT)(o.attestation).payload.id!==i)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",n),window.removeEventListener("message",h),s(null===o.attestation?"":o.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",h,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",s),s}catch(e){this.logger.warn(e)}return""})),As(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:i,encryptedId:s}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if((0,c.decodeJWT)(t).payload.id!==s)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!i)return;const r=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(i,r)})),As(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const i=this.startAbortTimer(5*n.ONE_SECOND),s=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(i),200===s.status?await s.json():void 0})),As(this,"getVerifyUrl",(e=>{let t=e||ce;return le.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${ce}`),t=ce),t})),As(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(n.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),As(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),As(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),As(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const i=await this.fetchAndPersistPublicKey();try{if(i)return this.validateAttestation(e,i)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),As(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),As(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),As(this,"validateAttestation",((e,t)=>{const i=(0,l.verifyP256Jwt)(e,t.publicKey),s={hasExpired:(0,n.toMiliseconds)(i.exp)<Date.now(),payload:i};if(s.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:s.payload.origin,isScam:s.payload.isScam,isVerified:s.payload.isVerified}})),this.logger=(0,r.generateChildLogger)(t,this.name),this.abortController=new AbortController,this.isDevEnv=(0,l.isTestRun)(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,r.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,n.toMiliseconds)(e))}}_e2.Verify=Ns;var xs=Object.defineProperty,Ls=(e,t,i)=>t in e?xs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ds=(e,t,i)=>Ls(e,"symbol"!=typeof t?t+"":t,i);class Us extends o.IEchoClient{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Ds(this,"context",ge),Ds(this,"registerDeviceToken",(async e=>{const{clientId:t,token:i,notificationType:s,enableEncrypted:r=!1}=e,o=`${pe}/${this.projectId}/clients`;await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:s,token:i,always_raw:r})})})),this.logger=(0,r.generateChildLogger)(t,this.context)}}_e2.EchoClient=Us;var ks=Object.defineProperty,Ms=Object.getOwnPropertySymbols,zs=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Vs=(e,t,i)=>t in e?ks(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ks=(e,t)=>{for(var i in t||(t={}))zs.call(t,i)&&Vs(e,i,t[i]);if(Ms)for(var i of Ms(t))js.call(t,i)&&Vs(e,i,t[i]);return e},$s=(e,t,i)=>Vs(e,"symbol"!=typeof t?t+"":t,i);class Bs extends o.IEventClient{constructor(e,t,s=!0){super(e,t,s),this.core=e,this.logger=t,$s(this,"context",be),$s(this,"storagePrefix",w),$s(this,"storageVersion",ye),$s(this,"events",new Map),$s(this,"shouldPersist",!1),$s(this,"init",(async()=>{if(!(0,l.isTestRun)())try{const e={eventId:(0,l.uuidv4)(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:(0,l.formatUA)(this.core.relayer.protocol,this.core.relayer.version,K)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),$s(this,"createEvent",(e=>{const{event:t="ERROR",type:i="",properties:{topic:s,trace:r}}=e,o=(0,l.uuidv4)(),n=this.core.projectId||"",a=Date.now(),c=Ks({eventId:o,timestamp:a,props:{event:t,type:i,properties:{topic:s,trace:r}},bundleId:n,domain:this.getAppDomain()},this.setMethods(o));return this.telemetryEnabled&&(this.events.set(o,c),this.shouldPersist=!0),c})),$s(this,"getEvent",(e=>{const{eventId:t,topic:i}=e;if(t)return this.events.get(t);const s=Array.from(this.events.values()).find((e=>e.props.properties.topic===i));return s?Ks(Ks({},s),this.setMethods(s.eventId)):void 0})),$s(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),$s(this,"setEventListeners",(()=>{this.core.heartbeat.on(i.HEARTBEAT_EVENTS.pulse,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,n.fromMiliseconds)(Date.now())-(0,n.fromMiliseconds)(e.timestamp)>me&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),$s(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),$s(this,"addTrace",((e,t)=>{const i=this.events.get(e);i&&(i.props.properties.trace.push(t),this.events.set(e,i),this.shouldPersist=!0)})),$s(this,"setError",((e,t)=>{const i=this.events.get(e);i&&(i.props.type=t,i.timestamp=Date.now(),this.events.set(e,i),this.shouldPersist=!0)})),$s(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),$s(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,Ks(Ks({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),$s(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,i]of this.events)i.props.type&&e.push(i);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),$s(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Ee}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${K}${t}`,{method:"POST",body:JSON.stringify(e)})})),$s(this,"getAppDomain",(()=>(0,l.getAppMetadata)().url)),this.logger=(0,r.generateChildLogger)(t,this.context),this.telemetryEnabled=s,s?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}_e2.EventClient=Bs;var Fs=Object.defineProperty,Gs=Object.getOwnPropertySymbols,Ys=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Hs=(e,t,i)=>t in e?Fs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Ws=(e,t)=>{for(var i in t||(t={}))Ys.call(t,i)&&Hs(e,i,t[i]);if(Gs)for(var i of Gs(t))qs.call(t,i)&&Hs(e,i,t[i]);return e},Js=(e,t,i)=>Hs(e,"symbol"!=typeof t?t+"":t,i);class Xs extends o.ICore{constructor(e){var o;super(e),Js(this,"protocol",E),Js(this,"version",f),Js(this,"name",_),Js(this,"relayUrl"),Js(this,"projectId"),Js(this,"customStoragePrefix"),Js(this,"events",new t.EventEmitter),Js(this,"logger"),Js(this,"heartbeat"),Js(this,"relayer"),Js(this,"crypto"),Js(this,"storage"),Js(this,"history"),Js(this,"expirer"),Js(this,"pairing"),Js(this,"verify"),Js(this,"echoClient"),Js(this,"linkModeSupportedApps"),Js(this,"eventClient"),Js(this,"initialized",!1),Js(this,"logChunkController"),Js(this,"on",((e,t)=>this.events.on(e,t))),Js(this,"once",((e,t)=>this.events.once(e,t))),Js(this,"off",((e,t)=>this.events.off(e,t))),Js(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),Js(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:i})=>{if(!e||!t)return;const s={topic:e,message:t,publishedAt:Date.now(),transportType:$.link_mode};this.relayer.onLinkMessageEvent(s,{sessionExists:i})}));const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||U,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const a=(0,r.getDefaultLoggerOptions)({level:"string"==typeof e?.logger&&e.logger?e.logger:v.logger,name:_}),{logger:c,chunkLoggerController:h}=(0,r.generatePlatformLogger)({opts:a,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=h,null!=(o=this.logChunkController)&&o.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,r.generateChildLogger)(c,this.name),this.heartbeat=new i.HeartBeat,this.crypto=new oi(this,this.logger,e?.keychain),this.history=new Ts(this,this.logger),this.expirer=new Ps(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new s.default(Ws(Ws({},T),e?.storageOptions)),this.relayer=new Ji({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new fs(this,this.logger),this.verify=new Ns(this,this.logger,this.storage),this.echoClient=new Us(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Bs(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new Xs(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(G,i),t}get context(){return(0,r.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Y,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Y)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,i=`${t}_count`;return globalThis[i]=(globalThis[i]||0)+1,globalThis[i]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[i]} times.`),globalThis[t]}catch(e){return void console.warn("Failed to get global WalletConnect core",e)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const i=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[i]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}_e2.default=Xs;_e2.Core=Xs}),8179,[7,4181,4182,7724,4197,8180,4183,4200,4202,8181,8445,4609,4610,4624,4205]);
__d((function(_g,_r,_i,_a,_m,_e,_d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.IVerify=_e.ISubscriberTopicMap=_e.ISubscriber=_e.IStore=_e.ISignClientEvents=_e.ISignClient=_e.IRelayer=_e.IPublisher=_e.IPairing=_e.IMessageTracker=_e.IKeyChain=_e.IJsonRpcHistory=_e.IExpirer=_e.IEventClient=_e.IEngineEvents=_e.IEngine=_e.IEchoClient=_e.ICrypto=_e.ICore=void 0;var e=_r(_d[0]),t=(function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,s=new WeakMap;return(function(e,t){if(!t&&e&&e.__esModule)return e;var o,n,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(o=t?s:r){if(o.has(e))return o.get(e);o.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((n=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(n.get||n.set)?o(i,t,n):i[t]=e[t]);return i})(e,t)})(_r(_d[1]));var r=Object.defineProperty,s=(e,t,s)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,o=(e,t,r)=>s(e,"symbol"!=typeof t?t+"":t,r);class n extends e.IEvents{constructor(e){super(),this.opts=e,o(this,"protocol","wc"),o(this,"version",2)}}_e.ICore=n;_e.ICrypto=class{constructor(e,t,r){this.core=e,this.logger=t}};var i=Object.defineProperty,c=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t,r)=>c(e,"symbol"!=typeof t?t+"":t,r);class a extends e.IEvents{constructor(e,t){super(),this.core=e,this.logger=t,l(this,"records",new Map)}}_e.IJsonRpcHistory=a;_e.IMessageTracker=class{constructor(e,t){this.logger=e,this.core=t}};class u extends e.IEvents{constructor(e,t){super(),this.relayer=e,this.logger=t}}_e.IPublisher=u;class p extends e.IEvents{constructor(e){super()}}_e.IRelayer=p;_e.IStore=class{constructor(e,t,r,s){this.core=e,this.logger=t,this.name=r}};var I=Object.defineProperty,h=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;_e.ISubscriberTopicMap=class{constructor(){var e,t,r;e=this,t="map",r=new Map,h(e,"symbol"!=typeof t?t+"":t,r)}};class g extends e.IEvents{constructor(e,t){super(),this.relayer=e,this.logger=t}}_e.ISubscriber=g;_e.IKeyChain=class{constructor(e,t){this.core=e,this.logger=t}};class b extends e.IEvents{constructor(e,t){super(),this.core=e,this.logger=t}}_e.IExpirer=b;_e.IPairing=class{constructor(e,t){this.logger=e,this.core=t}};_e.IVerify=class{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}};_e.IEchoClient=class{constructor(e,t){this.projectId=e,this.logger=t}};_e.IEventClient=class{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}};var f=Object.defineProperty,y=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t,r)=>y(e,"symbol"!=typeof t?t+"":t,r);class d extends t.default{constructor(){super()}}_e.ISignClientEvents=d;_e.ISignClient=class{constructor(e){this.opts=e,v(this,"protocol","wc"),v(this,"version",2)}};class E extends t.EventEmitter{constructor(){super()}}_e.IEngineEvents=E;_e.IEngine=class{constructor(e){this.client=e}}}),8180,[4194,4181]);
__d((function(_g,_r2,_i2,_a2,_m,_e2,_d){var t=_r2(_d[0]);Object.defineProperty(_e2,"__esModule",{value:!0}),_e2.UTF8=_e2.TYPE_2=_e2.TYPE_1=_e2.TYPE_0=_e2.SLASH=_e2.SDK_TYPE=_e2.SDK_ERRORS=_e2.RELAYER_DEFAULT_PROTOCOL=_e2.REACT_NATIVE_PRODUCT=_e2.ONE_THOUSAND=_e2.MemoryStore=_e2.LimitedSet=_e2.INTERNAL_ERRORS=_e2.ENV_MAP=_e2.EMPTY_SPACE=_e2.DEFAULT_DEPTH=_e2.COLON=_e2.BASE64URL=_e2.BASE64=_e2.BASE16=_e2.BASE10=void 0,_e2.addResourceToRecap=kn,_e2.addSignatureToExtrinsic=Gs,_e2.appendToQueryString=M,_e2.assertType=function(t,e,n){if(!t[e]||typeof t[e]!==n)throw new Error(`Missing or invalid "${e}" param`)},_e2.assignAbilityToActions=jn,_e2.base64Decode=Pn,_e2.base64Encode=Tn,_e2.buildApprovedNamespaces=function(t){const{proposal:{requiredNamespaces:e,optionalNamespaces:n={}},supportedNamespaces:r}=t,o=ps(e),i=ps(n),s={};Object.keys(r).forEach((t=>{const e=r[t].chains,n=r[t].methods,o=r[t].events,i=r[t].accounts;e.forEach((e=>{if(!i.some((t=>t.includes(e))))throw new Error(`No accounts provided for chain ${e} in namespace ${t}`)})),s[t]={chains:e,methods:n,events:o,accounts:i}}));const f=js(e,s,"approve()");if(f)throw new Error(f.message);const c={};return Object.keys(e).length||Object.keys(n).length?(Object.keys(o).forEach((t=>{const e=r[t].chains.filter((e=>{var n,r;return null==(r=null==(n=o[t])?void 0:n.chains)?void 0:r.includes(e)})),n=r[t].methods.filter((e=>{var n,r;return null==(r=null==(n=o[t])?void 0:n.methods)?void 0:r.includes(e)})),i=r[t].events.filter((e=>{var n,r;return null==(r=null==(n=o[t])?void 0:n.events)?void 0:r.includes(e)})),s=e.map((e=>r[t].accounts.filter((t=>t.includes(`${e}:`))))).flat();c[t]={chains:e,methods:n,events:i,accounts:s}})),Object.keys(i).forEach((t=>{var e,n,o,s,f,a;if(!r[t])return;const u=null==(n=null==(e=i[t])?void 0:e.chains)?void 0:n.filter((e=>r[t].chains.includes(e))),l=r[t].methods.filter((e=>{var n,r;return null==(r=null==(n=i[t])?void 0:n.methods)?void 0:r.includes(e)})),h=r[t].events.filter((e=>{var n,r;return null==(r=null==(n=i[t])?void 0:n.events)?void 0:r.includes(e)})),d=u?.map((e=>r[t].accounts.filter((t=>t.includes(`${e}:`))))).flat();c[t]={chains:Q(null==(o=c[t])?void 0:o.chains,u),methods:Q(null==(s=c[t])?void 0:s.methods,l),events:Q(null==(f=c[t])?void 0:f.events,h),accounts:Q(null==(a=c[t])?void 0:a.accounts,d)}})),c):s},_e2.buildAuthObject=function(t,e,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:t.domain,aud:t.aud,version:t.version,nonce:t.nonce,iat:t.iat,statement:t.statement,requestId:t.requestId,resources:t.resources,nbf:t.nbf,exp:t.exp},s:e}},_e2.buildNamespacesFromAuth=function(t,e){const n=gs(e=e.map((t=>t.replace("did:pkh:",""))));for(const[e,r]of Object.entries(n))r.methods?r.methods=Q(r.methods,t):r.methods=t,r.events=["chainChanged","accountsChanged"];return n},_e2.buildRecapStatement=Hn,_e2.buildSignedExtrinsicHash=function(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Gs({publicKey:zs(t.transaction.address),signature:e,payload:t.transaction});return Zs(Buffer.from(n).toString("hex"))},_e2.calcExpiry=function(t,e){return(0,n.fromMiliseconds)((e||Date.now())+(0,n.toMiliseconds)(t))},_e2.capitalize=function(t){return t.split(k).map((t=>J(t))).join(k)},_e2.capitalizeWord=J,_e2.createDelayedPromise=function(t=n.FIVE_MINUTES,e){const r=(0,n.toMiliseconds)(t||n.FIVE_MINUTES);let o,i,s,f;return{resolve:t=>{s&&o&&(clearTimeout(s),o(t),f=Promise.resolve(t))},reject:t=>{s&&i&&(clearTimeout(s),i(t))},done:()=>new Promise(((t,n)=>{if(f)return t(f);s=setTimeout((()=>{const t=new Error(e);f=Promise.reject(t),n(t)}),r),o=t,i=n}))}},_e2.createEncodedRecap=function(t,e,n){return Dn(Ln(t,e,n))},_e2.createExpiringPromise=function(t,e,n){return new Promise((async(r,o)=>{const i=setTimeout((()=>o(new Error(n))),e);try{r(await t)}catch(t){o(t)}clearTimeout(i)}))},_e2.createRecap=Ln,_e2.decodeRecap=_n,_e2.decodeTypeByte=Hi,_e2.decodeTypeTwoEnvelope=function(t,e){const{sealed:n}=zi({encoded:t,encoding:e});return(0,u.toString)(n,Ci)},_e2.decrypt=function(t){const e=(0,u.fromString)(t.symKey,Ri),{sealed:n,iv:r}=zi({encoded:t.encoded,encoding:t.encoding}),o=Sr(e,r).decrypt(n);if(null===o)throw new Error("Failed to decrypt");return(0,u.toString)(o,Ci)},_e2.deriveExtrinsicHash=Zs,_e2.deriveSymKey=function(t,e){const n=ni.getSharedSecret((0,u.fromString)(t,Ri),(0,u.fromString)(e,Ri)),r=Lr(kr,n,void 0,void 0,Fi);return(0,u.toString)(r,Ri)},_e2.deserialize=zi,_e2.encodeRecap=Dn,_e2.encodeTypeByte=Vi,_e2.encodeTypeTwoEnvelope=function(t,e){const n=Vi(ji),r=fe($i),o=(0,u.fromString)(t,Ci),i=Ki({type:n,sealed:o,iv:r});return e===Pi?Mi(i):i},_e2.encrypt=function(t){const e=Vi(typeof t.type<"u"?t.type:Li);if(Hi(e)===ki&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?(0,u.fromString)(t.senderPublicKey,Ri):void 0,r=typeof t.iv<"u"?(0,u.fromString)(t.iv,Ri):fe($i),o=(0,u.fromString)(t.symKey,Ri),i=Sr(o,r).encrypt((0,u.fromString)(t.message,Ci)),s=Ki({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Pi?Mi(s):s},_e2.engineEvent=function(t,e){return`${t}${e?`:${e}`:""}`},_e2.enumify=void 0,_e2.extractSolanaTransactionId=function(t){const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);const r=n[0];if(0===r)throw new Error("No signatures found");const o=1+64*r;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return s.default.encode(i)},_e2.formatAccountId=m,_e2.formatAccountWithChain=function(t,e){const{namespace:n,reference:r}=p(e);return m({namespace:n,reference:r,address:t})},_e2.formatChainId=g,_e2.formatDeeplinkUrl=tt,_e2.formatExpirerTarget=X,_e2.formatIdTarget=function(t){return X("id",t)},_e2.formatMessage=void 0,_e2.formatMessageContext=function(t){return Z(t).join(k)},_e2.formatRelayParams=Xi,_e2.formatRelayRpcUrl=function({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:o,projectId:i,useOnCloseEvent:s,bundleId:f,packageName:c}){const a=n.split("?"),u=G(t,e,r),l={auth:o,ua:u,projectId:i,useOnCloseEvent:s||void 0,packageName:c||void 0,bundleId:f||void 0},h=M(a[1]||"",l);return a[0]+"?"+h},_e2.formatStatementFromRecap=Vn,_e2.formatTopicTarget=function(t){return X("topic",t)},_e2.formatUA=G,_e2.formatUri=function(t){const e=new URLSearchParams,n=Xi(t.relay);Object.keys(n).sort().forEach((t=>{e.set(t,n[t])})),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`},_e2.fromBase64=st,_e2.generateKeyPair=function(){const t=ni.utils.randomPrivateKey(),e=ni.getPublicKey(t);return{privateKey:(0,u.toString)(t,Ri),publicKey:(0,u.toString)(e,Ri)}},_e2.generateRandomBytes32=function(){const t=fe(Fi);return(0,u.toString)(t,Ri)},_e2.getAccountsChains=cs,_e2.getAccountsFromNamespaces=function(t,e=[]){const n=[];return Object.keys(t).forEach((r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...o.accounts)})),n},_e2.getAddressFromAccount=w,_e2.getAddressesFromAccounts=function(t){return b(t,w)},_e2.getAlgorandTransactionId=function(t){const e=Buffer.from(t,"base64"),n=(0,f.decode)(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=(0,f.encode)(n),o=Buffer.from("TX"),i=Buffer.concat([o,Buffer.from(r)]),s=Ye(i);return c.base32.encode(s).replace(/=+$/,"")},_e2.getAppId=function(){var t;try{return F()&&typeof _g<"u"&&typeof(null==_g?void 0:_g.Application)<"u"?null==(t=_g.Application)?void 0:t.applicationId:void 0}catch{return}},_e2.getAppMetadata=q,_e2.getBrowserOnlineStatus=Fs,_e2.getChainFromAccount=E,_e2.getChainsFromAccounts=v,_e2.getChainsFromNamespace=x,_e2.getChainsFromNamespaces=function(t,e=[]){const n=[];return Object.keys(t).forEach((r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...v(o.accounts))})),n},_e2.getChainsFromRecap=function(t){const e=_n(t);Cn(e);const n=[];return Object.values(e.att).forEach((t=>{Object.values(t).forEach((t=>{var e;null!=(e=t?.[0])&&e.chains&&n.push(t[0].chains)}))})),[...new Set(n.flat())]},_e2.getChainsFromRequiredNamespaces=function(t,e=[]){const n=[];return Object.keys(t).forEach((r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...x(r,o))})),n},_e2.getCommonValuesInArrays=nt,_e2.getCryptoKeyFromKeyData=Zi,_e2.getDecodedRecapFromResources=Nn,_e2.getDeepLink=async function(t,e){let n="";try{if(V()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(t){console.error(t)}return n},_e2.getDidChainId=_e2.getDidAddressSegments=_e2.getDidAddress=void 0,_e2.getEnvironment=H,_e2.getHttpUrl=function(t){let e=(t.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof e<"u"?t.split("://")[1]:t;return e="wss"===e?"https":"http",[e,n].join("://")},_e2.getInternalError=bs,_e2.getJavascriptID=z,_e2.getJavascriptOS=K,_e2.getLastItems=Y,_e2.getLinkModeURL=function(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`},_e2.getMethodsFromRecap=function(t){var e;const n=_n(t);Cn(n);const r=null==(e=n.att)?void 0:e.eip155;return r?Object.keys(r).map((t=>t.split("/")[1])):[]},_e2.getNamespacedDidChainId=void 0,_e2.getNamespacesChains=as,_e2.getNamespacesEventsForChainId=ls,_e2.getNamespacesFromAccounts=gs,_e2.getNamespacesMethodsForChainId=us,_e2.getNearTransactionIdFromSignedTransaction=function(t){const e=new Uint8Array(Ge(hn(t)));return s.default.encode(e)},_e2.getNearUint8ArrayFromBytes=hn,_e2.getNodeOnlineStatus=Hs,_e2.getReCapActions=Rn,_e2.getReactNativeOnlineStatus=Vs,_e2.getRecapAbilitiesFromResource=function(t){return t?.map((t=>Object.keys(t)))||[]},_e2.getRecapFromResources=Mn,_e2.getRecapResource=Un,_e2.getRelayClientMetadata=function(t,e){var n;const o=H(),i={protocol:t,version:e,env:o};return"browser"===o&&(i.host=(null==(n=(0,r.getLocation)())?void 0:n.host)||"unknown"),i},_e2.getRelayProtocolApi=function(t){const e=l.RELAY_JSONRPC[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e},_e2.getRelayProtocolName=function(t){return t?.relay||{protocol:Wi}},_e2.getRequiredNamespacesFromNamespaces=function(t,e){const n=Ls(t,e);if(n)throw new Error(n.message);const r={};for(const[e,n]of Object.entries(t))r[e]={methods:n.methods,events:n.events,chains:n.accounts.map((t=>`${t.split(":")[0]}:${t.split(":")[1]}`))};return r},_e2.getSdkError=ws,_e2.getSearchParamFromURL=function(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]},_e2.getSignDirectHash=function(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),o=[];o.push(Buffer.from([10])),o.push(dn(e.length)),o.push(e),o.push(Buffer.from([18])),o.push(dn(n.length)),o.push(n),o.push(Buffer.from([26])),o.push(dn(r.length)),o.push(r);const i=Buffer.concat(o),s=Ge(i);return Buffer.from(s).toString("hex").toUpperCase()},_e2.getSuiDigest=function(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map((t=>t.charCodeAt(0))),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const o=sn(r,{dkLen:32});return s.default.encode(o)},_e2.getUniqueValues=b,_e2.handleDeeplinkRedirect=async function({id:t,topic:e,wcDeepLink:n}){var o;try{if(!n)return;const i="string"==typeof n?JSON.parse(n):n,s=i?.href;if("string"!=typeof s)return;const f=tt(s,t,e),c=H();if(c===L.browser){if(null==(o=(0,r.getDocument)())||!o.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");et(f)}else c===L.reactNative&&typeof(null==_g?void 0:_g.Linking)<"u"&&await _g.Linking.openURL(f)}catch(t){console.error(t)}},_e2.hasOverlap=W,_e2.hashEthereumMessage=cn,_e2.hashKey=function(t){const e=kr((0,u.fromString)(t,Ri));return(0,u.toString)(e,Ri)},_e2.hashMessage=function(t){const e=kr((0,u.fromString)(t,Ci));return(0,u.toString)(e,Ri)},_e2.isAndroid=function(){return F()&&typeof _g<"u"&&typeof(null==_g?void 0:_g.Platform)<"u"&&"android"===(null==_g?void 0:_g.Platform.OS)},_e2.isAppVisible=function(){var t;return!V()||!(0,r.getDocument)()||"visible"===(null==(t=(0,r.getDocument)())?void 0:t.visibilityState)},_e2.isBrowser=V,_e2.isCaipNamespace=hs,_e2.isConformingNamespaces=js,_e2.isExpired=function(t){return Date.now()>=(0,n.toMiliseconds)(t)},_e2.isIframe=ot,_e2.isIos=function(){return F()&&typeof _g<"u"&&typeof(null==_g?void 0:_g.Platform)<"u"&&"ios"===(null==_g?void 0:_g.Platform.OS)},_e2.isNode=$,_e2.isOnline=function(){const t=H();return new Promise((e=>{switch(t){case L.browser:e(Fs());break;case L.reactNative:e(Vs());break;case L.node:default:e(!0)}}))},_e2.isProposalStruct=function(t){var e;return null==(e=t?.proposer)?void 0:e.publicKey},_e2.isReactNative=F,_e2.isRecap=$n,_e2.isSessionCompatible=function(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),o=Object.keys(n);let i=!0;return!!W(o,r)&&(r.forEach((e=>{const{accounts:r,methods:o,events:s}=t.namespaces[e],f=cs(r),c=n[e];W(x(e,c),f)&&W(c.methods,o)&&W(c.events,s)||(i=!1)})),i)},_e2.isSessionStruct=function(t){return t?.topic},_e2.isTelegram=rt,_e2.isTestRun=function(){return typeof process<"u"&&"true"===process.env.IS_VITEST},_e2.isTypeOneEnvelope=function(t){return t.type===ki&&"string"==typeof t.senderPublicKey&&"string"==typeof t.receiverPublicKey},_e2.isTypeTwoEnvelope=function(t){return t.type===ji},_e2.isUndefined=xs,_e2.isValidAccountId=Bs,_e2.isValidAccounts=Rs,_e2.isValidActions=Ps,_e2.isValidArray=Es,_e2.isValidChainId=As,_e2.isValidChains=Ns,_e2.isValidController=function(t,e){let n=null;return Is(t?.publicKey,!1)||(n=bs("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n},_e2.isValidEip1271Signature=ln,_e2.isValidEip191Signature=un,_e2.isValidErrorReason=function(t){return!!(t&&"object"==typeof t&&t.code&&Os(t.code,!1)&&t.message&&Is(t.message,!1))},_e2.isValidEvent=function(t){return!(xs(t)||!Is(t.name,!1))},_e2.isValidId=function(t){return"number"==typeof t},_e2.isValidNamespaceAccounts=Ts,_e2.isValidNamespaceActions=Cs,_e2.isValidNamespaceChains=Us,_e2.isValidNamespaceMethodsOrEvents=Ss,_e2.isValidNamespaces=Ls,_e2.isValidNamespacesChainId=function(t,e){return!(!As(e)||!as(t).includes(e))},_e2.isValidNamespacesEvent=function(t,e,n){return!!Is(n,!1)&&ls(t,e).includes(n)},_e2.isValidNamespacesRequest=function(t,e,n){return!!Is(n,!1)&&us(t,e).includes(n)},_e2.isValidNumber=Os,_e2.isValidObject=vs,_e2.isValidParams=function(t){return typeof t<"u"&&null!==typeof t},_e2.isValidRecap=Cn,_e2.isValidRelay=ks,_e2.isValidRelays=function(t,e){let n=!1;return e&&!t?n=!0:t&&Es(t)&&t.length&&t.forEach((t=>{n=ks(t)})),n},_e2.isValidRequest=function(t){return!(xs(t)||!Is(t.method,!1))},_e2.isValidRequestExpiry=function(t,e){return Os(t,!1)&&t<=e.max&&t>=e.min},_e2.isValidRequiredNamespaces=function(t,e,n){let r=null;if(t&&vs(t)){const o=Cs(t,e);o&&(r=o);const i=Us(t,e,n);i&&(r=i)}else r=bs("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r},_e2.isValidResponse=function(t){return!(xs(t)||xs(t.result)&&xs(t.error)||!Os(t.id,!1)||!Is(t.jsonrpc,!1))},_e2.isValidString=Is,_e2.isValidUrl=function(t){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Is(t,!1)){if(e(t))return!0;return e(st(t))}}catch{}return!1},_e2.mapEntries=function(t,e){const n={};return Object.keys(t).forEach((r=>{n[r]=e(t[r])})),n},_e2.mapToObj=function(t){return Object.fromEntries(t.entries())},_e2.mergeArrays=Q,_e2.mergeEncodedRecaps=function(t,e){const n=_n(t),r=_n(e);return Dn(Fn(n,r))},_e2.mergeRecaps=Fn,_e2.mergeRequiredAndOptionalNamespaces=function(t,e){var n,r,o,i,s,f;const c=ps(t),a=ps(e),u={},l=Object.keys(c).concat(Object.keys(a));for(const t of l)u[t]={chains:Q(null==(n=c[t])?void 0:n.chains,null==(r=a[t])?void 0:r.chains),methods:Q(null==(o=c[t])?void 0:o.methods,null==(i=a[t])?void 0:i.methods),events:Q(null==(s=c[t])?void 0:s.events,null==(f=a[t])?void 0:f.events)};return u},_e2.normalizeNamespaces=ps,_e2.objToMap=function(t){return new Map(Object.entries(t))},_e2.openDeeplink=et,_e2.parseAccountId=y,_e2.parseChainId=p,_e2.parseContextNames=Z,_e2.parseExpirerTarget=function(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if("topic"===e&&"string"==typeof n)r.topic=n;else{if("id"!==e||!Number.isInteger(Number(n)))throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);r.id=Number(n)}return r},_e2.parseNamespaceKey=ds,_e2.parseRelayParams=Yi,_e2.parseTopic=Ji,_e2.parseUri=function(t){if(!t.includes("wc:")){const e=st(t);null!=e&&e.includes("wc:")&&(t=e)}const e=(t=(t=t.includes("wc://")?t.replace("wc://",""):t).includes("wc:")?t.replace("wc:",""):t).indexOf(":"),n=-1!==t.indexOf("?")?t.indexOf("?"):void 0,r=t.substring(0,e),o=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",s=new URLSearchParams(i),f={};s.forEach(((t,e)=>{f[e]=t}));const c="string"==typeof f.methods?f.methods.split(","):void 0;return{protocol:r,topic:Ji(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:Yi(f),methods:c,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}},_e2.populateAppMetadata=function(t){var e,n;const r=q();try{return null!=t&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),null!=(e=t?.icons)&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter((t=>""!==t))),T(R(R({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:null!=(n=t?.icons)&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(e){return console.warn("Error populating app metadata",e),t||r}},_e2.populateAuthPayload=function(t){var e;const{authPayload:n,chains:r,methods:o}=t,i=n.statement||"";if(null==r||!r.length)return n;const s=nt(n.chains,r);if(null==s||!s.length)throw new Error("No supported chains");const f=Nn(n.resources);if(!f)return n;Cn(f);const c=Un(f,"eip155");let a=n?.resources||[];if(null!=c&&c.length){const t=Rn(c),r=nt(t,o);if(null==r||!r.length)throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(t)}, supported: ${JSON.stringify(o)}`);const i=kn(f,"eip155",jn("request",r,{chains:s}));a=(null==(e=n?.resources)?void 0:e.slice(0,-1))||[],a.push(Dn(i))}return xn(vn({},n),{statement:Hn(i,Mn(a)),chains:s,resources:null!=n&&n.resources||a.length>0?a:void 0})},_e2.recapHasResource=function(t,e){var n;return null==(n=t?.att)?void 0:n.hasOwnProperty(e)},_e2.serialize=Ki,_e2.sleep=function(t){return new Promise((e=>setTimeout(e,t)))},_e2.ss58AddressToPublicKey=zs,_e2.subscribeToBrowserNetworkChange=Ms,_e2.subscribeToNetworkChange=function(t){switch(H()){case L.browser:Ms(t);break;case L.reactNative:qs(t);case L.node:}},_e2.subscribeToReactNativeNetworkChange=qs,_e2.toBase64=it,_e2.uuidv4=function(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},_e2.validateDecoding=function(t,e){const n=zi({encoded:t,encoding:e?.encoding});return Gi({type:Hi(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?(0,u.toString)(n.senderPublicKey,Ri):void 0,receiverPublicKey:e?.receiverPublicKey})},_e2.validateEncoding=Gi,_e2.validateSignedCacao=async function(t){const{cacao:e,projectId:n}=t,{s:r,p:o}=e,i=Sn(o,o.iss),s=Bn(o.iss);return await an(s,i,r,An(o.iss),n)},_e2.verifyP256Jwt=function(t,e){const[n,r,o]=t.split("."),i=Buffer.from(qi(o),"base64");if(64!==i.length)throw new Error("Invalid signature length");const s=i.slice(0,32),f=i.slice(32,64),c=kr(`${n}.${r}`),l=Zi(e);if(!Ni.verify((0,u.concat)([s,f]),c,l))throw new Error("Invalid signature");return(0,a.decodeJWT)(t).payload},_e2.verifySignature=an;var e=_r2(_d[1]),n=_r2(_d[2]),r=_r2(_d[3]),o=_r2(_d[4]),i=_r2(_d[5]),s=t(_r2(_d[6])),f=_r2(_d[7]),c=_r2(_d[8]),a=_r2(_d[9]),u=_r2(_d[10]),l=_r2(_d[11]),h=_r2(_d[12]);const d=":";function p(t){const[e,n]=t.split(d);return{namespace:e,reference:n}}function g(t){const{namespace:e,reference:n}=t;return[e,n].join(d)}function y(t){const[e,n,r]=t.split(d);return{namespace:e,reference:n,address:r}}function m(t){const{namespace:e,reference:n,address:r}=t;return[e,n,r].join(d)}function b(t,e){const n=[];return t.forEach((t=>{const r=e(t);n.includes(r)||n.push(r)})),n}function w(t){const{address:e}=y(t);return e}function E(t){const{namespace:e,reference:n}=y(t);return g({namespace:e,reference:n})}function v(t){return b(t,E)}function x(t,e){return t.includes(":")?[t]:e.chains||[]}var I=Object.defineProperty,O=Object.defineProperties,A=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,U=(t,e,n)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R=(t,e)=>{for(var n in e||(e={}))S.call(e,n)&&U(t,n,e[n]);if(B)for(var n of B(e))N.call(e,n)&&U(t,n,e[n]);return t},T=(t,e)=>O(t,A(e)),P=(t,e,n)=>U(t,"symbol"!=typeof e?e+"":e,n);const C=_e2.REACT_NATIVE_PRODUCT="ReactNative",L=_e2.ENV_MAP={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},k=_e2.EMPTY_SPACE=" ",j=(_e2.COLON=":",_e2.SLASH="/"),D=_e2.DEFAULT_DEPTH=2,_=(_e2.ONE_THOUSAND=1e3,_e2.SDK_TYPE="js");function $(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function F(){return!(0,r.getDocument)()&&!!(0,r.getNavigator)()&&navigator.product===C}function V(){return!$()&&!!(0,r.getNavigator)()&&!!(0,r.getDocument)()}function H(){return F()?L.reactNative:$()?L.node:V()?L.browser:L.unknown}function M(t,e){const n=new URLSearchParams(t);for(const t of Object.keys(e).sort())if(e.hasOwnProperty(t)){const r=e[t];void 0!==r&&n.set(t,r)}return n.toString()}function q(){return(0,o.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function K(){if(H()===L.reactNative&&typeof _g<"u"&&typeof(null==_g?void 0:_g.Platform)<"u"){const{OS:t,Version:e}=_g.Platform;return[t,e].join("-")}const t=(0,e.detect)();if(null===t)return"unknown";const n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[n,t.name,t.version].join("-"):[n,t.version].join("-")}function z(){var t;const e=H();return e===L.browser?[e,(null==(t=(0,r.getLocation)())?void 0:t.host)||"unknown"].join(":"):e}function G(t,e,n){const r=K(),o=z();return[[t,e].join("-"),[_,n].join("-"),r,o].join("/")}function Z(t,e=D){return Y(t.split(j),e)}function W(t,e){return t.filter((t=>e.includes(t))).length===t.length}function Y(t,e=D){return t.slice(Math.max(t.length-e,0))}function J(t){return t.trim().replace(/^\w/,(t=>t.toUpperCase()))}function X(t,e){if("string"==typeof e&&e.startsWith(`${t}:`))return e;if("topic"===t.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}if("id"===t.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Q(t=[],e=[]){return[...new Set([...t,...e])]}function tt(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let o=`${t}`;if(t.startsWith("https://t.me")){o=`${o}${t.includes("?")?"&startapp=":"?startapp="}${it(r,!0)}`}else o=`${o}/wc?${r}`;return o}function et(t){let e="_self";ot()?e="_top":(rt()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}function nt(t,e){return t.filter((t=>e.includes(t)))}function rt(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function ot(){try{return window.self!==window.top}catch{return!1}}function it(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function st(t){return Buffer.from(t,"base64").toString("utf-8")}_e2.enumify=t=>t;_e2.LimitedSet=class{constructor({limit:t}){P(this,"limit"),P(this,"set"),this.limit=t,this.set=new Set}add(t){if(!this.set.has(t)){if(this.set.size>=this.limit){const t=this.set.values().next().value;t&&this.set.delete(t)}this.set.add(t)}}has(t){return this.set.has(t)}};const ft=BigInt(4294967295),ct=BigInt(32);function at(t,e=!1){return e?{h:Number(t&ft),l:Number(t>>ct&ft)}:{h:0|Number(t>>ct&ft),l:0|Number(t&ft)}}function ut(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:s}=at(t[i],e);[r[i],o[i]]=[n,s]}return[r,o]}const lt=(t,e,n)=>t>>>n,ht=(t,e,n)=>t<<32-n|e>>>n,dt=(t,e,n)=>t>>>n|e<<32-n,pt=(t,e,n)=>t<<32-n|e>>>n,gt=(t,e,n)=>t<<64-n|e>>>n-32,yt=(t,e,n)=>t>>>n-32|e<<64-n,mt=(t,e)=>e,bt=(t,e)=>t,wt=(t,e,n)=>t<<n|e>>>32-n,Et=(t,e,n)=>e<<n|t>>>32-n,vt=(t,e,n)=>e<<n-32|t>>>64-n,xt=(t,e,n)=>t<<n-32|e>>>64-n;function It(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/4294967296|0)|0,l:0|o}}const Ot=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),At=(t,e,n,r)=>e+n+r+(t/4294967296|0)|0,Bt=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),St=(t,e,n,r,o)=>e+n+r+o+(t/4294967296|0)|0,Nt=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Ut=(t,e,n,r,o,i)=>e+n+r+o+i+(t/4294967296|0)|0,Rt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Tt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Pt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ct(t,...e){if(!Tt(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Lt(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");Pt(t.outputLen),Pt(t.blockLen)}function kt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jt(t,e){Ct(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Dt(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function _t(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function $t(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ft(t,e){return t<<32-e|t>>>e}const Vt=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Ht(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Mt=Vt?t=>t:t=>Ht(t);const qt=Vt?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=Ht(t[e]);return t},Kt="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,zt=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Gt(t){if(Ct(t),Kt)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=zt[t[n]];return e}const Zt=48,Wt=57,Yt=65,Jt=70,Xt=97,Qt=102;function te(t){return t>=Zt&&t<=Wt?t-Zt:t>=Yt&&t<=Jt?t-(Yt-10):t>=Xt&&t<=Qt?t-(Xt-10):void 0}function ee(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(Kt)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let e=0,o=0;e<n;e++,o+=2){const n=te(t.charCodeAt(o)),i=te(t.charCodeAt(o+1));if(void 0===n||void 0===i){const e=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+o)}r[e]=16*n+i}return r}function ne(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function re(t){return"string"==typeof t&&(t=ne(t)),Ct(t),t}function oe(...t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];Ct(r),e+=r.length}const n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const o=t[e];n.set(o,r),r+=o.length}return n}class ie{}function se(t){const e=e=>t().update(re(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function fe(t=32){if(Rt&&"function"==typeof Rt.getRandomValues)return Rt.getRandomValues(new Uint8Array(t));if(Rt&&"function"==typeof Rt.randomBytes)return Uint8Array.from(Rt.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const ce=BigInt(0),ae=BigInt(1),ue=BigInt(2),le=BigInt(7),he=BigInt(256),de=BigInt(113),pe=[],ge=[],ye=[];for(let t=0,e=ae,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],pe.push(2*(5*r+n)),ge.push((t+1)*(t+2)/2%64);let o=ce;for(let t=0;t<7;t++)e=(e<<ae^(e>>le)*de)%he,e&ue&&(o^=ae<<(ae<<BigInt(t))-ae);ye.push(o)}const me=ut(ye,!0),be=me[0],we=me[1],Ee=(t,e,n)=>n>32?vt(t,e,n):wt(t,e,n),ve=(t,e,n)=>n>32?xt(t,e,n):Et(t,e,n);function xe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,o=(e+2)%10,i=n[o],s=n[o+1],f=Ee(i,s,1)^n[r],c=ve(i,s,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=f,t[e+n+1]^=c}let e=t[2],o=t[3];for(let n=0;n<24;n++){const r=ge[n],i=Ee(e,o,r),s=ve(e,o,r),f=pe[n];e=t[f],o=t[f+1],t[f]=i,t[f+1]=s}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=be[r],t[1]^=we[r]}_t(n)}class Ie extends ie{constructor(t,e,n,r=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=o,Pt(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Dt(this.state)}clone(){return this._cloneInto()}keccak(){qt(this.state32),xe(this.state32,this.rounds),qt(this.state32),this.posOut=0,this.pos=0}update(t){kt(this),Ct(t=re(t));const{blockLen:e,state:n}=this,r=t.length;for(let o=0;o<r;){const i=Math.min(e-this.pos,r-o);for(let e=0;e<i;e++)n[this.pos++]^=t[o++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,!!(128&e)&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){kt(this,!1),Ct(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,o=t.length;r<o;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,o-r);t.set(e.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Pt(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(jt(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,_t(this.state)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:o,enableXOF:i}=this;return t||(t=new Ie(e,n,r,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Oe=(Ae=1,Be=136,Se=32,se((()=>new Ie(Be,Ae,Se))));var Ae,Be,Se;function Ne(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),f=Number(n&i),c=r?4:0,a=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+a,f,r)}function Ue(t,e,n){return t&e^~t&n}function Re(t,e,n){return t&e^t&n^e&n}class Te extends ie{constructor(t,e,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(t),this.view=$t(this.buffer)}update(t){kt(this),Ct(t=re(t));const{view:e,buffer:n,blockLen:r}=this,o=t.length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=$t(t);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){kt(this),jt(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,_t(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;Ne(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=$t(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=f/4,a=this.get();if(c>a.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)s.setUint32(4*t,a[t],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return t.destroyed=i,t.finished=o,t.length=r,t.pos=s,r%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const Pe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ce=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Le=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),ke=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),je=new Uint32Array(64);class De extends Te{constructor(t=32){super(64,t,8,!1),this.A=0|Pe[0],this.B=0|Pe[1],this.C=0|Pe[2],this.D=0|Pe[3],this.E=0|Pe[4],this.F=0|Pe[5],this.G=0|Pe[6],this.H=0|Pe[7]}get(){const{A:t,B:e,C:n,D:r,E:o,F:i,G:s,H:f}=this;return[t,e,n,r,o,i,s,f]}set(t,e,n,r,o,i,s,f){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|f}process(t,e){for(let n=0;n<16;n++,e+=4)je[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=je[t-15],n=je[t-2],r=Ft(e,7)^Ft(e,18)^e>>>3,o=Ft(n,17)^Ft(n,19)^n>>>10;je[t]=o+je[t-7]+r+je[t-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:f,G:c,H:a}=this;for(let t=0;t<64;t++){const e=a+(Ft(s,6)^Ft(s,11)^Ft(s,25))+Ue(s,f,c)+ke[t]+je[t]|0,u=(Ft(n,2)^Ft(n,13)^Ft(n,22))+Re(n,r,o)|0;a=c,c=f,f=s,s=i+e|0,i=o,o=r,r=n,n=e+u|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,f=f+this.F|0,c=c+this.G|0,a=a+this.H|0,this.set(n,r,o,i,s,f,c,a)}roundClean(){_t(je)}destroy(){this.set(0,0,0,0,0,0,0,0),_t(this.buffer)}}const _e=ut(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),$e=_e[0],Fe=_e[1],Ve=new Uint32Array(80),He=new Uint32Array(80);class Me extends Te{constructor(t=64){super(128,t,16,!1),this.Ah=0|Le[0],this.Al=0|Le[1],this.Bh=0|Le[2],this.Bl=0|Le[3],this.Ch=0|Le[4],this.Cl=0|Le[5],this.Dh=0|Le[6],this.Dl=0|Le[7],this.Eh=0|Le[8],this.El=0|Le[9],this.Fh=0|Le[10],this.Fl=0|Le[11],this.Gh=0|Le[12],this.Gl=0|Le[13],this.Hh=0|Le[14],this.Hl=0|Le[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:f,Eh:c,El:a,Fh:u,Fl:l,Gh:h,Gl:d,Hh:p,Hl:g}=this;return[t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g]}set(t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|f,this.Eh=0|c,this.El=0|a,this.Fh=0|u,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let n=0;n<16;n++,e+=4)Ve[n]=t.getUint32(e),He[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|Ve[t-15],n=0|He[t-15],r=dt(e,n,1)^dt(e,n,8)^lt(e,0,7),o=pt(e,n,1)^pt(e,n,8)^ht(e,n,7),i=0|Ve[t-2],s=0|He[t-2],f=dt(i,s,19)^gt(i,s,61)^lt(i,0,6),c=pt(i,s,19)^yt(i,s,61)^ht(i,s,6),a=Bt(o,c,He[t-7],He[t-16]),u=St(a,r,f,Ve[t-7],Ve[t-16]);Ve[t]=0|u,He[t]=0|a}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:f,Dh:c,Dl:a,Eh:u,El:l,Fh:h,Fl:d,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let t=0;t<80;t++){const e=dt(u,l,14)^dt(u,l,18)^gt(u,l,41),b=pt(u,l,14)^pt(u,l,18)^yt(u,l,41),w=u&h^~u&p,E=Nt(m,b,l&d^~l&g,Fe[t],He[t]),v=Ut(E,y,e,w,$e[t],Ve[t]),x=0|E,I=dt(n,r,28)^gt(n,r,34)^gt(n,r,39),O=pt(n,r,28)^yt(n,r,34)^yt(n,r,39),A=n&o^n&s^o&s,B=r&i^r&f^i&f;y=0|p,m=0|g,p=0|h,g=0|d,h=0|u,d=0|l,({h:u,l:l}=It(0|c,0|a,0|v,0|x)),c=0|s,a=0|f,s=0|o,f=0|i,o=0|n,i=0|r;const S=Ot(x,O,B);n=At(S,v,I,A),r=0|S}({h:n,l:r}=It(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=It(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:f}=It(0|this.Ch,0|this.Cl,0|s,0|f)),({h:c,l:a}=It(0|this.Dh,0|this.Dl,0|c,0|a)),({h:u,l:l}=It(0|this.Eh,0|this.El,0|u,0|l)),({h:h,l:d}=It(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:g}=It(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=It(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(n,r,o,i,s,f,c,a,u,l,h,d,p,g,y,m)}roundClean(){_t(Ve,He)}destroy(){_t(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class qe extends Me{constructor(){super(48),this.Ah=0|Ce[0],this.Al=0|Ce[1],this.Bh=0|Ce[2],this.Bl=0|Ce[3],this.Ch=0|Ce[4],this.Cl=0|Ce[5],this.Dh=0|Ce[6],this.Dl=0|Ce[7],this.Eh=0|Ce[8],this.El=0|Ce[9],this.Fh=0|Ce[10],this.Fl=0|Ce[11],this.Gh=0|Ce[12],this.Gl=0|Ce[13],this.Hh=0|Ce[14],this.Hl=0|Ce[15]}}const Ke=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class ze extends Me{constructor(){super(32),this.Ah=0|Ke[0],this.Al=0|Ke[1],this.Bh=0|Ke[2],this.Bl=0|Ke[3],this.Ch=0|Ke[4],this.Cl=0|Ke[5],this.Dh=0|Ke[6],this.Dl=0|Ke[7],this.Eh=0|Ke[8],this.El=0|Ke[9],this.Fh=0|Ke[10],this.Fl=0|Ke[11],this.Gh=0|Ke[12],this.Gl=0|Ke[13],this.Hh=0|Ke[14],this.Hl=0|Ke[15]}}const Ge=se((()=>new De)),Ze=se((()=>new Me)),We=se((()=>new qe)),Ye=se((()=>new ze)),Je=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Xe=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Qe=new Uint32Array(32);function tn(t,e,n,r,o,i){const s=o[i],f=o[i+1];let c=Qe[2*t],a=Qe[2*t+1],u=Qe[2*e],l=Qe[2*e+1],h=Qe[2*n],d=Qe[2*n+1],p=Qe[2*r],g=Qe[2*r+1],y=Ot(c,u,s);a=At(y,a,l,f),c=0|y,({Dh:g,Dl:p}={Dh:g^a,Dl:p^c}),({Dh:g,Dl:p}={Dh:mt(0,p),Dl:bt(g)}),({h:d,l:h}=It(d,h,g,p)),({Bh:l,Bl:u}={Bh:l^d,Bl:u^h}),({Bh:l,Bl:u}={Bh:dt(l,u,24),Bl:pt(l,u,24)}),Qe[2*t]=c,Qe[2*t+1]=a,Qe[2*e]=u,Qe[2*e+1]=l,Qe[2*n]=h,Qe[2*n+1]=d,Qe[2*r]=p,Qe[2*r+1]=g}function en(t,e,n,r,o,i){const s=o[i],f=o[i+1];let c=Qe[2*t],a=Qe[2*t+1],u=Qe[2*e],l=Qe[2*e+1],h=Qe[2*n],d=Qe[2*n+1],p=Qe[2*r],g=Qe[2*r+1],y=Ot(c,u,s);a=At(y,a,l,f),c=0|y,({Dh:g,Dl:p}={Dh:g^a,Dl:p^c}),({Dh:g,Dl:p}={Dh:dt(g,p,16),Dl:pt(g,p,16)}),({h:d,l:h}=It(d,h,g,p)),({Bh:l,Bl:u}={Bh:l^d,Bl:u^h}),({Bh:l,Bl:u}={Bh:gt(l,u,63),Bl:yt(l,u,63)}),Qe[2*t]=c,Qe[2*t+1]=a,Qe[2*e]=u,Qe[2*e+1]=l,Qe[2*n]=h,Qe[2*n+1]=d,Qe[2*r]=p,Qe[2*r+1]=g}function nn(t,e={},n,r,o){if(Pt(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:s,personalization:f}=e;if(void 0!==i&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==s&&s.length!==r)throw new Error("salt must be undefined or "+r);if(void 0!==f&&f.length!==o)throw new Error("personalization must be undefined or "+o)}class rn extends ie{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Pt(t),Pt(e),this.blockLen=t,this.outputLen=e,this.buffer=new Uint8Array(t),this.buffer32=Dt(this.buffer)}update(t){kt(this),Ct(t=re(t));const{blockLen:e,buffer:n,buffer32:r}=this,o=t.length,i=t.byteOffset,s=t.buffer;for(let f=0;f<o;){this.pos===e&&(qt(r),this.compress(r,0,!1),qt(r),this.pos=0);const c=Math.min(e-this.pos,o-f),a=i+f;if(c!==e||a%4||!(f+c<o))n.set(t.subarray(f,f+c),this.pos),this.pos+=c,this.length+=c,f+=c;else{const t=new Uint32Array(s,a,Math.floor((o-f)/4));qt(t);for(let n=0;f+e<o;n+=r.length,f+=e)this.length+=e,this.compress(t,n,!1);qt(t)}}return this}digestInto(t){kt(this),jt(t,this);const{pos:e,buffer32:n}=this;this.finished=!0,_t(this.buffer.subarray(e)),qt(n),this.compress(n,0,!0),qt(n);const r=Dt(t);this.get().forEach(((t,e)=>r[e]=Mt(t)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){const{buffer:e,length:n,finished:r,destroyed:o,outputLen:i,pos:s}=this;return t||(t=new this.constructor({dkLen:i})),t.set(...this.get()),t.buffer.set(e),t.destroyed=o,t.finished=r,t.length=n,t.pos=s,t.outputLen=i,t}clone(){return this._cloneInto()}}class on extends rn{constructor(t={}){const e=void 0===t.dkLen?64:t.dkLen;super(128,e),this.v0l=0|Xe[0],this.v0h=0|Xe[1],this.v1l=0|Xe[2],this.v1h=0|Xe[3],this.v2l=0|Xe[4],this.v2h=0|Xe[5],this.v3l=0|Xe[6],this.v3h=0|Xe[7],this.v4l=0|Xe[8],this.v4h=0|Xe[9],this.v5l=0|Xe[10],this.v5h=0|Xe[11],this.v6l=0|Xe[12],this.v6h=0|Xe[13],this.v7l=0|Xe[14],this.v7h=0|Xe[15],nn(e,t,64,16,16);let{key:n,personalization:r,salt:o}=t,i=0;if(void 0!==n&&(n=re(n),i=n.length),this.v0l^=16842752|(this.outputLen|i<<8),void 0!==o){o=re(o);const t=Dt(o);this.v4l^=Mt(t[0]),this.v4h^=Mt(t[1]),this.v5l^=Mt(t[2]),this.v5h^=Mt(t[3])}if(void 0!==r){r=re(r);const t=Dt(r);this.v6l^=Mt(t[0]),this.v6h^=Mt(t[1]),this.v7l^=Mt(t[2]),this.v7h^=Mt(t[3])}if(void 0!==n){const t=new Uint8Array(this.blockLen);t.set(n),this.update(t)}}get(){let{v0l:t,v0h:e,v1l:n,v1h:r,v2l:o,v2h:i,v3l:s,v3h:f,v4l:c,v4h:a,v5l:u,v5h:l,v6l:h,v6h:d,v7l:p,v7h:g}=this;return[t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g]}set(t,e,n,r,o,i,s,f,c,a,u,l,h,d,p,g){this.v0l=0|t,this.v0h=0|e,this.v1l=0|n,this.v1h=0|r,this.v2l=0|o,this.v2h=0|i,this.v3l=0|s,this.v3h=0|f,this.v4l=0|c,this.v4h=0|a,this.v5l=0|u,this.v5h=0|l,this.v6l=0|h,this.v6h=0|d,this.v7l=0|p,this.v7h=0|g}compress(t,e,n){this.get().forEach(((t,e)=>Qe[e]=t)),Qe.set(Xe,16);let{h:r,l:o}=at(BigInt(this.length));Qe[24]=Xe[8]^o,Qe[25]=Xe[9]^r,n&&(Qe[28]=~Qe[28],Qe[29]=~Qe[29]);let i=0;const s=Je;for(let n=0;n<12;n++)tn(0,4,8,12,t,e+2*s[i++]),en(0,4,8,12,t,e+2*s[i++]),tn(1,5,9,13,t,e+2*s[i++]),en(1,5,9,13,t,e+2*s[i++]),tn(2,6,10,14,t,e+2*s[i++]),en(2,6,10,14,t,e+2*s[i++]),tn(3,7,11,15,t,e+2*s[i++]),en(3,7,11,15,t,e+2*s[i++]),tn(0,5,10,15,t,e+2*s[i++]),en(0,5,10,15,t,e+2*s[i++]),tn(1,6,11,12,t,e+2*s[i++]),en(1,6,11,12,t,e+2*s[i++]),tn(2,7,8,13,t,e+2*s[i++]),en(2,7,8,13,t,e+2*s[i++]),tn(3,4,9,14,t,e+2*s[i++]),en(3,4,9,14,t,e+2*s[i++]);this.v0l^=Qe[0]^Qe[16],this.v0h^=Qe[1]^Qe[17],this.v1l^=Qe[2]^Qe[18],this.v1h^=Qe[3]^Qe[19],this.v2l^=Qe[4]^Qe[20],this.v2h^=Qe[5]^Qe[21],this.v3l^=Qe[6]^Qe[22],this.v3h^=Qe[7]^Qe[23],this.v4l^=Qe[8]^Qe[24],this.v4h^=Qe[9]^Qe[25],this.v5l^=Qe[10]^Qe[26],this.v5h^=Qe[11]^Qe[27],this.v6l^=Qe[12]^Qe[28],this.v6h^=Qe[13]^Qe[29],this.v7l^=Qe[14]^Qe[30],this.v7h^=Qe[15]^Qe[31],_t(Qe)}destroy(){this.destroyed=!0,_t(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sn=(function(t){const e=(e,n)=>t(n).update(re(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e})((t=>new on(t))),fn="https://rpc.walletconnect.org/v1";function cn(t){const e=`\x19Ethereum Signed Message:\n${t.length}`,n=(new TextEncoder).encode(e+t);return"0x"+Buffer.from(Oe(n)).toString("hex")}async function an(t,e,n,r,o,i){switch(n.t){case"eip191":return await un(t,e,n.s);case"eip1271":return await ln(t,e,n.s,r,o,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function un(t,e,n){return(await(0,i.recoverAddress)({hash:cn(e),signature:n})).toLowerCase()===t.toLowerCase()}async function ln(t,e,n,r,o,i){const s=p(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const s="0x1626ba7e",f="0000000000000000000000000000000000000000000000000000000000000040",c=n.substring(2),a=(c.length/2).toString(16).padStart(64,"0"),u=s+(e.startsWith("0x")?e:cn(e)).substring(2)+f+a+c,l=await fetch(`${i||fn}/?chainId=${r}&projectId=${o}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:u},"latest"]})}),{result:h}=await l.json();return!!h&&h.slice(0,s.length).toLowerCase()===s.toLowerCase()}catch(t){return console.error("isValidEip1271Signature: ",t),!1}}function hn(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if("object"==typeof t&&null!=t&&t.data)return new Uint8Array(Object.values(t.data));if("object"==typeof t&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function dn(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}var pn=Object.defineProperty,gn=Object.defineProperties,yn=Object.getOwnPropertyDescriptors,mn=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,wn=Object.prototype.propertyIsEnumerable,En=(t,e,n)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vn=(t,e)=>{for(var n in e||(e={}))bn.call(e,n)&&En(t,n,e[n]);if(mn)for(var n of mn(e))wn.call(e,n)&&En(t,n,e[n]);return t},xn=(t,e)=>gn(t,yn(e));const In=t=>t?.split(":"),On=t=>{const e=t&&In(t);if(e)return t.includes("did:pkh:")?e[3]:e[1]},An=t=>{const e=t&&In(t);if(e)return e[2]+":"+e[3]},Bn=t=>{const e=t&&In(t);if(e)return e.pop()};_e2.getDidAddress=Bn,_e2.getNamespacedDidChainId=An,_e2.getDidChainId=On,_e2.getDidAddressSegments=In;const Sn=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Bn(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,s=`Version: ${t.version}`,f=`Chain ID: ${On(e)}`,c=`Nonce: ${t.nonce}`,a=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,l=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,d=t.resources?`Resources:${t.resources.map((t=>`\n- ${t}`)).join("")}`:void 0,p=Mn(t.resources);if(p){o=Vn(o,_n(p))}return[n,r,"",o,"",i,s,f,c,a,u,l,h,d].filter((t=>null!=t)).join("\n")};function Nn(t){const e=Mn(t);if(e&&$n(e))return _n(e)}function Un(t,e){var n,r;return null!=(n=t?.att)&&n[e]?Object.keys(null==(r=t?.att)?void 0:r[e]):[]}function Rn(t){return t?.map((t=>{var e;return null==(e=t.split("/"))?void 0:e[1]}))||[]}function Tn(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Pn(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Cn(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(null==e||!e.length)throw new Error("No resources found in `att` property");e.forEach((e=>{const n=t.att[e];if(Array.isArray(n))throw new Error(`Resource must be an object: ${e}`);if("object"!=typeof n)throw new Error(`Resource must be an object: ${e}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${e}`);Object.keys(n).forEach((t=>{const e=n[t];if(!Array.isArray(e))throw new Error(`Ability limits ${t} must be an array of objects, found: ${e}`);if(!e.length)throw new Error(`Value of ${t} is empty array, must be an array with objects`);e.forEach((e=>{if("object"!=typeof e)throw new Error(`Ability limits (${t}) must be an array of objects, found: ${e}`)}))}))}))}function Ln(t,e,n,r={}){return n?.sort(((t,e)=>t.localeCompare(e))),{att:{[t]:jn(e,n,r)}}}function kn(t,e,n){var r;t.att[e]=vn({},n);return(null==(r=Object.keys(t.att))?void 0:r.sort(((t,e)=>t.localeCompare(e)))).reduce(((e,n)=>(e.att[n]=t.att[n],e)),{att:{}})}function jn(t,e,n={}){e=e?.sort(((t,e)=>t.localeCompare(e)));const r=e.map((e=>({[`${t}/${e}`]:[n]})));return Object.assign({},...r)}function Dn(t){return Cn(t),`urn:recap:${Tn(t).replace(/=/g,"")}`}function _n(t){const e=Pn(t.replace("urn:recap:",""));return Cn(e),e}function $n(t){return t&&t.includes("urn:recap:")}function Fn(t,e){Cn(t),Cn(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort(((t,e)=>t.localeCompare(e))),r={att:{}};return n.forEach((n=>{var o,i;Object.keys((null==(o=t.att)?void 0:o[n])||{}).concat(Object.keys((null==(i=e.att)?void 0:i[n])||{})).sort(((t,e)=>t.localeCompare(e))).forEach((o=>{var i,s;r.att[n]=xn(vn({},r.att[n]),{[o]:(null==(i=t.att[n])?void 0:i[o])||(null==(s=e.att[n])?void 0:s[o])})}))})),r}function Vn(t="",e){Cn(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let o=0;Object.keys(e.att).forEach((t=>{const n=Object.keys(e.att[t]).map((t=>({ability:t.split("/")[0],action:t.split("/")[1]})));n.sort(((t,e)=>t.action.localeCompare(e.action)));const i={};n.forEach((t=>{i[t.ability]||(i[t.ability]=[]),i[t.ability].push(t.action)}));const s=Object.keys(i).map((e=>(o++,`(${o}) '${e}': '${i[e].join("', '")}' for '${t}'.`)));r.push(s.join(", ").replace(".,","."))}));return`${t?t+" ":""}${`${n}${r.join(" ")}`}`}function Hn(t,e){if(!e)return t;const n=_n(e);return Cn(n),Vn(t,n)}function Mn(t){if(!t)return;const e=t?.[t.length-1];return $n(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function qn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Kn(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function zn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gn(t,...e){if(!qn(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Zn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Wn(t,e){Gn(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Yn(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Jn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Xn(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}_e2.formatMessage=Sn;const Qn=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function tr(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}function er(t){if("string"==typeof t)t=tr(t);else{if(!qn(t))throw new Error("Uint8Array expected, got "+typeof t);t=cr(t)}return t}function nr(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign(t,e)}function rr(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return 0===n}function or(t,e,n=!0){if(void 0===e)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!fr(e))throw new Error("invalid output, must be aligned");return e}function ir(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),f=Number(n&i),c=r?4:0,a=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+a,f,r)}function sr(t,e,n){Kn(n);const r=new Uint8Array(16),o=Xn(r);return ir(o,0,BigInt(e),n),ir(o,8,BigInt(t),n),r}function fr(t){return t.byteOffset%4==0}function cr(t){return Uint8Array.from(t)}const ar=t=>Uint8Array.from(t.split("").map((t=>t.charCodeAt(0)))),ur=ar("expand 16-byte k"),lr=ar("expand 32-byte k"),hr=Yn(ur),dr=Yn(lr);function pr(t,e){return t<<e|t>>>32-e}function gr(t){return t.byteOffset%4==0}const yr=4294967295,mr=new Uint32Array;function br(t,e,n,r,o,i,s,f){const c=o.length,a=new Uint8Array(64),u=Yn(a),l=gr(o)&&gr(i),h=l?Yn(o):mr,d=l?Yn(i):mr;for(let p=0;p<c;s++){if(t(e,n,r,u,s,f),s>=yr)throw new Error("arx: counter overflow");const g=Math.min(64,c-p);if(l&&64===g){const t=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let e,n=0;n<16;n++)e=t+n,d[e]=h[e]^u[n];p+=64}else{for(let t,e=0;e<g;e++)t=p+e,i[t]=o[t]^a[e];p+=g}}}const wr=(t,e)=>255&t[e++]|(255&t[e++])<<8;class Er{constructor(t){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Gn(t=er(t),32);const e=wr(t,0),n=wr(t,2),r=wr(t,4),o=wr(t,6),i=wr(t,8),s=wr(t,10),f=wr(t,12),c=wr(t,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|o<<9),this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|s<<2),this.r[7]=8065&(s>>>11|f<<5),this.r[8]=8191&(f>>>8|c<<8),this.r[9]=c>>>5&127;for(let e=0;e<8;e++)this.pad[e]=wr(t,16+2*e)}process(t,e,n=!1){const r=n?0:2048,{h:o,r:i}=this,s=i[0],f=i[1],c=i[2],a=i[3],u=i[4],l=i[5],h=i[6],d=i[7],p=i[8],g=i[9],y=wr(t,e+0),m=wr(t,e+2),b=wr(t,e+4),w=wr(t,e+6),E=wr(t,e+8),v=wr(t,e+10),x=wr(t,e+12),I=wr(t,e+14);let O=o[0]+(8191&y),A=o[1]+(8191&(y>>>13|m<<3)),B=o[2]+(8191&(m>>>10|b<<6)),S=o[3]+(8191&(b>>>7|w<<9)),N=o[4]+(8191&(w>>>4|E<<12)),U=o[5]+(E>>>1&8191),R=o[6]+(8191&(E>>>14|v<<2)),T=o[7]+(8191&(v>>>11|x<<5)),P=o[8]+(8191&(x>>>8|I<<8)),C=o[9]+(I>>>5|r),L=0,k=L+O*s+A*(5*g)+B*(5*p)+S*(5*d)+N*(5*h);L=k>>>13,k&=8191,k+=U*(5*l)+R*(5*u)+T*(5*a)+P*(5*c)+C*(5*f),L+=k>>>13,k&=8191;let j=L+O*f+A*s+B*(5*g)+S*(5*p)+N*(5*d);L=j>>>13,j&=8191,j+=U*(5*h)+R*(5*l)+T*(5*u)+P*(5*a)+C*(5*c),L+=j>>>13,j&=8191;let D=L+O*c+A*f+B*s+S*(5*g)+N*(5*p);L=D>>>13,D&=8191,D+=U*(5*d)+R*(5*h)+T*(5*l)+P*(5*u)+C*(5*a),L+=D>>>13,D&=8191;let _=L+O*a+A*c+B*f+S*s+N*(5*g);L=_>>>13,_&=8191,_+=U*(5*p)+R*(5*d)+T*(5*h)+P*(5*l)+C*(5*u),L+=_>>>13,_&=8191;let $=L+O*u+A*a+B*c+S*f+N*s;L=$>>>13,$&=8191,$+=U*(5*g)+R*(5*p)+T*(5*d)+P*(5*h)+C*(5*l),L+=$>>>13,$&=8191;let F=L+O*l+A*u+B*a+S*c+N*f;L=F>>>13,F&=8191,F+=U*s+R*(5*g)+T*(5*p)+P*(5*d)+C*(5*h),L+=F>>>13,F&=8191;let V=L+O*h+A*l+B*u+S*a+N*c;L=V>>>13,V&=8191,V+=U*f+R*s+T*(5*g)+P*(5*p)+C*(5*d),L+=V>>>13,V&=8191;let H=L+O*d+A*h+B*l+S*u+N*a;L=H>>>13,H&=8191,H+=U*c+R*f+T*s+P*(5*g)+C*(5*p),L+=H>>>13,H&=8191;let M=L+O*p+A*d+B*h+S*l+N*u;L=M>>>13,M&=8191,M+=U*a+R*c+T*f+P*s+C*(5*g),L+=M>>>13,M&=8191;let q=L+O*g+A*p+B*d+S*h+N*l;L=q>>>13,q&=8191,q+=U*u+R*a+T*c+P*f+C*s,L+=q>>>13,q&=8191,L=(L<<2)+L|0,L=L+k|0,k=8191&L,L>>>=13,j+=L,o[0]=k,o[1]=j,o[2]=D,o[3]=_,o[4]=$,o[5]=F,o[6]=V,o[7]=H,o[8]=M,o[9]=q}finalize(){const{h:t,pad:e}=this,n=new Uint16Array(10);let r=t[1]>>>13;t[1]&=8191;for(let e=2;e<10;e++)t[e]+=r,r=t[e]>>>13,t[e]&=8191;t[0]+=5*r,r=t[0]>>>13,t[0]&=8191,t[1]+=r,r=t[1]>>>13,t[1]&=8191,t[2]+=r,n[0]=t[0]+5,r=n[0]>>>13,n[0]&=8191;for(let e=1;e<10;e++)n[e]=t[e]+r,r=n[e]>>>13,n[e]&=8191;n[9]-=8192;let o=(1^r)-1;for(let t=0;t<10;t++)n[t]&=o;o=~o;for(let e=0;e<10;e++)t[e]=t[e]&o|n[e];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let i=t[0]+e[0];t[0]=65535&i;for(let n=1;n<8;n++)i=(t[n]+e[n]|0)+(i>>>16)|0,t[n]=65535&i;Jn(n)}update(t){Zn(this),Gn(t=er(t));const{buffer:e,blockLen:n}=this,r=t.length;for(let o=0;o<r;){const i=Math.min(n-this.pos,r-o);if(i!==n)e.set(t.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===n&&(this.process(e,0,!1),this.pos=0);else for(;n<=r-o;o+=n)this.process(t,o)}return this}destroy(){Jn(this.h,this.r,this.buffer,this.pad)}digestInto(t){Zn(this),Wn(t,this),this.finished=!0;const{buffer:e,h:n}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let o=0;for(let e=0;e<8;e++)t[o++]=n[e]>>>0,t[o++]=n[e]>>>8;return t}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}}const vr=(function(t){const e=(e,n)=>t(n).update(er(e)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e})((t=>new Er(t)));const xr=(function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:i,rounds:s}=nr({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if("function"!=typeof t)throw new Error("core must be a function");return zn(o),zn(s),Kn(i),Kn(n),(e,f,c,a,u=0)=>{Gn(e),Gn(f),Gn(c);const l=c.length;if(void 0===a&&(a=new Uint8Array(l)),Gn(a),zn(u),u<0||u>=yr)throw new Error("arx: counter overflow");if(a.length<l)throw new Error(`arx: output (${a.length}) is shorter than data (${l})`);const h=[];let d,p,g=e.length;if(32===g)h.push(d=cr(e)),p=dr;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);d=new Uint8Array(32),d.set(e),d.set(e,16),p=hr,h.push(d)}gr(f)||h.push(f=cr(f));const y=Yn(d);if(r){if(24!==f.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,y,Yn(f.subarray(0,16)),y),f=f.subarray(16)}const m=16-o;if(m!==f.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){const t=new Uint8Array(12);t.set(f,i?0:12-f.length),f=t,h.push(f)}const b=Yn(f);return br(t,p,y,b,c,a,u,s),Jn(...h),a}})((function(t,e,n,r,o,i=20){let s=t[0],f=t[1],c=t[2],a=t[3],u=e[0],l=e[1],h=e[2],d=e[3],p=e[4],g=e[5],y=e[6],m=e[7],b=o,w=n[0],E=n[1],v=n[2],x=s,I=f,O=c,A=a,B=u,S=l,N=h,U=d,R=p,T=g,P=y,C=m,L=b,k=w,j=E,D=v;for(let t=0;t<i;t+=2)x=x+B|0,L=pr(L^x,16),R=R+L|0,B=pr(B^R,12),x=x+B|0,L=pr(L^x,8),R=R+L|0,B=pr(B^R,7),I=I+S|0,k=pr(k^I,16),T=T+k|0,S=pr(S^T,12),I=I+S|0,k=pr(k^I,8),T=T+k|0,S=pr(S^T,7),O=O+N|0,j=pr(j^O,16),P=P+j|0,N=pr(N^P,12),O=O+N|0,j=pr(j^O,8),P=P+j|0,N=pr(N^P,7),A=A+U|0,D=pr(D^A,16),C=C+D|0,U=pr(U^C,12),A=A+U|0,D=pr(D^A,8),C=C+D|0,U=pr(U^C,7),x=x+S|0,D=pr(D^x,16),P=P+D|0,S=pr(S^P,12),x=x+S|0,D=pr(D^x,8),P=P+D|0,S=pr(S^P,7),I=I+N|0,L=pr(L^I,16),C=C+L|0,N=pr(N^C,12),I=I+N|0,L=pr(L^I,8),C=C+L|0,N=pr(N^C,7),O=O+U|0,k=pr(k^O,16),R=R+k|0,U=pr(U^R,12),O=O+U|0,k=pr(k^O,8),R=R+k|0,U=pr(U^R,7),A=A+B|0,j=pr(j^A,16),T=T+j|0,B=pr(B^T,12),A=A+B|0,j=pr(j^A,8),T=T+j|0,B=pr(B^T,7);let _=0;r[_++]=s+x|0,r[_++]=f+I|0,r[_++]=c+O|0,r[_++]=a+A|0,r[_++]=u+B|0,r[_++]=l+S|0,r[_++]=h+N|0,r[_++]=d+U|0,r[_++]=p+R|0,r[_++]=g+T|0,r[_++]=y+P|0,r[_++]=m+C|0,r[_++]=b+L|0,r[_++]=w+k|0,r[_++]=E+j|0,r[_++]=v+D|0}),{counterRight:!1,counterLength:4,allowShortKeys:!1}),Ir=new Uint8Array(16),Or=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Ir.subarray(n))},Ar=new Uint8Array(32);function Br(t,e,n,r,o){const i=t(e,n,Ar),s=vr.create(i);o&&Or(s,o),Or(s,r);const f=sr(r.length,o?o.length:0,!0);s.update(f);const c=s.digest();return Jn(i,f),c}const Sr=((t,e)=>{function n(n,...r){if(Gn(n),!Qn)throw new Error("Non little-endian hardware is not yet supported");if(void 0!==t.nonceLength){const e=r[0];if(!e)throw new Error("nonce / iv required");t.varSizeNonce?Gn(e):Gn(e,t.nonceLength)}const o=t.tagLength;o&&void 0!==r[1]&&Gn(r[1]);const i=e(n,...r),s=(t,e)=>{if(void 0!==e){if(2!==t)throw new Error("cipher output not supported");Gn(e)}};let f=!1;return{encrypt(t,e){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,Gn(t),s(i.encrypt.length,e),i.encrypt(t,e)},decrypt(t,e){if(Gn(t),o&&t.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return s(i.decrypt.length,e),i.decrypt(t,e)}}}return Object.assign(n,t),n})({blockSize:64,nonceLength:12,tagLength:16},(t=>(e,n,r)=>({encrypt(o,i){const s=o.length;(i=or(s+16,i,!1)).set(o);const f=i.subarray(0,-16);t(e,n,f,f,1);const c=Br(t,e,n,f,r);return i.set(c,s),Jn(c),i},decrypt(o,i){i=or(o.length-16,i,!1);const s=o.subarray(0,-16),f=o.subarray(-16),c=Br(t,e,n,s,r);if(!rr(f,c))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),t(e,n,i,i,1),Jn(c),i}}))(xr));class Nr extends ie{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Lt(t);const n=re(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?t.create().update(n).digest():n);for(let t=0;t<o.length;t++)o[t]^=54;this.iHash.update(o),this.oHash=t.create();for(let t=0;t<o.length;t++)o[t]^=106;this.oHash.update(o),_t(o)}update(t){return kt(this),this.iHash.update(t),this}digestInto(t){kt(this),Ct(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ur=(t,e,n)=>new Nr(t,e).update(n).digest();function Rr(t,e,n){return Lt(t),void 0===n&&(n=new Uint8Array(t.outputLen)),Ur(t,re(n),re(e))}Ur.create=(t,e)=>new Nr(t,e);const Tr=Uint8Array.from([0]),Pr=Uint8Array.of();function Cr(t,e,n,r=32){Lt(t),Pt(r);const o=t.outputLen;if(r>255*o)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/o);void 0===n&&(n=Pr);const s=new Uint8Array(i*o),f=Ur.create(t,e),c=f._cloneInto(),a=new Uint8Array(f.outputLen);for(let t=0;t<i;t++)Tr[0]=t+1,c.update(0===t?Pr:a).update(n).update(Tr).digestInto(a),s.set(a,o*t),f._cloneInto(c);return f.destroy(),c.destroy(),_t(a,Tr),s.slice(0,r)}const Lr=(t,e,n,r,o)=>Cr(t,Rr(t,e,n),r,o),kr=Ge,jr=BigInt(0),Dr=BigInt(1);function _r(t,e){if("boolean"!=typeof e)throw new Error(t+" boolean expected, got "+e)}function $r(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function Fr(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?jr:BigInt("0x"+t)}function Vr(t){return Fr(Gt(t))}function Hr(t){return Ct(t),Fr(Gt(Uint8Array.from(t).reverse()))}function Mr(t,e){return ee(t.toString(16).padStart(2*e,"0"))}function qr(t,e){return Mr(t,e).reverse()}function Kr(t,e,n){let r;if("string"==typeof e)try{r=ee(e)}catch(e){throw new Error(t+" must be hex string or Uint8Array, cause: "+e)}else{if(!Tt(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}const zr=t=>"bigint"==typeof t&&jr<=t;function Gr(t,e,n){return zr(t)&&zr(e)&&zr(n)&&e<=t&&t<n}function Zr(t,e,n,r){if(!Gr(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Wr(t){let e;for(e=0;t>jr;t>>=Dr,e+=1);return e}const Yr=t=>(Dr<<BigInt(t))-Dr;function Jr(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=t=>new Uint8Array(t),o=t=>Uint8Array.of(t);let i=r(t),s=r(t),f=0;const c=()=>{i.fill(1),s.fill(0),f=0},a=(...t)=>n(s,i,...t),u=(t=r(0))=>{s=a(o(0),t),i=a(),0!==t.length&&(s=a(o(1),t),i=a())},l=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){i=a();const e=i.slice();n.push(e),t+=i.length}return oe(...n)};return(t,e)=>{let n;for(c(),u(t);!(n=e(l()));)u();return c(),n}}function Xr(t,e,n={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(e,n,r){const o=t[e];if(r&&void 0===o)return;const i=typeof o;if(i!==n||null===o)throw new Error(`param "${e}" is invalid: expected ${n}, got ${i}`)}Object.entries(e).forEach((([t,e])=>r(t,e,!1))),Object.entries(n).forEach((([t,e])=>r(t,e,!0)))}function Qr(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(void 0!==o)return o;const i=t(n,...r);return e.set(n,i),i}}const to=BigInt(0),eo=BigInt(1),no=BigInt(2),ro=BigInt(3),oo=BigInt(4),io=BigInt(5),so=BigInt(8);function fo(t,e){const n=t%e;return n>=to?n:e+n}function co(t,e,n){let r=t;for(;e-- >to;)r*=r,r%=n;return r}function ao(t,e){if(t===to)throw new Error("invert: expected non-zero number");if(e<=to)throw new Error("invert: expected positive modulus, got "+e);let n=fo(t,e),r=e,o=to,i=eo;for(;n!==to;){const t=r%n,e=o-i*(r/n);r=n,n=t,o=i,i=e}if(r!==eo)throw new Error("invert: does not exist");return fo(o,e)}function uo(t,e){const n=(t.ORDER+eo)/oo,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function lo(t,e){const n=(t.ORDER-io)/so,r=t.mul(e,no),o=t.pow(r,n),i=t.mul(e,o),s=t.mul(t.mul(i,no),o),f=t.mul(i,t.sub(s,t.ONE));if(!t.eql(t.sqr(f),e))throw new Error("Cannot find square root");return f}function ho(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-eo,n=0;for(;e%no===to;)e/=no,n++;let r=no;const o=vo(t);for(;1===wo(o,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return uo;let i=o.pow(r,e);const s=(e+eo)/no;return function(t,r){if(t.is0(r))return r;if(1!==wo(t,r))throw new Error("Cannot find square root");let o=n,f=t.mul(t.ONE,i),c=t.pow(r,e),a=t.pow(r,s);for(;!t.eql(c,t.ONE);){if(t.is0(c))return t.ZERO;let e=1,n=t.sqr(c);for(;!t.eql(n,t.ONE);)if(e++,n=t.sqr(n),e===o)throw new Error("Cannot find square root");const r=eo<<BigInt(o-e-1),i=t.pow(f,r);o=e,f=t.sqr(i),c=t.mul(c,f),a=t.mul(a,i)}return a}}function po(t){return t%oo===ro?uo:t%so===io?lo:ho(t)}const go=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yo(t){return Xr(t,go.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),t}function mo(t,e,n){if(n<to)throw new Error("invalid exponent, negatives unsupported");if(n===to)return t.ONE;if(n===eo)return e;let r=t.ONE,o=e;for(;n>to;)n&eo&&(r=t.mul(r,o)),o=t.sqr(o),n>>=eo;return r}function bo(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce(((e,n,o)=>t.is0(n)?e:(r[o]=e,t.mul(e,n))),t.ONE),i=t.inv(o);return e.reduceRight(((e,n,o)=>t.is0(n)?e:(r[o]=t.mul(e,r[o]),t.mul(e,n))),i),r}function wo(t,e){const n=(t.ORDER-eo)/no,r=t.pow(e,n),o=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),s=t.eql(r,t.neg(t.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Eo(t,e){void 0!==e&&Pt(e);const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function vo(t,e,n=!1,r={}){if(t<=to)throw new Error("invalid field: expected ORDER > 0, got "+t);let o,i;if("object"==typeof e&&null!=e){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(o=t.BITS),t.sqrt&&(i=t.sqrt),"boolean"==typeof t.isLE&&(n=t.isLE)}else"number"==typeof e&&(o=e),r.sqrt&&(i=r.sqrt);const{nBitLength:s,nByteLength:f}=Eo(t,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:f,MASK:Yr(s),ZERO:to,ONE:eo,create:e=>fo(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return to<=e&&e<t},is0:t=>t===to,isValidNot0:t=>!a.is0(t)&&a.isValid(t),isOdd:t=>(t&eo)===eo,neg:e=>fo(-e,t),eql:(t,e)=>t===e,sqr:e=>fo(e*e,t),add:(e,n)=>fo(e+n,t),sub:(e,n)=>fo(e-n,t),mul:(e,n)=>fo(e*n,t),pow:(t,e)=>mo(a,t,e),div:(e,n)=>fo(e*ao(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>ao(e,t),sqrt:i||(e=>(c||(c=po(t)),c(a,e))),toBytes:t=>n?qr(t,f):Mr(t,f),fromBytes:t=>{if(t.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+t.length);return n?Hr(t):Vr(t)},invertBatch:t=>bo(a,t),cmov:(t,e,n)=>n?e:t});return Object.freeze(a)}function xo(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Io(t){const e=xo(t);return e+Math.ceil(e/2)}function Oo(t,e,n=!1){const r=t.length,o=xo(e),i=Io(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=fo(n?Hr(t):Vr(t),e-eo)+eo;return n?qr(s,o):Mr(s,o)}const Ao=BigInt(0),Bo=BigInt(1);function So(t,e){const n=e.negate();return t?n:e}function No(t,e,n){const r="pz"===e?t=>t.pz:t=>t.ez,o=bo(t.Fp,n.map(r));return n.map(((t,e)=>t.toAffine(o[e]))).map(t.fromAffine)}function Uo(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ro(t,e){Uo(t,e);const n=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:Yr(t),maxNumber:n,shiftBy:BigInt(t)}}function To(t,e,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:s}=n;let f=Number(t&o),c=t>>s;f>r&&(f-=i,c+=Bo);const a=e*r;return{nextN:c,offset:a+Math.abs(f)-1,isZero:0===f,isNeg:f<0,isNegF:e%2!=0,offsetF:a}}function Po(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach(((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)}))}function Co(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach(((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)}))}const Lo=new WeakMap,ko=new WeakMap;function jo(t){return ko.get(t)||1}function Do(t){if(t!==Ao)throw new Error("invalid wNAF")}function _o(t,e){return{constTimeNegate:So,hasPrecomputes:t=>1!==jo(t),unsafeLadder(e,n,r=t.ZERO){let o=e;for(;n>Ao;)n&Bo&&(r=r.add(o)),o=o.double(),n>>=Bo;return r},precomputeWindow(t,n){const{windows:r,windowSize:o}=Ro(n,e),i=[];let s=t,f=s;for(let t=0;t<r;t++){f=s,i.push(f);for(let t=1;t<o;t++)f=f.add(s),i.push(f);s=f.double()}return i},wNAF(n,r,o){let i=t.ZERO,s=t.BASE;const f=Ro(n,e);for(let t=0;t<f.windows;t++){const{nextN:e,offset:n,isZero:c,isNeg:a,isNegF:u,offsetF:l}=To(o,t,f);o=e,c?s=s.add(So(u,r[l])):i=i.add(So(a,r[n]))}return Do(o),{p:i,f:s}},wNAFUnsafe(n,r,o,i=t.ZERO){const s=Ro(n,e);for(let t=0;t<s.windows&&o!==Ao;t++){const{nextN:e,offset:n,isZero:f,isNeg:c}=To(o,t,s);if(o=e,!f){const t=r[n];i=i.add(c?t.negate():t)}}return Do(o),i},getPrecomputes(t,e,n){let r=Lo.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&("function"==typeof n&&(r=n(r)),Lo.set(e,r))),r},wNAFCached(t,e,n){const r=jo(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)},wNAFCachedUnsafe(t,e,n,r){const o=jo(t);return 1===o?this.unsafeLadder(t,e,r):this.wNAFUnsafe(o,this.getPrecomputes(o,t,n),e,r)},setWindowSize(t,n){Uo(n,e),ko.set(t,n),Lo.delete(t)}}}function $o(t,e,n,r){let o=e,i=t.ZERO,s=t.ZERO;for(;n>Ao||r>Ao;)n&Bo&&(i=i.add(o)),r&Bo&&(s=s.add(o)),o=o.double(),n>>=Bo,r>>=Bo;return{p1:i,p2:s}}function Fo(t,e,n,r){Po(n,t),Co(r,e);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,f=Wr(BigInt(o));let c=1;f>12?c=f-3:f>4?c=f-2:f>0&&(c=2);const a=Yr(c),u=new Array(Number(a)+1).fill(s);let l=s;for(let t=Math.floor((e.BITS-1)/c)*c;t>=0;t-=c){u.fill(s);for(let e=0;e<i;e++){const o=r[e],i=Number(o>>BigInt(t)&a);u[i]=u[i].add(n[e])}let e=s;for(let t=u.length-1,n=s;t>0;t--)n=n.add(u[t]),e=e.add(n);if(l=l.add(e),0!==t)for(let t=0;t<c;t++)l=l.double()}return l}function Vo(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yo(e),e}return vo(t)}function Ho(t,e,n={}){if(!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const t of["p","n","h"]){const n=e[t];if(!("bigint"==typeof n&&n>Ao))throw new Error(`CURVE.${t} must be positive bigint`)}const r=Vo(e.p,n.Fp),o=Vo(e.n,n.Fn),i=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const t of i)if(!r.isValid(e[t]))throw new Error(`CURVE.${t} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:o}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Mo=BigInt(0),qo=BigInt(1),Ko=BigInt(2);function zo(t){return Xr(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Go(t){const e=zo(t),{P:n,type:r,adjustScalarBytes:o,powPminus2:i,randomBytes:s}=e,f="x25519"===r;if(!f&&"x448"!==r)throw new Error("invalid type");const c=s||fe,a=f?255:448,u=f?32:56,l=BigInt(f?9:5),h=BigInt(f?121665:39081),d=f?Ko**BigInt(254):Ko**BigInt(447),p=f?BigInt(8)*Ko**BigInt(251)-qo:BigInt(4)*Ko**BigInt(445)-qo,g=d+p+qo,y=t=>fo(t,n),m=b(l);function b(t){return qr(y(t),u)}function w(t){const e=Kr("u coordinate",t,u);return f&&(e[31]&=127),y(Hr(e))}function E(t){return Hr(o(Kr("scalar",t,u)))}function v(t,e){const n=O(w(e),E(t));if(n===Mo)throw new Error("invalid private or public key received");return b(n)}function x(t){return v(t,m)}function I(t,e,n){const r=y(t*(e-n));return{x_2:e=y(e-r),x_3:n=y(n+r)}}function O(t,e){Zr("u",t,Mo,n),Zr("scalar",e,d,g);const r=e,o=t;let s=qo,f=Mo,c=t,u=qo,l=Mo;for(let t=BigInt(a-1);t>=Mo;t--){const e=r>>t&qo;l^=e,({x_2:s,x_3:c}=I(l,s,c)),({x_2:f,x_3:u}=I(l,f,u)),l=e;const n=s+f,i=y(n*n),a=s-f,d=y(a*a),p=i-d,g=c+u,m=y((c-u)*n),b=y(g*a),w=m+b,E=m-b;c=y(w*w),u=y(o*y(E*E)),s=y(i*d),f=y(p*(i+y(h*p)))}({x_2:s,x_3:c}=I(l,s,c)),({x_2:f,x_3:u}=I(l,f,u));const p=i(f);return y(s*p)}return{scalarMult:v,scalarMultBase:x,getSharedSecret:(t,e)=>v(t,e),getPublicKey:t=>x(t),utils:{randomPrivateKey:()=>c(u)},GuBytes:m.slice()}}BigInt(0);const Zo=BigInt(1),Wo=BigInt(2),Yo=BigInt(3),Jo=BigInt(5),Xo=BigInt(8),Qo={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Xo,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function ti(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=Qo.p,s=t*t%i*t%i,f=co(s,Wo,i)*s%i,c=co(f,Zo,i)*t%i,a=co(c,Jo,i)*c%i,u=co(a,e,i)*a%i,l=co(u,n,i)*u%i,h=co(l,r,i)*l%i,d=co(h,o,i)*h%i,p=co(d,o,i)*h%i,g=co(p,e,i)*a%i;return{pow_p_5_8:co(g,Wo,i)*t%i,b2:s}}function ei(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ni=(()=>{const t=Qo.p;return Go({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=ti(e);return fo(co(n,Yo,t)*r,t)},adjustScalarBytes:ei})})();function ri(t){void 0!==t.lowS&&_r("lowS",t.lowS),void 0!==t.prehash&&_r("prehash",t.prehash)}class oi extends Error{constructor(t=""){super(t)}}const ii={Err:oi,_tlv:{encode:(t,e)=>{const{Err:n}=ii;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=$r(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?$r(o.length/2|128):"";return $r(t)+i+o+e},decode(t,e){const{Err:n}=ii;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++];let i=0;if(!!(128&o)){const t=127&o;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const s=e.subarray(r,r+t);if(s.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of s)i=i<<8|t;if(r+=t,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=o;const s=e.subarray(r,r+i);if(s.length!==i)throw new n("tlv.decode: wrong value length");return{v:s,l:e.subarray(r+i)}}},_int:{encode(t){const{Err:e}=ii;if(t<si)throw new e("integer: negative integers are not allowed");let n=$r(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ii;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return Vr(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ii,o=Kr("signature",t),{v:i,l:s}=r.decode(48,o);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:c}=r.decode(2,i),{v:a,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(a)}},hexFromSig(t){const{_tlv:e,_int:n}=ii,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},si=BigInt(0),fi=BigInt(1),ci=BigInt(2),ai=BigInt(3),ui=BigInt(4);function li(t,e,n){return function(r){const o=t.sqr(r),i=t.mul(o,r);return t.add(t.add(i,t.mul(r,e)),n)}}function hi(t,e,n){const{BYTES:r}=t;return function(o){let i;if("bigint"==typeof o)i=o;else{let n=Kr("private key",o);if(e){if(!e.includes(2*n.length))throw new Error("invalid private key");const t=new Uint8Array(r);t.set(n,t.length-n.length),n=t}try{i=t.fromBytes(n)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof o}`)}}if(n&&(i=t.create(i)),!t.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}}function di(t,e={}){const{Fp:n,Fn:r}=Ho("weierstrass",t,e),{h:o,n:i}=t;Xr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:s}=e;if(s&&(!n.is0(t.a)||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const c=e.toBytes||function(t,e,r){const{x:o,y:i}=e.toAffine(),s=n.toBytes(o);if(_r("isCompressed",r),r){f();return oe(pi(!n.isOdd(i)),s)}return oe(Uint8Array.of(4),s,n.toBytes(i))},a=e.fromBytes||function(t){Ct(t);const e=n.BYTES,r=e+1,o=2*e+1,i=t.length,s=t[0],c=t.subarray(1);if(i!==r||2!==s&&3!==s){if(i===o&&4===s){const t=n.fromBytes(c.subarray(0*e,1*e)),r=n.fromBytes(c.subarray(1*e,2*e));if(!l(t,r))throw new Error("bad point: is not on curve");return{x:t,y:r}}throw new Error(`bad point: got length ${i}, expected compressed=${r} or uncompressed=${o}`)}{const t=n.fromBytes(c);if(!n.isValid(t))throw new Error("bad point: is not on curve, wrong x");const e=u(t);let r;try{r=n.sqrt(e)}catch(t){const e=t instanceof Error?": "+t.message:"";throw new Error("bad point: is not on curve, sqrt error"+e)}f();return!(1&~s)!==n.isOdd(r)&&(r=n.neg(r)),{x:t,y:r}}},u=li(n,t.a,t.b);function l(t,e){const r=n.sqr(e),o=u(t);return n.eql(r,o)}if(!l(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const h=n.mul(n.pow(t.a,ai),ui),d=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(h,d)))throw new Error("bad curve params: a or b");function p(t,e,r=!1){if(!n.isValid(e)||r&&n.is0(e))throw new Error(`bad point coordinate ${t}`);return e}function g(t){if(!(t instanceof w))throw new Error("ProjectivePoint expected")}const y=Qr(((t,e)=>{const{px:r,py:o,pz:i}=t;if(n.eql(i,n.ONE))return{x:r,y:o};const s=t.is0();null==e&&(e=s?n.ONE:n.inv(i));const f=n.mul(r,e),c=n.mul(o,e),a=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(a,n.ONE))throw new Error("invZ was invalid");return{x:f,y:c}})),m=Qr((t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=t.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not field elements");if(!l(r,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));function b(t,e,r,o,i){return r=new w(n.mul(r.px,t),r.py,r.pz),e=So(o,e),r=So(i,r),e.add(r)}class w{constructor(t,e,n){this.px=p("x",t),this.py=p("y",e,!0),this.pz=p("z",n),Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof w)throw new Error("projective point not allowed");return n.is0(e)&&n.is0(r)?w.ZERO:new w(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){return No(w,"pz",t)}static fromBytes(t){return Ct(t),w.fromHex(t)}static fromHex(t){const e=w.fromAffine(a(Kr("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){const n=hi(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return w.BASE.multiply(n(t))}static msm(t,e){return Fo(w,r,t,e)}precompute(t=8,e=!0){return v.setWindowSize(this,t),e||this.multiply(ai),this}_setWindowSize(t){this.precompute(t)}assertValidity(){m(this)}hasEvenY(){const{y:t}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(t)}equals(t){g(t);const{px:e,py:r,pz:o}=this,{px:i,py:s,pz:f}=t,c=n.eql(n.mul(e,f),n.mul(i,o)),a=n.eql(n.mul(r,f),n.mul(s,o));return c&&a}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,ai),{px:i,py:s,pz:f}=this;let c=n.ZERO,a=n.ZERO,u=n.ZERO,l=n.mul(i,i),h=n.mul(s,s),d=n.mul(f,f),p=n.mul(i,s);return p=n.add(p,p),u=n.mul(i,f),u=n.add(u,u),c=n.mul(e,u),a=n.mul(o,d),a=n.add(c,a),c=n.sub(h,a),a=n.add(h,a),a=n.mul(c,a),c=n.mul(p,c),u=n.mul(o,u),d=n.mul(e,d),p=n.sub(l,d),p=n.mul(e,p),p=n.add(p,u),u=n.add(l,l),l=n.add(u,l),l=n.add(l,d),l=n.mul(l,p),a=n.add(a,l),d=n.mul(s,f),d=n.add(d,d),l=n.mul(d,p),c=n.sub(c,l),u=n.mul(d,h),u=n.add(u,u),u=n.add(u,u),new w(c,a,u)}add(e){g(e);const{px:r,py:o,pz:i}=this,{px:s,py:f,pz:c}=e;let a=n.ZERO,u=n.ZERO,l=n.ZERO;const h=t.a,d=n.mul(t.b,ai);let p=n.mul(r,s),y=n.mul(o,f),m=n.mul(i,c),b=n.add(r,o),E=n.add(s,f);b=n.mul(b,E),E=n.add(p,y),b=n.sub(b,E),E=n.add(r,i);let v=n.add(s,c);return E=n.mul(E,v),v=n.add(p,m),E=n.sub(E,v),v=n.add(o,i),a=n.add(f,c),v=n.mul(v,a),a=n.add(y,m),v=n.sub(v,a),l=n.mul(h,E),a=n.mul(d,m),l=n.add(a,l),a=n.sub(y,l),l=n.add(y,l),u=n.mul(a,l),y=n.add(p,p),y=n.add(y,p),m=n.mul(h,m),E=n.mul(d,E),y=n.add(y,m),m=n.sub(p,m),m=n.mul(h,m),E=n.add(E,m),p=n.mul(y,E),u=n.add(u,p),p=n.mul(v,E),a=n.mul(b,a),a=n.sub(a,p),p=n.mul(b,y),l=n.mul(v,l),l=n.add(l,p),new w(a,u,l)}subtract(t){return this.add(t.negate())}is0(){return this.equals(w.ZERO)}multiply(t){const{endo:n}=e;if(!r.isValidNot0(t))throw new Error("invalid scalar: out of range");let o,i;const s=t=>v.wNAFCached(this,t,w.normalizeZ);if(n){const{k1neg:e,k1:r,k2neg:f,k2:c}=n.splitScalar(t),{p:a,f:u}=s(r),{p:l,f:h}=s(c);i=u.add(h),o=b(n.beta,a,l,e,f)}else{const{p:e,f:n}=s(t);o=e,i=n}return w.normalizeZ([o,i])[0]}multiplyUnsafe(t){const{endo:n}=e,o=this;if(!r.isValid(t))throw new Error("invalid scalar: out of range");if(t===si||o.is0())return w.ZERO;if(t===fi)return o;if(v.hasPrecomputes(this))return this.multiply(t);if(n){const{k1neg:e,k1:r,k2neg:i,k2:s}=n.splitScalar(t),{p1:f,p2:c}=$o(w,o,r,s);return b(n.beta,f,c,e,i)}return v.wNAFCachedUnsafe(o,t)}multiplyAndAddUnsafe(t,e,n){const r=this.multiplyUnsafe(e).add(t.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(t){return y(this,t)}isTorsionFree(){const{isTorsionFree:t}=e;return o===fi||(t?t(w,this):v.wNAFCachedUnsafe(this,i).is0())}clearCofactor(){const{clearCofactor:t}=e;return o===fi?this:t?t(w,this):this.multiplyUnsafe(o)}toBytes(t=!0){return _r("isCompressed",t),this.assertValidity(),c(w,this,t)}toRawBytes(t=!0){return this.toBytes(t)}toHex(t=!0){return Gt(this.toBytes(t))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO),w.Fp=n,w.Fn=r;const E=r.BITS,v=_o(w,e.endo?Math.ceil(E/2):E);return w}function pi(t){return Uint8Array.of(t?2:3)}function gi(t,e,n={}){Xr(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||fe,o=e.hmac||((t,...n)=>Ur(e.hash,t,oe(...n))),{Fp:i,Fn:s}=t,{ORDER:f,BITS:c}=s;function a(t){return t>f>>fi}function u(t){return a(t)?s.neg(t):t}function l(t,e){if(!s.isValidNot0(e))throw new Error(`invalid signature ${t}: out of range 1..CURVE.n`)}class h{constructor(t,e,n){l("r",t),l("s",e),this.r=t,this.s=e,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(t){const e=s.BYTES,n=Kr("compactSignature",t,2*e);return new h(s.fromBytes(n.subarray(0,e)),s.fromBytes(n.subarray(e,2*e)))}static fromDER(t){const{r:e,s:n}=ii.toSig(Kr("DER",t));return new h(e,n)}assertValidity(){}addRecoveryBit(t){return new h(this.r,this.s,t)}recoverPublicKey(e){const n=i.ORDER,{r:r,s:o,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(f*ci<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const a=2===c||3===c?r+f:r;if(!i.isValid(a))throw new Error("recovery id 2 or 3 invalid");const u=i.toBytes(a),l=t.fromHex(oe(pi(!(1&c)),u)),h=s.inv(a),d=m(Kr("msgHash",e)),p=s.create(-d*h),g=s.create(o*h),y=t.BASE.multiplyUnsafe(p).add(l.multiplyUnsafe(g));if(y.is0())throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return a(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,s.neg(this.s),this.recovery):this}toBytes(t){if("compact"===t)return oe(s.toBytes(this.r),s.toBytes(this.s));if("der"===t)return ee(ii.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Gt(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Gt(this.toBytes("compact"))}}const d=hi(s,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(t){try{return d(t),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const t=f;return Oo(r(Io(t)),t)},precompute:(e=8,n=t.BASE)=>n.precompute(e,!1)};function g(e){if("bigint"==typeof e)return!1;if(e instanceof t)return!0;const r=Kr("key",e).length,o=i.BYTES,f=o+1,c=2*o+1;return n.allowedPrivateKeyLengths||s.BYTES===f?void 0:r===f||r===c}const y=e.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=Vr(t),n=8*t.length-c;return n>0?e>>BigInt(n):e},m=e.bits2int_modN||function(t){return s.create(y(t))},b=Yr(c);function w(t){return Zr("num < 2^"+c,t,si,b),s.toBytes(t)}function E(n,o,f=v){if(["recovered","canonical"].some((t=>t in f)))throw new Error("sign() legacy options not supported");const{hash:c}=e;let{lowS:l,prehash:p,extraEntropy:g}=f;null==l&&(l=!0),n=Kr("msgHash",n),ri(f),p&&(n=Kr("prehashed msgHash",c(n)));const b=m(n),E=d(o),x=[w(E),w(b)];if(null!=g&&!1!==g){const t=!0===g?r(i.BYTES):g;x.push(Kr("extraEntropy",t))}const I=oe(...x),O=b;return{seed:I,k2sig:function(e){const n=y(e);if(!s.isValidNot0(n))return;const r=s.inv(n),o=t.BASE.multiply(n).toAffine(),i=s.create(o.x);if(i===si)return;const f=s.create(r*s.create(O+i*E));if(f===si)return;let c=(o.x===i?0:2)|Number(o.y&fi),d=f;return l&&a(f)&&(d=u(f),c^=1),new h(i,d,c)}}}const v={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};return t.BASE.precompute(8),Object.freeze({getPublicKey:function(e,n=!0){return t.fromPrivateKey(e).toBytes(n)},getSharedSecret:function(e,n,r=!0){if(!0===g(e))throw new Error("first arg must be private key");if(!1===g(n))throw new Error("second arg must be public key");return t.fromHex(n).multiply(d(e)).toBytes(r)},sign:function(t,n,r=v){const{seed:i,k2sig:f}=E(t,n,r);return Jr(e.hash.outputLen,s.BYTES,o)(i,f)},verify:function(n,r,o,i=x){const f=n;r=Kr("msgHash",r),o=Kr("publicKey",o),ri(i);const{lowS:c,prehash:a,format:u}=i;if("strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==u&&!["compact","der","js"].includes(u))throw new Error('format must be "compact", "der" or "js"');const l="string"==typeof f||Tt(f),d=!l&&!u&&"object"==typeof f&&null!==f&&"bigint"==typeof f.r&&"bigint"==typeof f.s;if(!l&&!d)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,g;try{if(d){if(void 0!==u&&"js"!==u)throw new Error("invalid format");p=new h(f.r,f.s)}if(l){try{"compact"!==u&&(p=h.fromDER(f))}catch(t){if(!(t instanceof ii.Err))throw t}!p&&"der"!==u&&(p=h.fromCompact(f))}g=t.fromHex(o)}catch{return!1}if(!p||c&&p.hasHighS())return!1;a&&(r=e.hash(r));const{r:y,s:b}=p,w=m(r),E=s.inv(b),v=s.create(w*E),I=s.create(y*E),O=t.BASE.multiplyUnsafe(v).add(g.multiplyUnsafe(I));return!O.is0()&&s.create(O.x)===y},utils:p,Point:t,Signature:h})}function yi(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy};return{CURVE:e,curveOpts:{Fp:t.Fp,Fn:vo(e.n,t.nBitLength),allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes}}}function mi(t){const{CURVE:e,curveOpts:n}=yi(t);return{CURVE:e,curveOpts:n,ecdsaOpts:{hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN}}}function bi(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function wi(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=mi(t);return bi(t,gi(di(e,n),r,n))}function Ei(t,e){const n=e=>wi({...t,hash:e});return{...n(e),create:n}}const vi={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},xi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Ii={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Oi=vo(vi.p),Ai=vo(xi.p),Bi=vo(Ii.p),Si=Ei({...vi,Fp:Oi,lowS:!1},Ge);Ei({...xi,Fp:Ai,lowS:!1},We),Ei({...Ii,Fp:Bi,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Ze);const Ni=Si,Ui=_e2.BASE10="base10",Ri=_e2.BASE16="base16",Ti=_e2.BASE64="base64pad",Pi=_e2.BASE64URL="base64url",Ci=_e2.UTF8="utf8",Li=_e2.TYPE_0=0,ki=_e2.TYPE_1=1,ji=_e2.TYPE_2=2,Di=0,_i=1,$i=12,Fi=32;function Vi(t){return(0,u.fromString)(`${t}`,Ui)}function Hi(t){return Number((0,u.toString)(t,Ui))}function Mi(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function qi(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Ki(t){if(Hi(t.type)===ji)return(0,u.toString)((0,u.concat)([t.type,t.sealed]),Ti);if(Hi(t.type)===ki){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,u.toString)((0,u.concat)([t.type,t.senderPublicKey,t.iv,t.sealed]),Ti)}return(0,u.toString)((0,u.concat)([t.type,t.iv,t.sealed]),Ti)}function zi(t){const e=(t.encoding||Ti)===Pi?qi(t.encoded):t.encoded,n=(0,u.fromString)(e,Ti),r=n.slice(Di,_i),o=_i;if(Hi(r)===ki){const t=33,e=45,i=n.slice(o,t),s=n.slice(t,e);return{type:r,sealed:n.slice(e),iv:s,senderPublicKey:i}}if(Hi(r)===ji){return{type:r,sealed:n.slice(o),iv:fe($i)}}const i=n.slice(o,13);return{type:r,sealed:n.slice(13),iv:i}}function Gi(t){const e=t?.type||Li;if(e===ki){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Zi(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return(0,u.concat)([new Uint8Array([4]),e,n])}const Wi=_e2.RELAYER_DEFAULT_PROTOCOL="irn";function Yi(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach((e=>{if(e.startsWith(r)){const o=e.replace(r,""),i=t[e];n[o]=i}})),n}function Ji(t){return t.startsWith("//")?t.substring(2):t}function Xi(t,e="-"){const n={};return Object.keys(t).forEach((r=>{const o=r,i="relay"+e+o;t[o]&&(n[i]=t[o])})),n}var Qi=Object.defineProperty,ts=Object.defineProperties,es=Object.getOwnPropertyDescriptors,ns=Object.getOwnPropertySymbols,rs=Object.prototype.hasOwnProperty,os=Object.prototype.propertyIsEnumerable,is=(t,e,n)=>e in t?Qi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ss=(t,e)=>{for(var n in e||(e={}))rs.call(e,n)&&is(t,n,e[n]);if(ns)for(var n of ns(e))os.call(e,n)&&is(t,n,e[n]);return t},fs=(t,e)=>ts(t,es(e));function cs(t){const e=[];return t.forEach((t=>{const[n,r]=t.split(":");e.push(`${n}:${r}`)})),e}function as(t){const e=[];return Object.values(t).forEach((t=>{e.push(...cs(t.accounts))})),e}function us(t,e){const n=[];return Object.values(t).forEach((t=>{cs(t.accounts).includes(e)&&n.push(...t.methods)})),n}function ls(t,e){const n=[];return Object.values(t).forEach((t=>{cs(t.accounts).includes(e)&&n.push(...t.events)})),n}function hs(t){return t.includes(":")}function ds(t){return hs(t)?t.split(":")[0]:t}function ps(t){var e,n,r;const o={};if(!vs(t))return o;for(const[i,s]of Object.entries(t)){const t=hs(i)?[i]:s.chains,f=s.methods||[],c=s.events||[],a=ds(i);o[a]=fs(ss({},o[a]),{chains:Q(t,null==(e=o[a])?void 0:e.chains),methods:Q(f,null==(n=o[a])?void 0:n.methods),events:Q(c,null==(r=o[a])?void 0:r.events)})}return o}function gs(t){const e={};return t?.forEach((t=>{var n;const[r,o]=t.split(":");e[r]||(e[r]={accounts:[],chains:[],events:[],methods:[]}),e[r].accounts.push(t),null==(n=e[r].chains)||n.push(`${r}:${o}`)})),e}const ys=_e2.SDK_ERRORS={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ms=_e2.INTERNAL_ERRORS={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function bs(t,e){const{message:n,code:r}=ms[t];return{message:e?`${n} ${e}`:n,code:r}}function ws(t,e){const{message:n,code:r}=ys[t];return{message:e?`${n} ${e}`:n,code:r}}function Es(t,e){return!!Array.isArray(t)&&(!(typeof e<"u"&&t.length)||t.every(e))}function vs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function xs(t){return typeof t>"u"}function Is(t,e){return!(!e||!xs(t))||"string"==typeof t&&!!t.trim().length}function Os(t,e){return!(!e||!xs(t))||"number"==typeof t&&!isNaN(t)}function As(t){return!(!Is(t,!1)||!t.includes(":"))&&2===t.split(":").length}function Bs(t){if(Is(t,!1)&&t.includes(":")){const e=t.split(":");if(3===e.length){const t=e[0]+":"+e[1];return!!e[2]&&As(t)}}return!1}function Ss(t){let e=!0;return Es(t)?t.length&&(e=t.every((t=>Is(t,!1)))):e=!1,e}function Ns(t,e,n){let r=null;return Es(e)&&e.length?e.forEach((t=>{r||As(t)||(r=ws("UNSUPPORTED_CHAINS",`${n}, chain ${t} should be a string and conform to "namespace:chainId" format`))})):As(t)||(r=ws("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Us(t,e,n){let r=null;return Object.entries(t).forEach((([t,o])=>{if(r)return;const i=Ns(t,x(t,o),`${e} ${n}`);i&&(r=i)})),r}function Rs(t,e){let n=null;return Es(t)?t.forEach((t=>{n||Bs(t)||(n=ws("UNSUPPORTED_ACCOUNTS",`${e}, account ${t} should be a string and conform to "namespace:chainId:address" format`))})):n=ws("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Ts(t,e){let n=null;return Object.values(t).forEach((t=>{if(n)return;const r=Rs(t?.accounts,`${e} namespace`);r&&(n=r)})),n}function Ps(t,e){let n=null;return Ss(t?.methods)?Ss(t?.events)||(n=ws("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=ws("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Cs(t,e){let n=null;return Object.values(t).forEach((t=>{if(n)return;const r=Ps(t,`${e}, namespace`);r&&(n=r)})),n}function Ls(t,e){let n=null;if(t&&vs(t)){const r=Cs(t,e);r&&(n=r);const o=Ts(t,e);o&&(n=o)}else n=bs("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function ks(t){return Is(t.protocol,!0)}function js(t,e,n){let r=null;const o=Ds(t),i=$s(e),s=Object.keys(o),f=Object.keys(i),c=_s(Object.keys(t)),a=_s(Object.keys(e)),u=c.filter((t=>!a.includes(t)));return u.length&&(r=bs("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(e).toString()}`)),W(s,f)||(r=bs("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.\n      Required: ${s.toString()}\n      Approved: ${f.toString()}`)),Object.keys(e).forEach((t=>{if(!t.includes(":")||r)return;const o=cs(e[t].accounts);o.includes(t)||(r=bs("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${t}\n        Required: ${t}\n        Approved: ${o.toString()}`))})),s.forEach((t=>{r||(W(o[t].methods,i[t].methods)?W(o[t].events,i[t].events)||(r=bs("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${t}`)):r=bs("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${t}`))})),r}function Ds(t){const e={};return Object.keys(t).forEach((n=>{var r;n.includes(":")?e[n]=t[n]:null==(r=t[n].chains)||r.forEach((r=>{e[r]={methods:t[n].methods,events:t[n].events}}))})),e}function _s(t){return[...new Set(t.map((t=>t.includes(":")?t.split(":")[0]:t)))]}function $s(t){const e={};return Object.keys(t).forEach((n=>{if(n.includes(":"))e[n]=t[n];else{const r=cs(t[n].accounts);r?.forEach((r=>{e[r]={accounts:t[n].accounts.filter((t=>t.includes(`${r}:`))),methods:t[n].methods,events:t[n].events}}))}})),e}function Fs(){return V()&&navigator?.onLine}async function Vs(){if(F()&&typeof _g<"u"&&null!=_g&&_g.NetInfo){const t=await(null==_g?void 0:_g.NetInfo.fetch());return t?.isConnected}return!0}function Hs(){return!0}function Ms(t){!F()&&V()&&(window.addEventListener("online",(()=>t(!0))),window.addEventListener("offline",(()=>t(!1))))}function qs(t){F()&&typeof _g<"u"&&null!=_g&&_g.NetInfo&&_g?.NetInfo.addEventListener((e=>t(e?.isConnected)))}const Ks={};function zs(t){const e=s.default.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Gs({publicKey:t,signature:e,payload:n}){var r;const o=Ws(n.method),i=128|parseInt((null==(r=n.version)?void 0:r.toString())||"4"),s=Js(n.address),f="00"===n.era?new Uint8Array([0]):Ws(n.era);if(1!==f.length&&2!==f.length)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),a=new Uint8Array([255&c,c>>8&255]),u=Qs(BigInt(`0x${Ys(n.tip)}`)),l=new Uint8Array([0,...t,s,...e,...f,...a,...u,...o]),h=Xs(l.length+1);return new Uint8Array([...h,i,...l])}function Zs(t){const e=Ws(t),n=(0,h.blake2b)(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Ws(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map((t=>parseInt(t,16))))}function Ys(t){return t.startsWith("0x")?t.slice(2):t}function Js(t){const e=s.default.decode(t)[0];return 42===e?0:60===e?2:1}function Xs(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([255&e,e>>8&255])}if(t<1073741824){const e=t<<2|2;return new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])}throw new Error("Compact encoding > 2^30 not supported")}function Qs(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}throw new Error("BigInt compact encoding not supported > 2^30")}_e2.MemoryStore=class{static get(t){return Ks[t]}static set(t,e){Ks[t]=e}static delete(t){delete Ks[t]}}}),8181,[7,7731,4183,4205,4206,8182,8071,8429,2835,4202,8445,4604,4605]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbiConstructorNotFoundError",{enumerable:!0,get:function(){return U.AbiConstructorNotFoundError}}),Object.defineProperty(e,"AbiConstructorParamsNotFoundError",{enumerable:!0,get:function(){return U.AbiConstructorParamsNotFoundError}}),Object.defineProperty(e,"AbiDecodingDataSizeInvalidError",{enumerable:!0,get:function(){return U.AbiDecodingDataSizeInvalidError}}),Object.defineProperty(e,"AbiDecodingDataSizeTooSmallError",{enumerable:!0,get:function(){return U.AbiDecodingDataSizeTooSmallError}}),Object.defineProperty(e,"AbiDecodingZeroDataError",{enumerable:!0,get:function(){return U.AbiDecodingZeroDataError}}),Object.defineProperty(e,"AbiEncodingArrayLengthMismatchError",{enumerable:!0,get:function(){return U.AbiEncodingArrayLengthMismatchError}}),Object.defineProperty(e,"AbiEncodingBytesSizeMismatchError",{enumerable:!0,get:function(){return U.AbiEncodingBytesSizeMismatchError}}),Object.defineProperty(e,"AbiEncodingLengthMismatchError",{enumerable:!0,get:function(){return U.AbiEncodingLengthMismatchError}}),Object.defineProperty(e,"AbiErrorInputsNotFoundError",{enumerable:!0,get:function(){return U.AbiErrorInputsNotFoundError}}),Object.defineProperty(e,"AbiErrorNotFoundError",{enumerable:!0,get:function(){return U.AbiErrorNotFoundError}}),Object.defineProperty(e,"AbiErrorSignatureNotFoundError",{enumerable:!0,get:function(){return U.AbiErrorSignatureNotFoundError}}),Object.defineProperty(e,"AbiEventNotFoundError",{enumerable:!0,get:function(){return U.AbiEventNotFoundError}}),Object.defineProperty(e,"AbiEventSignatureEmptyTopicsError",{enumerable:!0,get:function(){return U.AbiEventSignatureEmptyTopicsError}}),Object.defineProperty(e,"AbiEventSignatureNotFoundError",{enumerable:!0,get:function(){return U.AbiEventSignatureNotFoundError}}),Object.defineProperty(e,"AbiFunctionNotFoundError",{enumerable:!0,get:function(){return U.AbiFunctionNotFoundError}}),Object.defineProperty(e,"AbiFunctionOutputsNotFoundError",{enumerable:!0,get:function(){return U.AbiFunctionOutputsNotFoundError}}),Object.defineProperty(e,"AbiFunctionSignatureNotFoundError",{enumerable:!0,get:function(){return U.AbiFunctionSignatureNotFoundError}}),Object.defineProperty(e,"AccountStateConflictError",{enumerable:!0,get:function(){return _.AccountStateConflictError}}),Object.defineProperty(e,"AtomicReadyWalletRejectedUpgradeError",{enumerable:!0,get:function(){return N.AtomicReadyWalletRejectedUpgradeError}}),Object.defineProperty(e,"AtomicityNotSupportedError",{enumerable:!0,get:function(){return N.AtomicityNotSupportedError}}),Object.defineProperty(e,"BaseError",{enumerable:!0,get:function(){return C.BaseError}}),Object.defineProperty(e,"BaseFeeScalarError",{enumerable:!0,get:function(){return B.BaseFeeScalarError}}),Object.defineProperty(e,"BlockNotFoundError",{enumerable:!0,get:function(){return R.BlockNotFoundError}}),Object.defineProperty(e,"BundleTooLargeError",{enumerable:!0,get:function(){return N.BundleTooLargeError}}),Object.defineProperty(e,"BytesSizeMismatchError",{enumerable:!0,get:function(){return U.BytesSizeMismatchError}}),Object.defineProperty(e,"CallExecutionError",{enumerable:!0,get:function(){return F.CallExecutionError}}),Object.defineProperty(e,"ChainDisconnectedError",{enumerable:!0,get:function(){return N.ChainDisconnectedError}}),Object.defineProperty(e,"ChainDoesNotSupportContract",{enumerable:!0,get:function(){return D.ChainDoesNotSupportContract}}),Object.defineProperty(e,"ChainMismatchError",{enumerable:!0,get:function(){return D.ChainMismatchError}}),Object.defineProperty(e,"ChainNotFoundError",{enumerable:!0,get:function(){return D.ChainNotFoundError}}),Object.defineProperty(e,"CircularReferenceError",{enumerable:!0,get:function(){return t.CircularReferenceError}}),Object.defineProperty(e,"ClientChainNotConfiguredError",{enumerable:!0,get:function(){return D.ClientChainNotConfiguredError}}),Object.defineProperty(e,"ContractFunctionExecutionError",{enumerable:!0,get:function(){return F.ContractFunctionExecutionError}}),Object.defineProperty(e,"ContractFunctionRevertedError",{enumerable:!0,get:function(){return F.ContractFunctionRevertedError}}),Object.defineProperty(e,"ContractFunctionZeroDataError",{enumerable:!0,get:function(){return F.ContractFunctionZeroDataError}}),Object.defineProperty(e,"CounterfactualDeploymentFailedError",{enumerable:!0,get:function(){return F.CounterfactualDeploymentFailedError}}),Object.defineProperty(e,"DecodeLogDataMismatch",{enumerable:!0,get:function(){return U.DecodeLogDataMismatch}}),Object.defineProperty(e,"DecodeLogTopicsMismatch",{enumerable:!0,get:function(){return U.DecodeLogTopicsMismatch}}),Object.defineProperty(e,"DuplicateIdError",{enumerable:!0,get:function(){return N.DuplicateIdError}}),Object.defineProperty(e,"EIP1193ProviderRpcError",{enumerable:!0,get:function(){return J.ProviderRpcError}}),Object.defineProperty(e,"Eip1559FeesNotSupportedError",{enumerable:!0,get:function(){return B.Eip1559FeesNotSupportedError}}),Object.defineProperty(e,"EnsAvatarInvalidNftUriError",{enumerable:!0,get:function(){return H.EnsAvatarInvalidNftUriError}}),Object.defineProperty(e,"EnsAvatarUnsupportedNamespaceError",{enumerable:!0,get:function(){return H.EnsAvatarUnsupportedNamespaceError}}),Object.defineProperty(e,"EnsAvatarUriResolutionError",{enumerable:!0,get:function(){return H.EnsAvatarUriResolutionError}}),Object.defineProperty(e,"EstimateGasExecutionError",{enumerable:!0,get:function(){return M.EstimateGasExecutionError}}),Object.defineProperty(e,"ExecutionRevertedError",{enumerable:!0,get:function(){return k.ExecutionRevertedError}}),Object.defineProperty(e,"FeeCapTooHighError",{enumerable:!0,get:function(){return k.FeeCapTooHighError}}),Object.defineProperty(e,"FeeCapTooLowError",{enumerable:!0,get:function(){return k.FeeCapTooLowError}}),Object.defineProperty(e,"FeeConflictError",{enumerable:!0,get:function(){return G.FeeConflictError}}),Object.defineProperty(e,"FilterTypeNotSupportedError",{enumerable:!0,get:function(){return L.FilterTypeNotSupportedError}}),Object.defineProperty(e,"HttpRequestError",{enumerable:!0,get:function(){return q.HttpRequestError}}),Object.defineProperty(e,"InsufficientFundsError",{enumerable:!0,get:function(){return k.InsufficientFundsError}}),Object.defineProperty(e,"IntegerOutOfRangeError",{enumerable:!0,get:function(){return z.IntegerOutOfRangeError}}),Object.defineProperty(e,"InternalRpcError",{enumerable:!0,get:function(){return N.InternalRpcError}}),Object.defineProperty(e,"IntrinsicGasTooHighError",{enumerable:!0,get:function(){return k.IntrinsicGasTooHighError}}),Object.defineProperty(e,"IntrinsicGasTooLowError",{enumerable:!0,get:function(){return k.IntrinsicGasTooLowError}}),Object.defineProperty(e,"InvalidAbiDecodingTypeError",{enumerable:!0,get:function(){return U.InvalidAbiDecodingTypeError}}),Object.defineProperty(e,"InvalidAbiEncodingTypeError",{enumerable:!0,get:function(){return U.InvalidAbiEncodingTypeError}}),Object.defineProperty(e,"InvalidAbiItemError",{enumerable:!0,get:function(){return t.InvalidAbiItemError}}),Object.defineProperty(e,"InvalidAbiParameterError",{enumerable:!0,get:function(){return t.InvalidAbiParameterError}}),Object.defineProperty(e,"InvalidAbiParametersError",{enumerable:!0,get:function(){return t.InvalidAbiParametersError}}),Object.defineProperty(e,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return t.InvalidAbiTypeParameterError}}),Object.defineProperty(e,"InvalidAddressError",{enumerable:!0,get:function(){return V.InvalidAddressError}}),Object.defineProperty(e,"InvalidArrayError",{enumerable:!0,get:function(){return U.InvalidArrayError}}),Object.defineProperty(e,"InvalidBytesBooleanError",{enumerable:!0,get:function(){return z.InvalidBytesBooleanError}}),Object.defineProperty(e,"InvalidChainIdError",{enumerable:!0,get:function(){return D.InvalidChainIdError}}),Object.defineProperty(e,"InvalidDecimalNumberError",{enumerable:!0,get:function(){return w.InvalidDecimalNumberError}}),Object.defineProperty(e,"InvalidDefinitionTypeError",{enumerable:!0,get:function(){return U.InvalidDefinitionTypeError}}),Object.defineProperty(e,"InvalidDomainError",{enumerable:!0,get:function(){return Z.InvalidDomainError}}),Object.defineProperty(e,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return t.InvalidFunctionModifierError}}),Object.defineProperty(e,"InvalidHexBooleanError",{enumerable:!0,get:function(){return z.InvalidHexBooleanError}}),Object.defineProperty(e,"InvalidHexValueError",{enumerable:!0,get:function(){return z.InvalidHexValueError}}),Object.defineProperty(e,"InvalidInputRpcError",{enumerable:!0,get:function(){return N.InvalidInputRpcError}}),Object.defineProperty(e,"InvalidLegacyVError",{enumerable:!0,get:function(){return G.InvalidLegacyVError}}),Object.defineProperty(e,"InvalidModifierError",{enumerable:!0,get:function(){return t.InvalidModifierError}}),Object.defineProperty(e,"InvalidParameterError",{enumerable:!0,get:function(){return t.InvalidParameterError}}),Object.defineProperty(e,"InvalidParamsRpcError",{enumerable:!0,get:function(){return N.InvalidParamsRpcError}}),Object.defineProperty(e,"InvalidParenthesisError",{enumerable:!0,get:function(){return t.InvalidParenthesisError}}),Object.defineProperty(e,"InvalidPrimaryTypeError",{enumerable:!0,get:function(){return Z.InvalidPrimaryTypeError}}),Object.defineProperty(e,"InvalidRequestRpcError",{enumerable:!0,get:function(){return N.InvalidRequestRpcError}}),Object.defineProperty(e,"InvalidSerializableTransactionError",{enumerable:!0,get:function(){return G.InvalidSerializableTransactionError}}),Object.defineProperty(e,"InvalidSerializedTransactionError",{enumerable:!0,get:function(){return G.InvalidSerializedTransactionError}}),Object.defineProperty(e,"InvalidSerializedTransactionTypeError",{enumerable:!0,get:function(){return G.InvalidSerializedTransactionTypeError}}),Object.defineProperty(e,"InvalidSignatureError",{enumerable:!0,get:function(){return t.InvalidSignatureError}}),Object.defineProperty(e,"InvalidStorageKeySizeError",{enumerable:!0,get:function(){return G.InvalidStorageKeySizeError}}),Object.defineProperty(e,"InvalidStructSignatureError",{enumerable:!0,get:function(){return t.InvalidStructSignatureError}}),Object.defineProperty(e,"InvalidStructTypeError",{enumerable:!0,get:function(){return Z.InvalidStructTypeError}}),Object.defineProperty(e,"JsonRpcVersionUnsupportedError",{enumerable:!0,get:function(){return N.JsonRpcVersionUnsupportedError}}),Object.defineProperty(e,"LimitExceededRpcError",{enumerable:!0,get:function(){return N.LimitExceededRpcError}}),Object.defineProperty(e,"MaxFeePerGasTooLowError",{enumerable:!0,get:function(){return B.MaxFeePerGasTooLowError}}),Object.defineProperty(e,"MethodNotFoundRpcError",{enumerable:!0,get:function(){return N.MethodNotFoundRpcError}}),Object.defineProperty(e,"MethodNotSupportedRpcError",{enumerable:!0,get:function(){return N.MethodNotSupportedRpcError}}),Object.defineProperty(e,"NonceMaxValueError",{enumerable:!0,get:function(){return k.NonceMaxValueError}}),Object.defineProperty(e,"NonceTooHighError",{enumerable:!0,get:function(){return k.NonceTooHighError}}),Object.defineProperty(e,"NonceTooLowError",{enumerable:!0,get:function(){return k.NonceTooLowError}}),Object.defineProperty(e,"ParseRpcError",{enumerable:!0,get:function(){return N.ParseRpcError}}),Object.defineProperty(e,"ProviderDisconnectedError",{enumerable:!0,get:function(){return N.ProviderDisconnectedError}}),Object.defineProperty(e,"ProviderRpcError",{enumerable:!0,get:function(){return N.ProviderRpcError}}),Object.defineProperty(e,"RawContractError",{enumerable:!0,get:function(){return F.RawContractError}}),Object.defineProperty(e,"ResourceNotFoundRpcError",{enumerable:!0,get:function(){return N.ResourceNotFoundRpcError}}),Object.defineProperty(e,"ResourceUnavailableRpcError",{enumerable:!0,get:function(){return N.ResourceUnavailableRpcError}}),Object.defineProperty(e,"RpcError",{enumerable:!0,get:function(){return N.RpcError}}),Object.defineProperty(e,"RpcRequestError",{enumerable:!0,get:function(){return q.RpcRequestError}}),Object.defineProperty(e,"SizeExceedsPaddingSizeError",{enumerable:!0,get:function(){return K.SizeExceedsPaddingSizeError}}),Object.defineProperty(e,"SizeOverflowError",{enumerable:!0,get:function(){return z.SizeOverflowError}}),Object.defineProperty(e,"SliceOffsetOutOfBoundsError",{enumerable:!0,get:function(){return K.SliceOffsetOutOfBoundsError}}),Object.defineProperty(e,"SocketClosedError",{enumerable:!0,get:function(){return q.SocketClosedError}}),Object.defineProperty(e,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return t.SolidityProtectedKeywordError}}),Object.defineProperty(e,"StateAssignmentConflictError",{enumerable:!0,get:function(){return _.StateAssignmentConflictError}}),Object.defineProperty(e,"SwitchChainError",{enumerable:!0,get:function(){return N.SwitchChainError}}),Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return q.TimeoutError}}),Object.defineProperty(e,"TipAboveFeeCapError",{enumerable:!0,get:function(){return k.TipAboveFeeCapError}}),Object.defineProperty(e,"TransactionExecutionError",{enumerable:!0,get:function(){return G.TransactionExecutionError}}),Object.defineProperty(e,"TransactionNotFoundError",{enumerable:!0,get:function(){return G.TransactionNotFoundError}}),Object.defineProperty(e,"TransactionReceiptNotFoundError",{enumerable:!0,get:function(){return G.TransactionReceiptNotFoundError}}),Object.defineProperty(e,"TransactionRejectedRpcError",{enumerable:!0,get:function(){return N.TransactionRejectedRpcError}}),Object.defineProperty(e,"TransactionTypeNotSupportedError",{enumerable:!0,get:function(){return k.TransactionTypeNotSupportedError}}),Object.defineProperty(e,"UnauthorizedProviderError",{enumerable:!0,get:function(){return N.UnauthorizedProviderError}}),Object.defineProperty(e,"UnknownBundleIdError",{enumerable:!0,get:function(){return N.UnknownBundleIdError}}),Object.defineProperty(e,"UnknownNodeError",{enumerable:!0,get:function(){return k.UnknownNodeError}}),Object.defineProperty(e,"UnknownRpcError",{enumerable:!0,get:function(){return N.UnknownRpcError}}),Object.defineProperty(e,"UnknownSignatureError",{enumerable:!0,get:function(){return t.UnknownSignatureError}}),Object.defineProperty(e,"UnknownTypeError",{enumerable:!0,get:function(){return t.UnknownTypeError}}),Object.defineProperty(e,"UnsupportedChainIdError",{enumerable:!0,get:function(){return N.UnsupportedChainIdError}}),Object.defineProperty(e,"UnsupportedNonOptionalCapabilityError",{enumerable:!0,get:function(){return N.UnsupportedNonOptionalCapabilityError}}),Object.defineProperty(e,"UnsupportedPackedAbiType",{enumerable:!0,get:function(){return U.UnsupportedPackedAbiType}}),Object.defineProperty(e,"UnsupportedProviderMethodError",{enumerable:!0,get:function(){return N.UnsupportedProviderMethodError}}),Object.defineProperty(e,"UrlRequiredError",{enumerable:!0,get:function(){return W.UrlRequiredError}}),Object.defineProperty(e,"UserRejectedRequestError",{enumerable:!0,get:function(){return N.UserRejectedRequestError}}),Object.defineProperty(e,"WaitForCallsStatusTimeoutError",{enumerable:!0,get:function(){return o.WaitForCallsStatusTimeoutError}}),Object.defineProperty(e,"WaitForTransactionReceiptTimeoutError",{enumerable:!0,get:function(){return G.WaitForTransactionReceiptTimeoutError}}),Object.defineProperty(e,"WebSocketRequestError",{enumerable:!0,get:function(){return q.WebSocketRequestError}}),Object.defineProperty(e,"assertCurrentChain",{enumerable:!0,get:function(){return nr.assertCurrentChain}}),Object.defineProperty(e,"assertRequest",{enumerable:!0,get:function(){return ke.assertRequest}}),Object.defineProperty(e,"assertTransactionEIP1559",{enumerable:!0,get:function(){return Le.assertTransactionEIP1559}}),Object.defineProperty(e,"assertTransactionEIP2930",{enumerable:!0,get:function(){return Le.assertTransactionEIP2930}}),Object.defineProperty(e,"assertTransactionLegacy",{enumerable:!0,get:function(){return Le.assertTransactionLegacy}}),Object.defineProperty(e,"blobsToCommitments",{enumerable:!0,get:function(){return We.blobsToCommitments}}),Object.defineProperty(e,"blobsToProofs",{enumerable:!0,get:function(){return Qe.blobsToProofs}}),Object.defineProperty(e,"boolToBytes",{enumerable:!0,get:function(){return qe.boolToBytes}}),Object.defineProperty(e,"boolToHex",{enumerable:!0,get:function(){return Ve.boolToHex}}),Object.defineProperty(e,"bytesToBigInt",{enumerable:!0,get:function(){return Ge.bytesToBigInt}}),Object.defineProperty(e,"bytesToBool",{enumerable:!0,get:function(){return Ge.bytesToBool}}),Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return Ve.bytesToHex}}),Object.defineProperty(e,"bytesToNumber",{enumerable:!0,get:function(){return Ge.bytesToNumber}}),Object.defineProperty(e,"bytesToRlp",{enumerable:!0,get:function(){return Be.bytesToRlp}}),Object.defineProperty(e,"bytesToString",{enumerable:!0,get:function(){return Ge.bytesToString}}),Object.defineProperty(e,"ccipFetch",{enumerable:!0,get:function(){return Ke.ccipRequest}}),Object.defineProperty(e,"ccipRequest",{enumerable:!0,get:function(){return Ke.ccipRequest}}),Object.defineProperty(e,"checksumAddress",{enumerable:!0,get:function(){return yr.checksumAddress}}),Object.defineProperty(e,"commitmentToVersionedHash",{enumerable:!0,get:function(){return _e.commitmentToVersionedHash}}),Object.defineProperty(e,"commitmentsToVersionedHashes",{enumerable:!0,get:function(){return Ze.commitmentsToVersionedHashes}}),Object.defineProperty(e,"compactSignatureToHex",{enumerable:!0,get:function(){return Re.serializeCompactSignature}}),Object.defineProperty(e,"compactSignatureToSignature",{enumerable:!0,get:function(){return Ie.compactSignatureToSignature}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return tr.concat}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return tr.concatBytes}}),Object.defineProperty(e,"concatHex",{enumerable:!0,get:function(){return tr.concatHex}}),Object.defineProperty(e,"createClient",{enumerable:!0,get:function(){return u.createClient}}),Object.defineProperty(e,"createNonceManager",{enumerable:!0,get:function(){return Wr.createNonceManager}}),Object.defineProperty(e,"createPublicClient",{enumerable:!0,get:function(){return l.createPublicClient}}),Object.defineProperty(e,"createTestClient",{enumerable:!0,get:function(){return p.createTestClient}}),Object.defineProperty(e,"createTransport",{enumerable:!0,get:function(){return O.createTransport}}),Object.defineProperty(e,"createWalletClient",{enumerable:!0,get:function(){return j.createWalletClient}}),Object.defineProperty(e,"custom",{enumerable:!0,get:function(){return c.custom}}),Object.defineProperty(e,"decodeAbiParameters",{enumerable:!0,get:function(){return ee.decodeAbiParameters}}),Object.defineProperty(e,"decodeDeployData",{enumerable:!0,get:function(){return re.decodeDeployData}}),Object.defineProperty(e,"decodeErrorResult",{enumerable:!0,get:function(){return te.decodeErrorResult}}),Object.defineProperty(e,"decodeEventLog",{enumerable:!0,get:function(){return ne.decodeEventLog}}),Object.defineProperty(e,"decodeFunctionData",{enumerable:!0,get:function(){return oe.decodeFunctionData}}),Object.defineProperty(e,"decodeFunctionResult",{enumerable:!0,get:function(){return ie.decodeFunctionResult}}),Object.defineProperty(e,"defineBlock",{enumerable:!0,get:function(){return Y.defineBlock}}),Object.defineProperty(e,"defineChain",{enumerable:!0,get:function(){return or.defineChain}}),Object.defineProperty(e,"defineKzg",{enumerable:!0,get:function(){return er.defineKzg}}),Object.defineProperty(e,"defineTransaction",{enumerable:!0,get:function(){return pe.defineTransaction}}),Object.defineProperty(e,"defineTransactionReceipt",{enumerable:!0,get:function(){return ge.defineTransactionReceipt}}),Object.defineProperty(e,"defineTransactionRequest",{enumerable:!0,get:function(){return ye.defineTransactionRequest}}),Object.defineProperty(e,"deploylessCallViaBytecodeBytecode",{enumerable:!0,get:function(){return T.deploylessCallViaBytecodeBytecode}}),Object.defineProperty(e,"deploylessCallViaFactoryBytecode",{enumerable:!0,get:function(){return T.deploylessCallViaFactoryBytecode}}),Object.defineProperty(e,"domainSeparator",{enumerable:!0,get:function(){return Kr.domainSeparator}}),Object.defineProperty(e,"encodeAbiParameters",{enumerable:!0,get:function(){return ue.encodeAbiParameters}}),Object.defineProperty(e,"encodeDeployData",{enumerable:!0,get:function(){return ce.encodeDeployData}}),Object.defineProperty(e,"encodeErrorResult",{enumerable:!0,get:function(){return ae.encodeErrorResult}}),Object.defineProperty(e,"encodeEventTopics",{enumerable:!0,get:function(){return be.encodeEventTopics}}),Object.defineProperty(e,"encodeFunctionData",{enumerable:!0,get:function(){return fe.encodeFunctionData}}),Object.defineProperty(e,"encodeFunctionResult",{enumerable:!0,get:function(){return me.encodeFunctionResult}}),Object.defineProperty(e,"encodePacked",{enumerable:!0,get:function(){return cr.encodePacked}}),Object.defineProperty(e,"erc1155Abi",{enumerable:!0,get:function(){return I.erc1155Abi}}),Object.defineProperty(e,"erc20Abi",{enumerable:!0,get:function(){return I.erc20Abi}}),Object.defineProperty(e,"erc20Abi_bytes32",{enumerable:!0,get:function(){return I.erc20Abi_bytes32}}),Object.defineProperty(e,"erc4626Abi",{enumerable:!0,get:function(){return I.erc4626Abi}}),Object.defineProperty(e,"erc721Abi",{enumerable:!0,get:function(){return I.erc721Abi}}),Object.defineProperty(e,"ethAddress",{enumerable:!0,get:function(){return x.ethAddress}}),Object.defineProperty(e,"etherUnits",{enumerable:!0,get:function(){return h.etherUnits}}),Object.defineProperty(e,"extractChain",{enumerable:!0,get:function(){return ir.extractChain}}),Object.defineProperty(e,"fallback",{enumerable:!0,get:function(){return b.fallback}}),Object.defineProperty(e,"formatBlock",{enumerable:!0,get:function(){return Y.formatBlock}}),Object.defineProperty(e,"formatEther",{enumerable:!0,get:function(){return dr.formatEther}}),Object.defineProperty(e,"formatGwei",{enumerable:!0,get:function(){return mr.formatGwei}}),Object.defineProperty(e,"formatLog",{enumerable:!0,get:function(){return $.formatLog}}),Object.defineProperty(e,"formatTransaction",{enumerable:!0,get:function(){return pe.formatTransaction}}),Object.defineProperty(e,"formatTransactionReceipt",{enumerable:!0,get:function(){return ge.formatTransactionReceipt}}),Object.defineProperty(e,"formatTransactionRequest",{enumerable:!0,get:function(){return ye.formatTransactionRequest}}),Object.defineProperty(e,"formatUnits",{enumerable:!0,get:function(){return lr.formatUnits}}),Object.defineProperty(e,"fromBlobs",{enumerable:!0,get:function(){return Xe.fromBlobs}}),Object.defineProperty(e,"fromBytes",{enumerable:!0,get:function(){return Ge.fromBytes}}),Object.defineProperty(e,"fromHex",{enumerable:!0,get:function(){return pr.fromHex}}),Object.defineProperty(e,"fromRlp",{enumerable:!0,get:function(){return gr.fromRlp}}),Object.defineProperty(e,"getAbiItem",{enumerable:!0,get:function(){return se.getAbiItem}}),Object.defineProperty(e,"getAddress",{enumerable:!0,get:function(){return yr.getAddress}}),Object.defineProperty(e,"getChainContractAddress",{enumerable:!0,get:function(){return ur.getChainContractAddress}}),Object.defineProperty(e,"getContract",{enumerable:!0,get:function(){return n.getContract}}),Object.defineProperty(e,"getContractAddress",{enumerable:!0,get:function(){return Pe.getContractAddress}}),Object.defineProperty(e,"getContractError",{enumerable:!0,get:function(){return sr.getContractError}}),Object.defineProperty(e,"getCreate2Address",{enumerable:!0,get:function(){return Pe.getCreate2Address}}),Object.defineProperty(e,"getCreateAddress",{enumerable:!0,get:function(){return Pe.getCreateAddress}}),Object.defineProperty(e,"getEventSelector",{enumerable:!0,get:function(){return Pr.toEventSelector}}),Object.defineProperty(e,"getEventSignature",{enumerable:!0,get:function(){return jr.toEventSignature}}),Object.defineProperty(e,"getFunctionSelector",{enumerable:!0,get:function(){return Or.toFunctionSelector}}),Object.defineProperty(e,"getFunctionSignature",{enumerable:!0,get:function(){return Er.toFunctionSignature}}),Object.defineProperty(e,"getSerializedTransactionType",{enumerable:!0,get:function(){return Oe.getSerializedTransactionType}}),Object.defineProperty(e,"getTransactionType",{enumerable:!0,get:function(){return je.getTransactionType}}),Object.defineProperty(e,"getTypesForEIP712Domain",{enumerable:!0,get:function(){return Kr.getTypesForEIP712Domain}}),Object.defineProperty(e,"gweiUnits",{enumerable:!0,get:function(){return h.gweiUnits}}),Object.defineProperty(e,"hashDomain",{enumerable:!0,get:function(){return Ee.hashDomain}}),Object.defineProperty(e,"hashMessage",{enumerable:!0,get:function(){return Tr.hashMessage}}),Object.defineProperty(e,"hashStruct",{enumerable:!0,get:function(){return Ee.hashStruct}}),Object.defineProperty(e,"hashTypedData",{enumerable:!0,get:function(){return Ee.hashTypedData}}),Object.defineProperty(e,"hexToBigInt",{enumerable:!0,get:function(){return pr.hexToBigInt}}),Object.defineProperty(e,"hexToBool",{enumerable:!0,get:function(){return pr.hexToBool}}),Object.defineProperty(e,"hexToBytes",{enumerable:!0,get:function(){return qe.hexToBytes}}),Object.defineProperty(e,"hexToCompactSignature",{enumerable:!0,get:function(){return xe.parseCompactSignature}}),Object.defineProperty(e,"hexToNumber",{enumerable:!0,get:function(){return pr.hexToNumber}}),Object.defineProperty(e,"hexToRlp",{enumerable:!0,get:function(){return Be.hexToRlp}}),Object.defineProperty(e,"hexToSignature",{enumerable:!0,get:function(){return Te.parseSignature}}),Object.defineProperty(e,"hexToString",{enumerable:!0,get:function(){return pr.hexToString}}),Object.defineProperty(e,"http",{enumerable:!0,get:function(){return f.http}}),Object.defineProperty(e,"isAddress",{enumerable:!0,get:function(){return Sr.isAddress}}),Object.defineProperty(e,"isAddressEqual",{enumerable:!0,get:function(){return vr.isAddressEqual}}),Object.defineProperty(e,"isBytes",{enumerable:!0,get:function(){return Ar.isBytes}}),Object.defineProperty(e,"isErc6492Signature",{enumerable:!0,get:function(){return we.isErc6492Signature}}),Object.defineProperty(e,"isHash",{enumerable:!0,get:function(){return Ur.isHash}}),Object.defineProperty(e,"isHex",{enumerable:!0,get:function(){return Cr.isHex}}),Object.defineProperty(e,"keccak256",{enumerable:!0,get:function(){return Rr.keccak256}}),Object.defineProperty(e,"labelhash",{enumerable:!0,get:function(){return Q.labelhash}}),Object.defineProperty(e,"maxInt104",{enumerable:!0,get:function(){return S.maxInt104}}),Object.defineProperty(e,"maxInt112",{enumerable:!0,get:function(){return S.maxInt112}}),Object.defineProperty(e,"maxInt120",{enumerable:!0,get:function(){return S.maxInt120}}),Object.defineProperty(e,"maxInt128",{enumerable:!0,get:function(){return S.maxInt128}}),Object.defineProperty(e,"maxInt136",{enumerable:!0,get:function(){return S.maxInt136}}),Object.defineProperty(e,"maxInt144",{enumerable:!0,get:function(){return S.maxInt144}}),Object.defineProperty(e,"maxInt152",{enumerable:!0,get:function(){return S.maxInt152}}),Object.defineProperty(e,"maxInt16",{enumerable:!0,get:function(){return S.maxInt16}}),Object.defineProperty(e,"maxInt160",{enumerable:!0,get:function(){return S.maxInt160}}),Object.defineProperty(e,"maxInt168",{enumerable:!0,get:function(){return S.maxInt168}}),Object.defineProperty(e,"maxInt176",{enumerable:!0,get:function(){return S.maxInt176}}),Object.defineProperty(e,"maxInt184",{enumerable:!0,get:function(){return S.maxInt184}}),Object.defineProperty(e,"maxInt192",{enumerable:!0,get:function(){return S.maxInt192}}),Object.defineProperty(e,"maxInt200",{enumerable:!0,get:function(){return S.maxInt200}}),Object.defineProperty(e,"maxInt208",{enumerable:!0,get:function(){return S.maxInt208}}),Object.defineProperty(e,"maxInt216",{enumerable:!0,get:function(){return S.maxInt216}}),Object.defineProperty(e,"maxInt224",{enumerable:!0,get:function(){return S.maxInt224}}),Object.defineProperty(e,"maxInt232",{enumerable:!0,get:function(){return S.maxInt232}}),Object.defineProperty(e,"maxInt24",{enumerable:!0,get:function(){return S.maxInt24}}),Object.defineProperty(e,"maxInt240",{enumerable:!0,get:function(){return S.maxInt240}}),Object.defineProperty(e,"maxInt248",{enumerable:!0,get:function(){return S.maxInt248}}),Object.defineProperty(e,"maxInt256",{enumerable:!0,get:function(){return S.maxInt256}}),Object.defineProperty(e,"maxInt32",{enumerable:!0,get:function(){return S.maxInt32}}),Object.defineProperty(e,"maxInt40",{enumerable:!0,get:function(){return S.maxInt40}}),Object.defineProperty(e,"maxInt48",{enumerable:!0,get:function(){return S.maxInt48}}),Object.defineProperty(e,"maxInt56",{enumerable:!0,get:function(){return S.maxInt56}}),Object.defineProperty(e,"maxInt64",{enumerable:!0,get:function(){return S.maxInt64}}),Object.defineProperty(e,"maxInt72",{enumerable:!0,get:function(){return S.maxInt72}}),Object.defineProperty(e,"maxInt8",{enumerable:!0,get:function(){return S.maxInt8}}),Object.defineProperty(e,"maxInt80",{enumerable:!0,get:function(){return S.maxInt80}}),Object.defineProperty(e,"maxInt88",{enumerable:!0,get:function(){return S.maxInt88}}),Object.defineProperty(e,"maxInt96",{enumerable:!0,get:function(){return S.maxInt96}}),Object.defineProperty(e,"maxUint104",{enumerable:!0,get:function(){return S.maxUint104}}),Object.defineProperty(e,"maxUint112",{enumerable:!0,get:function(){return S.maxUint112}}),Object.defineProperty(e,"maxUint120",{enumerable:!0,get:function(){return S.maxUint120}}),Object.defineProperty(e,"maxUint128",{enumerable:!0,get:function(){return S.maxUint128}}),Object.defineProperty(e,"maxUint136",{enumerable:!0,get:function(){return S.maxUint136}}),Object.defineProperty(e,"maxUint144",{enumerable:!0,get:function(){return S.maxUint144}}),Object.defineProperty(e,"maxUint152",{enumerable:!0,get:function(){return S.maxUint152}}),Object.defineProperty(e,"maxUint16",{enumerable:!0,get:function(){return S.maxUint16}}),Object.defineProperty(e,"maxUint160",{enumerable:!0,get:function(){return S.maxUint160}}),Object.defineProperty(e,"maxUint168",{enumerable:!0,get:function(){return S.maxUint168}}),Object.defineProperty(e,"maxUint176",{enumerable:!0,get:function(){return S.maxUint176}}),Object.defineProperty(e,"maxUint184",{enumerable:!0,get:function(){return S.maxUint184}}),Object.defineProperty(e,"maxUint192",{enumerable:!0,get:function(){return S.maxUint192}}),Object.defineProperty(e,"maxUint200",{enumerable:!0,get:function(){return S.maxUint200}}),Object.defineProperty(e,"maxUint208",{enumerable:!0,get:function(){return S.maxUint208}}),Object.defineProperty(e,"maxUint216",{enumerable:!0,get:function(){return S.maxUint216}}),Object.defineProperty(e,"maxUint224",{enumerable:!0,get:function(){return S.maxUint224}}),Object.defineProperty(e,"maxUint232",{enumerable:!0,get:function(){return S.maxUint232}}),Object.defineProperty(e,"maxUint24",{enumerable:!0,get:function(){return S.maxUint24}}),Object.defineProperty(e,"maxUint240",{enumerable:!0,get:function(){return S.maxUint240}}),Object.defineProperty(e,"maxUint248",{enumerable:!0,get:function(){return S.maxUint248}}),Object.defineProperty(e,"maxUint256",{enumerable:!0,get:function(){return S.maxUint256}}),Object.defineProperty(e,"maxUint32",{enumerable:!0,get:function(){return S.maxUint32}}),Object.defineProperty(e,"maxUint40",{enumerable:!0,get:function(){return S.maxUint40}}),Object.defineProperty(e,"maxUint48",{enumerable:!0,get:function(){return S.maxUint48}}),Object.defineProperty(e,"maxUint56",{enumerable:!0,get:function(){return S.maxUint56}}),Object.defineProperty(e,"maxUint64",{enumerable:!0,get:function(){return S.maxUint64}}),Object.defineProperty(e,"maxUint72",{enumerable:!0,get:function(){return S.maxUint72}}),Object.defineProperty(e,"maxUint8",{enumerable:!0,get:function(){return S.maxUint8}}),Object.defineProperty(e,"maxUint80",{enumerable:!0,get:function(){return S.maxUint80}}),Object.defineProperty(e,"maxUint88",{enumerable:!0,get:function(){return S.maxUint88}}),Object.defineProperty(e,"maxUint96",{enumerable:!0,get:function(){return S.maxUint96}}),Object.defineProperty(e,"minInt104",{enumerable:!0,get:function(){return S.minInt104}}),Object.defineProperty(e,"minInt112",{enumerable:!0,get:function(){return S.minInt112}}),Object.defineProperty(e,"minInt120",{enumerable:!0,get:function(){return S.minInt120}}),Object.defineProperty(e,"minInt128",{enumerable:!0,get:function(){return S.minInt128}}),Object.defineProperty(e,"minInt136",{enumerable:!0,get:function(){return S.minInt136}}),Object.defineProperty(e,"minInt144",{enumerable:!0,get:function(){return S.minInt144}}),Object.defineProperty(e,"minInt152",{enumerable:!0,get:function(){return S.minInt152}}),Object.defineProperty(e,"minInt16",{enumerable:!0,get:function(){return S.minInt16}}),Object.defineProperty(e,"minInt160",{enumerable:!0,get:function(){return S.minInt160}}),Object.defineProperty(e,"minInt168",{enumerable:!0,get:function(){return S.minInt168}}),Object.defineProperty(e,"minInt176",{enumerable:!0,get:function(){return S.minInt176}}),Object.defineProperty(e,"minInt184",{enumerable:!0,get:function(){return S.minInt184}}),Object.defineProperty(e,"minInt192",{enumerable:!0,get:function(){return S.minInt192}}),Object.defineProperty(e,"minInt200",{enumerable:!0,get:function(){return S.minInt200}}),Object.defineProperty(e,"minInt208",{enumerable:!0,get:function(){return S.minInt208}}),Object.defineProperty(e,"minInt216",{enumerable:!0,get:function(){return S.minInt216}}),Object.defineProperty(e,"minInt224",{enumerable:!0,get:function(){return S.minInt224}}),Object.defineProperty(e,"minInt232",{enumerable:!0,get:function(){return S.minInt232}}),Object.defineProperty(e,"minInt24",{enumerable:!0,get:function(){return S.minInt24}}),Object.defineProperty(e,"minInt240",{enumerable:!0,get:function(){return S.minInt240}}),Object.defineProperty(e,"minInt248",{enumerable:!0,get:function(){return S.minInt248}}),Object.defineProperty(e,"minInt256",{enumerable:!0,get:function(){return S.minInt256}}),Object.defineProperty(e,"minInt32",{enumerable:!0,get:function(){return S.minInt32}}),Object.defineProperty(e,"minInt40",{enumerable:!0,get:function(){return S.minInt40}}),Object.defineProperty(e,"minInt48",{enumerable:!0,get:function(){return S.minInt48}}),Object.defineProperty(e,"minInt56",{enumerable:!0,get:function(){return S.minInt56}}),Object.defineProperty(e,"minInt64",{enumerable:!0,get:function(){return S.minInt64}}),Object.defineProperty(e,"minInt72",{enumerable:!0,get:function(){return S.minInt72}}),Object.defineProperty(e,"minInt8",{enumerable:!0,get:function(){return S.minInt8}}),Object.defineProperty(e,"minInt80",{enumerable:!0,get:function(){return S.minInt80}}),Object.defineProperty(e,"minInt88",{enumerable:!0,get:function(){return S.minInt88}}),Object.defineProperty(e,"minInt96",{enumerable:!0,get:function(){return S.minInt96}}),Object.defineProperty(e,"multicall3Abi",{enumerable:!0,get:function(){return I.multicall3Abi}}),Object.defineProperty(e,"namehash",{enumerable:!0,get:function(){return X.namehash}}),Object.defineProperty(e,"nonceManager",{enumerable:!0,get:function(){return Wr.nonceManager}}),Object.defineProperty(e,"numberToBytes",{enumerable:!0,get:function(){return qe.numberToBytes}}),Object.defineProperty(e,"numberToHex",{enumerable:!0,get:function(){return Ve.numberToHex}}),Object.defineProperty(e,"offchainLookup",{enumerable:!0,get:function(){return Ke.offchainLookup}}),Object.defineProperty(e,"offchainLookupAbiItem",{enumerable:!0,get:function(){return Ke.offchainLookupAbiItem}}),Object.defineProperty(e,"offchainLookupSignature",{enumerable:!0,get:function(){return Ke.offchainLookupSignature}}),Object.defineProperty(e,"pad",{enumerable:!0,get:function(){return Nr.pad}}),Object.defineProperty(e,"padBytes",{enumerable:!0,get:function(){return Nr.padBytes}}),Object.defineProperty(e,"padHex",{enumerable:!0,get:function(){return Nr.padHex}}),Object.defineProperty(e,"parseAbi",{enumerable:!0,get:function(){return t.parseAbi}}),Object.defineProperty(e,"parseAbiItem",{enumerable:!0,get:function(){return t.parseAbiItem}}),Object.defineProperty(e,"parseAbiParameter",{enumerable:!0,get:function(){return t.parseAbiParameter}}),Object.defineProperty(e,"parseAbiParameters",{enumerable:!0,get:function(){return t.parseAbiParameters}}),Object.defineProperty(e,"parseCompactSignature",{enumerable:!0,get:function(){return xe.parseCompactSignature}}),Object.defineProperty(e,"parseErc6492Signature",{enumerable:!0,get:function(){return He.parseErc6492Signature}}),Object.defineProperty(e,"parseEther",{enumerable:!0,get:function(){return Dr.parseEther}}),Object.defineProperty(e,"parseEventLogs",{enumerable:!0,get:function(){return le.parseEventLogs}}),Object.defineProperty(e,"parseGwei",{enumerable:!0,get:function(){return zr.parseGwei}}),Object.defineProperty(e,"parseSignature",{enumerable:!0,get:function(){return Te.parseSignature}}),Object.defineProperty(e,"parseTransaction",{enumerable:!0,get:function(){return Hr.parseTransaction}}),Object.defineProperty(e,"parseUnits",{enumerable:!0,get:function(){return wr.parseUnits}}),Object.defineProperty(e,"prepareEncodeFunctionData",{enumerable:!0,get:function(){return de.prepareEncodeFunctionData}}),Object.defineProperty(e,"presignMessagePrefix",{enumerable:!0,get:function(){return A.presignMessagePrefix}}),Object.defineProperty(e,"publicActions",{enumerable:!0,get:function(){return y.publicActions}}),Object.defineProperty(e,"recoverAddress",{enumerable:!0,get:function(){return he.recoverAddress}}),Object.defineProperty(e,"recoverMessageAddress",{enumerable:!0,get:function(){return Se.recoverMessageAddress}}),Object.defineProperty(e,"recoverPublicKey",{enumerable:!0,get:function(){return ve.recoverPublicKey}}),Object.defineProperty(e,"recoverTransactionAddress",{enumerable:!0,get:function(){return Ae.recoverTransactionAddress}}),Object.defineProperty(e,"recoverTypedDataAddress",{enumerable:!0,get:function(){return Ue.recoverTypedDataAddress}}),Object.defineProperty(e,"ripemd160",{enumerable:!0,get:function(){return Br.ripemd160}}),Object.defineProperty(e,"rpcSchema",{enumerable:!0,get:function(){return u.rpcSchema}}),Object.defineProperty(e,"rpcTransactionType",{enumerable:!0,get:function(){return ye.rpcTransactionType}}),Object.defineProperty(e,"serializeAccessList",{enumerable:!0,get:function(){return Mr.serializeAccessList}}),Object.defineProperty(e,"serializeCompactSignature",{enumerable:!0,get:function(){return Re.serializeCompactSignature}}),Object.defineProperty(e,"serializeErc6492Signature",{enumerable:!0,get:function(){return Me.serializeErc6492Signature}}),Object.defineProperty(e,"serializeSignature",{enumerable:!0,get:function(){return Fe.serializeSignature}}),Object.defineProperty(e,"serializeTransaction",{enumerable:!0,get:function(){return kr.serializeTransaction}}),Object.defineProperty(e,"serializeTypedData",{enumerable:!0,get:function(){return Kr.serializeTypedData}}),Object.defineProperty(e,"setErrorConfig",{enumerable:!0,get:function(){return C.setErrorConfig}}),Object.defineProperty(e,"setupKzg",{enumerable:!0,get:function(){return rr.setupKzg}}),Object.defineProperty(e,"sha256",{enumerable:!0,get:function(){return Fr.sha256}}),Object.defineProperty(e,"shouldThrow",{enumerable:!0,get:function(){return b.shouldThrow}}),Object.defineProperty(e,"sidecarsToVersionedHashes",{enumerable:!0,get:function(){return Je.sidecarsToVersionedHashes}}),Object.defineProperty(e,"signatureToCompactSignature",{enumerable:!0,get:function(){return Ce.signatureToCompactSignature}}),Object.defineProperty(e,"signatureToHex",{enumerable:!0,get:function(){return Fe.serializeSignature}}),Object.defineProperty(e,"size",{enumerable:!0,get:function(){return Lr.size}}),Object.defineProperty(e,"slice",{enumerable:!0,get:function(){return qr.slice}}),Object.defineProperty(e,"sliceBytes",{enumerable:!0,get:function(){return qr.sliceBytes}}),Object.defineProperty(e,"sliceHex",{enumerable:!0,get:function(){return qr.sliceHex}}),Object.defineProperty(e,"stringToBytes",{enumerable:!0,get:function(){return qe.stringToBytes}}),Object.defineProperty(e,"stringToHex",{enumerable:!0,get:function(){return Ve.stringToHex}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return Vr.stringify}}),Object.defineProperty(e,"testActions",{enumerable:!0,get:function(){return s.testActions}}),Object.defineProperty(e,"toBlobSidecars",{enumerable:!0,get:function(){return Ye.toBlobSidecars}}),Object.defineProperty(e,"toBlobs",{enumerable:!0,get:function(){return $e.toBlobs}}),Object.defineProperty(e,"toBytes",{enumerable:!0,get:function(){return qe.toBytes}}),Object.defineProperty(e,"toEventHash",{enumerable:!0,get:function(){return Ir.toEventHash}}),Object.defineProperty(e,"toEventSelector",{enumerable:!0,get:function(){return Pr.toEventSelector}}),Object.defineProperty(e,"toEventSignature",{enumerable:!0,get:function(){return jr.toEventSignature}}),Object.defineProperty(e,"toFunctionHash",{enumerable:!0,get:function(){return xr.toFunctionHash}}),Object.defineProperty(e,"toFunctionSelector",{enumerable:!0,get:function(){return Or.toFunctionSelector}}),Object.defineProperty(e,"toFunctionSignature",{enumerable:!0,get:function(){return Er.toFunctionSignature}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return Ve.toHex}}),Object.defineProperty(e,"toPrefixedMessage",{enumerable:!0,get:function(){return hr.toPrefixedMessage}}),Object.defineProperty(e,"toRlp",{enumerable:!0,get:function(){return Be.toRlp}}),Object.defineProperty(e,"transactionType",{enumerable:!0,get:function(){return pe.transactionType}}),Object.defineProperty(e,"trim",{enumerable:!0,get:function(){return Gr.trim}}),Object.defineProperty(e,"universalSignatureValidatorAbi",{enumerable:!0,get:function(){return I.universalSignatureValidatorAbi}}),Object.defineProperty(e,"universalSignatureValidatorByteCode",{enumerable:!0,get:function(){return T.universalSignatureValidatorByteCode}}),Object.defineProperty(e,"validateTypedData",{enumerable:!0,get:function(){return Kr.validateTypedData}}),Object.defineProperty(e,"verifyHash",{enumerable:!0,get:function(){return Ne.verifyHash}}),Object.defineProperty(e,"verifyMessage",{enumerable:!0,get:function(){return De.verifyMessage}}),Object.defineProperty(e,"verifyTypedData",{enumerable:!0,get:function(){return ze.verifyTypedData}}),Object.defineProperty(e,"walletActions",{enumerable:!0,get:function(){return P.walletActions}}),Object.defineProperty(e,"webSocket",{enumerable:!0,get:function(){return E.webSocket}}),Object.defineProperty(e,"weiUnits",{enumerable:!0,get:function(){return h.weiUnits}}),Object.defineProperty(e,"withCache",{enumerable:!0,get:function(){return ar.withCache}}),Object.defineProperty(e,"withRetry",{enumerable:!0,get:function(){return br.withRetry}}),Object.defineProperty(e,"withTimeout",{enumerable:!0,get:function(){return fr.withTimeout}}),Object.defineProperty(e,"zeroAddress",{enumerable:!0,get:function(){return x.zeroAddress}}),Object.defineProperty(e,"zeroHash",{enumerable:!0,get:function(){return v.zeroHash}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]),b=r(d[5]),f=r(d[6]),l=r(d[7]),p=r(d[8]),y=r(d[9]),s=r(d[10]),P=r(d[11]),O=r(d[12]),j=r(d[13]),E=r(d[14]),I=r(d[15]),x=r(d[16]),T=r(d[17]),h=r(d[18]),S=r(d[19]),v=r(d[20]),A=r(d[21]),U=r(d[22]),C=r(d[23]),R=r(d[24]),F=r(d[25]),B=r(d[26]),N=r(d[27]),D=r(d[28]),z=r(d[29]),H=r(d[30]),w=r(d[31]),M=r(d[32]),k=r(d[33]),L=r(d[34]),q=r(d[35]),V=r(d[36]),G=r(d[37]),K=r(d[38]),W=r(d[39]),_=r(d[40]),Z=r(d[41]),J=r(d[42]),Q=r(d[43]),X=r(d[44]),Y=r(d[45]),$=r(d[46]),ee=r(d[47]),re=r(d[48]),te=r(d[49]),ne=r(d[50]),oe=r(d[51]),ie=r(d[52]),ue=r(d[53]),ce=r(d[54]),ae=r(d[55]),be=r(d[56]),fe=r(d[57]),de=r(d[58]),me=r(d[59]),le=r(d[60]),pe=r(d[61]),ge=r(d[62]),ye=r(d[63]),se=r(d[64]),Pe=r(d[65]),Oe=r(d[66]),je=r(d[67]),Ee=r(d[68]),Ie=r(d[69]),xe=r(d[70]),Te=r(d[71]),he=r(d[72]),Se=r(d[73]),ve=r(d[74]),Ae=r(d[75]),Ue=r(d[76]),Ce=r(d[77]),Re=r(d[78]),Fe=r(d[79]),Be=r(d[80]),Ne=r(d[81]),De=r(d[82]),ze=r(d[83]),He=r(d[84]),we=r(d[85]),Me=r(d[86]),ke=r(d[87]),Le=r(d[88]),qe=r(d[89]),Ve=r(d[90]),Ge=r(d[91]),Ke=r(d[92]),We=r(d[93]),_e=r(d[94]),Ze=r(d[95]),Je=r(d[96]),Qe=r(d[97]),Xe=r(d[98]),Ye=r(d[99]),$e=r(d[100]),er=r(d[101]),rr=r(d[102]),tr=r(d[103]),nr=r(d[104]),or=r(d[105]),ir=r(d[106]),ur=r(d[107]),cr=r(d[108]),ar=r(d[109]),br=r(d[110]),fr=r(d[111]),dr=r(d[112]),mr=r(d[113]),lr=r(d[114]),pr=r(d[115]),gr=r(d[116]),yr=r(d[117]),sr=r(d[118]),Pr=r(d[119]),Or=r(d[120]),jr=r(d[121]),Er=r(d[122]),Ir=r(d[123]),xr=r(d[124]),Tr=r(d[125]),hr=r(d[126]),Sr=r(d[127]),vr=r(d[128]),Ar=r(d[129]),Ur=r(d[130]),Cr=r(d[131]),Rr=r(d[132]),Fr=r(d[133]),Br=r(d[134]),Nr=r(d[135]),Dr=r(d[136]),zr=r(d[137]),Hr=r(d[138]),wr=r(d[139]),Mr=r(d[140]),kr=r(d[141]),Lr=r(d[142]),qr=r(d[143]),Vr=r(d[144]),Gr=r(d[145]),Kr=r(d[146]),Wr=r(d[147])}),8182,[1255,8183,8244,8248,8250,8255,8256,8261,8367,8262,8368,8399,8251,8415,8416,8160,8354,8162,8131,8146,8325,8318,8089,8093,8205,8121,8202,8138,8163,8099,8273,8330,8199,8139,8187,8137,8109,8135,8097,8257,8134,8298,8417,8269,8265,8206,8227,8124,8418,8123,8226,8170,8148,8108,8164,8171,8186,8119,8120,8172,8225,8207,8246,8142,8116,8306,8327,8220,8299,8419,8420,8421,8193,8315,8195,8422,8319,8423,8424,8357,8197,8320,8321,8322,8323,8324,8326,8145,8303,8095,8101,8127,8173,8210,8213,8212,8425,8211,8426,8215,8216,8427,8428,8113,8241,8292,8293,8165,8300,8235,8254,8259,8130,8133,8132,8098,8308,8112,8190,8103,8117,8309,8310,8311,8312,8316,8317,8110,8147,8307,8313,8092,8102,8214,8314,8096,8331,8332,8328,8329,8304,8302,8091,8114,8129,8100,8297,8333]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getContract=function({abi:w,address:b,client:f}){const C=f,[A,E]=C?'public'in C&&'wallet'in C?[C.public,C.wallet]:'public'in C?[C.public,void 0]:'wallet'in C?[void 0,C.wallet]:[C,C]:[void 0,void 0],P=null!=A,x=null!=E,N={};let h=!1,F=!1,_=!1;for(const t of w)if('function'===t.type?'view'===t.stateMutability||'pure'===t.stateMutability?h=!0:F=!0:'event'===t.type&&(_=!0),h&&F&&_)break;P&&(h&&(N.read=new Proxy({},{get:(n,o)=>(...n)=>{const{args:s,options:u}=p(n);return(0,t.getAction)(A,c.readContract,'readContract')({abi:w,address:b,functionName:o,args:s,...u})}})),F&&(N.simulate=new Proxy({},{get:(n,o)=>(...n)=>{const{args:s,options:c}=p(n);return(0,t.getAction)(A,u.simulateContract,'simulateContract')({abi:w,address:b,functionName:o,args:s,...c})}})),_&&(N.createEventFilter=new Proxy({},{get:(o,s)=>(...o)=>{const c=w.find((t=>'event'===t.type&&t.name===s)),{args:u,options:l}=y(o,c);return(0,t.getAction)(A,n.createContractEventFilter,'createContractEventFilter')({abi:w,address:b,eventName:s,args:u,...l})}}),N.getEvents=new Proxy({},{get:(n,o)=>(...n)=>{const c=w.find((t=>'event'===t.type&&t.name===o)),{args:u,options:l}=y(n,c);return(0,t.getAction)(A,s.getContractEvents,'getContractEvents')({abi:w,address:b,eventName:o,args:u,...l})}}),N.watchEvent=new Proxy({},{get:(n,o)=>(...n)=>{const s=w.find((t=>'event'===t.type&&t.name===o)),{args:c,options:u}=y(n,s);return(0,t.getAction)(A,l.watchContractEvent,'watchContractEvent')({abi:w,address:b,eventName:o,args:c,...u})}})));x&&F&&(N.write=new Proxy({},{get:(n,o)=>(...n)=>{const{args:s,options:c}=p(n);return(0,t.getAction)(E,v.writeContract,'writeContract')({abi:w,address:b,functionName:o,args:s,...c})}}));(P||x)&&F&&(N.estimateGas=new Proxy({},{get:(n,s)=>(...n)=>{const{args:c,options:u}=p(n),l=A??E;return(0,t.getAction)(l,o.estimateContractGas,'estimateContractGas')({abi:w,address:b,functionName:s,args:c,...u,account:u.account??E.account})}}));return N.address=b,N.abi=w,N},e.getEventParameters=y,e.getFunctionParameters=p;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),u=r(d[5]),l=r(d[6]),v=r(d[7]);function p(t){const n=t.length&&Array.isArray(t[0]);return{args:n?t[0]:[],options:(n?t[1]:t[0])??{}}}function y(t,n){let o=!1;Array.isArray(t[0])?o=!0:1===t.length?o=n.inputs.some((t=>t.indexed)):2===t.length&&(o=!0);return{args:o?t[0]:void 0,options:(o?t[1]:t[0])??{}}}}),8183,[8184,8185,8189,8223,8228,8229,8230,8238]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getAction=function(n,t,o){const c=n[t.name];if('function'==typeof c)return c;const f=n[o];return'function'==typeof f?f:o=>t(n,o)}}),8184,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createContractEventFilter=async function(c,s){const{address:l,abi:u,args:v,eventName:b,fromBlock:p,strict:f,toBlock:_}=s,y=(0,n.createFilterRequestScope)(c,{method:'eth_newFilter'}),B=b?(0,t.encodeEventTopics)({abi:u,args:v,eventName:b}):void 0,h=await c.request({method:'eth_newFilter',params:[{address:l,fromBlock:'bigint'==typeof p?(0,o.numberToHex)(p):p,toBlock:'bigint'==typeof _?(0,o.numberToHex)(_):_,topics:B}]});return{abi:u,args:v,eventName:b,id:h,request:y(h),strict:Boolean(f),type:'event'}};var t=r(d[0]),o=r(d[1]),n=r(d[2])}),8185,[8186,8101,8188]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeEventTopics=function(n){const{abi:o,eventName:i,args:p}=n;let y=o[0];if(i){const n=(0,u.getAbiItem)({abi:o,name:i});if(!n)throw new t.AbiEventNotFoundError(i,{docsPath:l});y=n}if('event'!==y.type)throw new t.AbiEventNotFoundError(void 0,{docsPath:l});const f=(0,s.formatAbiItem)(y),b=(0,c.toEventSelector)(f);let A=[];if(p&&'inputs'in y){const t=y.inputs?.filter((t=>'indexed'in t&&t.indexed)),n=Array.isArray(p)?p:Object.values(p).length>0?t?.map((t=>p[t.name]))??[]:[];n.length>0&&(A=t?.map(((t,o)=>Array.isArray(n[o])?n[o].map(((i,c)=>v({param:t,value:n[o][c]}))):void 0!==n[o]&&null!==n[o]?v({param:t,value:n[o]}):null))??[])}return[b,...A]};var t=r(d[0]),n=r(d[1]),o=r(d[2]),i=r(d[3]),c=r(d[4]),p=r(d[5]),s=r(d[6]),u=r(d[7]);const l='/docs/contract/encodeEventTopics';function v({param:t,value:c}){if('string'===t.type||'bytes'===t.type)return(0,i.keccak256)((0,o.toBytes)(c));if('tuple'===t.type||t.type.match(/^(.*)\[(\d+)?\]$/))throw new n.FilterTypeNotSupportedError(t.type);return(0,p.encodeAbiParameters)([t],[c])}}),8186,[8089,8187,8095,8102,8103,8108,8090,8116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FilterTypeNotSupportedError=void 0;var t=r(d[0]);class o extends t.BaseError{constructor(t){super(`Filter type "${t}" is not supported.`,{name:'FilterTypeNotSupportedError'})}}e.FilterTypeNotSupportedError=o}),8187,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createFilterRequestScope=function(t,{method:s}){const o={};'fallback'===t.transport.type&&t.transport.onResponse?.((({method:t,response:n,status:u,transport:c})=>{'success'===u&&s===t&&(o[n]=c.request)}));return s=>o[s]||t.request}}),8188,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.estimateContractGas=async function(u,f){const{abi:b,address:G,args:_,functionName:h,dataSuffix:l,...p}=f,v=(0,c.encodeFunctionData)({abi:b,args:_,functionName:h});try{return await(0,o.getAction)(u,s.estimateGas,'estimateGas')({data:`${v}${l?l.replace('0x',''):''}`,to:G,...p})}catch(c){const o=p.account?(0,t.parseAccount)(p.account):void 0;throw(0,n.getContractError)(c,{abi:b,address:G,args:_,docsPath:'/docs/contract/estimateContractGas',functionName:h,sender:o?.address})}};var t=r(d[0]),c=r(d[1]),n=r(d[2]),o=r(d[3]),s=r(d[4])}),8189,[8118,8119,8190,8184,8191]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getContractError=function(f,{abi:E,address:l,args:b,docsPath:w,functionName:C,sender:R}){const p=f instanceof o.RawContractError?f:f instanceof t.BaseError?f.walk((n=>'data'in n))||f.walk():{},{code:N,data:_,details:h,message:v,shortMessage:D}=p,F=f instanceof n.AbiDecodingZeroDataError?new o.ContractFunctionZeroDataError({functionName:C}):[u,s.InternalRpcError.code].includes(N)&&(_||h||v||D)?new o.ContractFunctionRevertedError({abi:E,data:'object'==typeof _?_.data:_,functionName:C,message:p instanceof c.RpcRequestError?h:D??v}):f;return new o.ContractFunctionExecutionError(F,{abi:E,args:b,contractAddress:l,docsPath:w,functionName:C,sender:R})};var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]);const u=3}),8190,[8089,8093,8121,8137,8138]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.estimateGas=async function(p,P){const{account:w=p.account}=P,q=w?(0,t.parseAccount)(w):void 0;try{const{accessList:y,authorizationList:G,blobs:z,blobVersionedHashes:B,blockNumber:F,blockTag:L,data:O,gas:k,gasPrice:H,maxFeePerBlobGas:T,maxFeePerGas:_,maxPriorityFeePerGas:R,nonce:S,value:A,stateOverride:E,...V}=await(0,v.prepareTransactionRequest)(p,{...P,parameters:'local'===q?.type?void 0:['blobVersionedHashes']}),I=('bigint'==typeof F?(0,n.numberToHex)(F):void 0)||L,j=(0,b.serializeStateOverride)(E),C=await(async()=>V.to?V.to:G&&G.length>0?await(0,s.recoverAuthorizationAddress)({authorization:G[0]}).catch((()=>{throw new o.BaseError('`to` is required. Could not infer from `authorizationList`')})):void 0)();(0,h.assertRequest)(P);const M=p.chain?.formatters?.transactionRequest?.format,N=(M||l.formatTransactionRequest)({...(0,u.extract)(V,{format:M}),from:q?.address,accessList:y,authorizationList:G,blobs:z,blobVersionedHashes:B,data:O,gas:k,gasPrice:H,maxFeePerBlobGas:T,maxFeePerGas:_,maxPriorityFeePerGas:R,nonce:S,to:C,value:A});function x(t){const{block:o,request:s,rpcStateOverride:n}=t;return p.request({method:'eth_estimateGas',params:n?[s,o??'latest',n]:o?[s,o]:[s]})}let D=BigInt(await x({block:I,request:N,rpcStateOverride:j}));if(G){const J=await(0,f.getBalance)(p,{address:N.from}),K=await Promise.all(G.map((async t=>{const{address:o}=t,s=await x({block:I,request:{authorizationList:void 0,data:O,from:q?.address,to:o,value:(0,n.numberToHex)(J)},rpcStateOverride:j}).catch((()=>100000n));return 2n*BigInt(s)})));D+=K.reduce(((t,o)=>t+o),0n)}return D}catch(Q){throw(0,c.getEstimateGasError)(Q,{...P,account:q,chain:p.chain})}};var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3]),c=r(d[4]),u=r(d[5]),l=r(d[6]),b=r(d[7]),h=r(d[8]),v=r(d[9]),f=r(d[10])}),8191,[8118,8093,8192,8101,8198,8141,8142,8144,8145,8200,8222]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverAuthorizationAddress=async function(o){const{authorization:s,signature:u}=o;return(0,t.recoverAddress)({hash:(0,n.hashAuthorization)(s),signature:u??s})};var t=r(d[0]),n=r(d[1])}),8192,[8193,8196]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverAddress=async function({hash:u,signature:c}){return(0,s.publicKeyToAddress)(await(0,n.recoverPublicKey)({hash:u,signature:c}))};var s=r(d[0]),n=r(d[1])}),8193,[8194,8195]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.publicKeyToAddress=function(n){const u=(0,c.keccak256)(`0x${n.substring(4)}`).substring(26);return(0,s.checksumAddress)(`0x${u}`)};var s=r(d[0]),c=r(d[1])}),8194,[8112,8102]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverPublicKey=async function({hash:s,signature:c}){const f=(0,r.isHex)(s)?s:(0,o.toHex)(s),{secp256k1:y}=await _r(d[5])(d[4],d.paths),v=(()=>{if('object'==typeof c&&'r'in c&&'s'in c){const{r:r,s:t,v:o,yParity:s}=c,f=u(Number(s??o));return new y.Signature((0,n.hexToBigInt)(r),(0,n.hexToBigInt)(t)).addRecoveryBit(f)}const s=(0,r.isHex)(c)?c:(0,o.toHex)(c);if(65!==(0,t.size)(s))throw new Error('invalid signature length');const f=u((0,n.hexToNumber)(`0x${s.slice(130)}`));return y.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(f)})();return`0x${v.recoverPublicKey(f.substring(2)).toHex(!1)}`};var r=_r(d[0]),t=_r(d[1]),n=_r(d[2]),o=_r(d[3]);function u(r){if(0===r||1===r)return r;if(27===r)return 0;if(28===r)return 1;throw new Error('Invalid yParityOrV value')}}),8195,{"0":8092,"1":8091,"2":8098,"3":8101,"4":8082,"5":1353,"paths":{}});
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.hashAuthorization=function(u){const{chainId:x,nonce:h,to:b}=u,_=u.contractAddress??u.address,f=(0,s.keccak256)((0,n.concatHex)(['0x05',(0,c.toRlp)([x?(0,t.numberToHex)(x):'0x',_,h?(0,t.numberToHex)(h):'0x'])]));return'bytes'===b?(0,o.hexToBytes)(f):f};var n=r(d[0]),o=r(d[1]),t=r(d[2]),c=r(d[3]),s=r(d[4])}),8196,[8113,8095,8101,8197,8102]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToRlp=function(t,n="bytes"){return s(t,n)},e.hexToRlp=function(t,n="hex"){return s(t,n)},e.toRlp=s;var t=r(d[0]),n=r(d[1]),h=r(d[2]),u=r(d[3]);function s(t,h="hex"){const s=o(t),l=(0,n.createCursor)(new Uint8Array(s.length));return s.encode(l),'hex'===h?(0,u.bytesToHex)(l.bytes):l.bytes}function o(t){return Array.isArray(t)?l(t.map((t=>o(t)))):p(t)}function l(t){const n=t.reduce(((t,n)=>t+n.length),0),h=c(n);return{length:n<=55?1+n:1+h+n,encode(u){n<=55?u.pushByte(192+n):(u.pushByte(247+h),1===h?u.pushUint8(n):2===h?u.pushUint16(n):3===h?u.pushUint24(n):u.pushUint32(n));for(const{encode:n}of t)n(u)}}}function p(t){const n='string'==typeof t?(0,h.hexToBytes)(t):t,u=c(n.length);return{length:1===n.length&&n[0]<128?1:n.length<=55?1+n.length:1+u+n.length,encode(t){1===n.length&&n[0]<128?t.pushBytes(n):n.length<=55?(t.pushByte(128+n.length),t.pushBytes(n)):(t.pushByte(183+u),1===u?t.pushUint8(n.length):2===u?t.pushUint16(n.length):3===u?t.pushUint24(n.length):t.pushUint32(n.length),t.pushBytes(n))}}}function c(n){if(n<256)return 1;if(n<65536)return 2;if(n<16777216)return 3;if(n<4294967296)return 4;throw new t.BaseError('Length is too large.')}}),8197,[8093,8125,8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEstimateGasError=function(s,{docsPath:c,...u}){const E=(()=>{const t=(0,n.getNodeError)(s,u);return t instanceof o.UnknownNodeError?s:t})();return new t.EstimateGasExecutionError(E,{docsPath:c,...u})};var t=r(d[0]),o=r(d[1]),n=r(d[2])}),8198,[8199,8139,8140]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.EstimateGasExecutionError=void 0;var s=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]);class n extends o.BaseError{constructor(o,{account:n,docsPath:u,chain:E,data:P,gas:l,gasPrice:v,maxFeePerGas:G,maxPriorityFeePerGas:f,nonce:x,to:h,value:w}){const y=(0,c.prettyPrint)({from:n?.address,to:h,value:void 0!==w&&`${(0,s.formatEther)(w)} ${E?.nativeCurrency?.symbol||'ETH'}`,data:P,gas:l,gasPrice:void 0!==v&&`${(0,t.formatGwei)(v)} gwei`,maxFeePerGas:void 0!==G&&`${(0,t.formatGwei)(G)} gwei`,maxPriorityFeePerGas:void 0!==f&&`${(0,t.formatGwei)(f)} gwei`,nonce:x});super(o.shortMessage,{cause:o,docsPath:u,metaMessages:[...o.metaMessages?[...o.metaMessages,' ']:[],'Estimate Gas Arguments:',y].filter(Boolean),name:'EstimateGasExecutionError'}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=o}}e.EstimateGasExecutionError=n}),8199,[8130,8133,8093,8135]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.eip1559NetworkCache=e.defaultParameters=void 0,e.prepareTransactionRequest=async function(x,v){const{account:k=x.account,blobs:T,chain:I,gas:C,kzg:_,nonce:A,nonceManager:H,parameters:V=G,type:q}=v,M=k?(0,s.parseAccount)(k):k,z={...v,...M?{from:M?.address}:{}};let B,E;async function N(){return B||(B=await(0,p.getAction)(x,n.getBlock,'getBlock')({blockTag:'latest'}),B)}async function j(){if(E)return E;if(I)return I.id;if(void 0!==v.chainId)return v.chainId;const s=await(0,p.getAction)(x,w.getChainId,'getChainId')({});return E=s,E}if(V.includes('nonce')&&void 0===A&&M)if(H){const s=await j();z.nonce=await H.consume({address:M.address,chainId:s,client:x})}else z.nonce=await(0,p.getAction)(x,c.getTransactionCount,'getTransactionCount')({address:M.address,blockTag:'pending'});if((V.includes('blobVersionedHashes')||V.includes('sidecars'))&&T&&_){const s=(0,u.blobsToCommitments)({blobs:T,kzg:_});if(V.includes('blobVersionedHashes')){const t=(0,P.commitmentsToVersionedHashes)({commitments:s,to:'hex'});z.blobVersionedHashes=t}if(V.includes('sidecars')){const t=(0,f.blobsToProofs)({blobs:T,commitments:s,kzg:_}),o=(0,b.toBlobSidecars)({blobs:T,commitments:s,proofs:t,to:'hex'});z.sidecars=o}}V.includes('chainId')&&(z.chainId=await j());if((V.includes('fees')||V.includes('type'))&&void 0===q)try{z.type=(0,h.getTransactionType)(z)}catch{let s=F.get(x.uid);if(void 0===s){const t=await N();s='bigint'==typeof t?.baseFeePerGas,F.set(x.uid,s)}z.type=s?'eip1559':'legacy'}if(V.includes('fees'))if('legacy'!==z.type&&'eip2930'!==z.type){if(void 0===z.maxFeePerGas||void 0===z.maxPriorityFeePerGas){const s=await N(),{maxFeePerGas:o,maxPriorityFeePerGas:n}=await(0,t.internal_estimateFeesPerGas)(x,{block:s,chain:I,request:z});if(void 0===v.maxPriorityFeePerGas&&v.maxFeePerGas&&v.maxFeePerGas<n)throw new l.MaxFeePerGasTooLowError({maxPriorityFeePerGas:n});z.maxPriorityFeePerGas=n,z.maxFeePerGas=o}}else{if(void 0!==v.maxFeePerGas||void 0!==v.maxPriorityFeePerGas)throw new l.Eip1559FeesNotSupportedError;if(void 0===v.gasPrice){const s=await N(),{gasPrice:o}=await(0,t.internal_estimateFeesPerGas)(x,{block:s,chain:I,request:z,type:'legacy'});z.gasPrice=o}}V.includes('gas')&&void 0===C&&(z.gas=await(0,p.getAction)(x,o.estimateGas,'estimateGas')({...z,account:M?{address:M.address,type:'json-rpc'}:M}));return(0,y.assertRequest)(z),delete z.parameters,z};var s=r(d[0]),t=r(d[1]),o=r(d[2]),n=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6]),f=r(d[7]),P=r(d[8]),b=r(d[9]),p=r(d[10]),y=r(d[11]),h=r(d[12]),w=r(d[13]);const G=e.defaultParameters=['blobVersionedHashes','chainId','fees','gas','nonce','type'],F=e.eip1559NetworkCache=new Map}),8200,[8118,8201,8191,8204,8209,8202,8210,8211,8212,8215,8184,8145,8220,8221]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.estimateFeesPerGas=async function(t,s){return l(t,s)},e.internal_estimateFeesPerGas=l;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),c=r(d[4]);async function l(l,u){const{block:P,chain:f=l.chain,request:p,type:F="eip1559"}=u||{},y=await(async()=>'function'==typeof f?.fees?.baseFeeMultiplier?f.fees.baseFeeMultiplier({block:P,client:l,request:p}):f?.fees?.baseFeeMultiplier??1.2)();if(y<1)throw new t.BaseFeeScalarError;const G=10**(y.toString().split('.')[1]?.length??0),b=t=>t*BigInt(Math.ceil(y*G))/BigInt(G),w=P||await(0,s.getAction)(l,o.getBlock,'getBlock')({});if('function'==typeof f?.fees?.estimateFeesPerGas){const t=await f.fees.estimateFeesPerGas({block:P,client:l,multiply:b,request:p,type:F});if(null!==t)return t}if('eip1559'===F){if('bigint'!=typeof w.baseFeePerGas)throw new t.Eip1559FeesNotSupportedError;const s='bigint'==typeof p?.maxPriorityFeePerGas?p.maxPriorityFeePerGas:await(0,n.internal_estimateMaxPriorityFeePerGas)(l,{block:w,chain:f,request:p}),o=b(w.baseFeePerGas);return{maxFeePerGas:p?.maxFeePerGas??o+s,maxPriorityFeePerGas:s}}return{gasPrice:p?.gasPrice??b(await(0,s.getAction)(l,c.getGasPrice,'getGasPrice')({}))}}}),8201,[8202,8184,8203,8204,8208]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MaxFeePerGasTooLowError=e.Eip1559FeesNotSupportedError=e.BaseFeeScalarError=void 0;var o=r(d[0]),s=r(d[1]);class t extends s.BaseError{constructor(){super('`baseFeeMultiplier` must be greater than 1.',{name:'BaseFeeScalarError'})}}e.BaseFeeScalarError=t;class n extends s.BaseError{constructor(){super('Chain does not support EIP-1559 fees.',{name:'Eip1559FeesNotSupportedError'})}}e.Eip1559FeesNotSupportedError=n;class p extends s.BaseError{constructor({maxPriorityFeePerGas:s}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,o.formatGwei)(s)} gwei).`,{name:'MaxFeePerGasTooLowError'})}}e.MaxFeePerGasTooLowError=p}),8202,[8133,8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.estimateMaxPriorityFeePerGas=async function(t,o){return u(t,o)},e.internal_estimateMaxPriorityFeePerGas=u;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),c=r(d[4]);async function u(u,l){const{block:P,chain:f=u.chain,request:y}=l||{};try{const t=f?.fees?.maxPriorityFeePerGas??f?.fees?.defaultPriorityFee;if('function'==typeof t){const o=P||await(0,n.getAction)(u,s.getBlock,'getBlock')({}),c=await t({block:o,client:u,request:y});if(null===c)throw new Error;return c}if(void 0!==t)return t;const c=await u.request({method:'eth_maxPriorityFeePerGas'});return(0,o.hexToBigInt)(c)}catch{const[o,l]=await Promise.all([P?Promise.resolve(P):(0,n.getAction)(u,s.getBlock,'getBlock')({}),(0,n.getAction)(u,c.getGasPrice,'getGasPrice')({})]);if('bigint'!=typeof o.baseFeePerGas)throw new t.Eip1559FeesNotSupportedError;const f=l-o.baseFeePerGas;return f<0n?0n:f}}}),8203,[8202,8098,8184,8204,8208]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlock=async function(l,{blockHash:n,blockNumber:u,blockTag:s,includeTransactions:b}={}){const k=s??'latest',h=b??!1,B=void 0!==u?(0,t.numberToHex)(u):void 0;let f=null;f=n?await l.request({method:'eth_getBlockByHash',params:[n,h]},{dedupe:!0}):await l.request({method:'eth_getBlockByNumber',params:[B||k,h]},{dedupe:Boolean(B)});if(!f)throw new o.BlockNotFoundError({blockHash:n,blockNumber:u});return(l.chain?.formatters?.block?.format||c.formatBlock)(f)};var o=r(d[0]),t=r(d[1]),c=r(d[2])}),8204,[8205,8101,8206]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.BlockNotFoundError=void 0;var o=r(d[0]);class c extends o.BaseError{constructor({blockHash:o,blockNumber:c}){let l='Block';o&&(l=`Block at hash "${o}"`),c&&(l=`Block at number "${c}"`),super(`${l} could not be found.`,{name:'BlockNotFoundError'})}}e.BlockNotFoundError=c}),8205,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defineBlock=void 0,e.formatBlock=o;var s=r(d[0]),t=r(d[1]);function o(s){const o=(s.transactions??[]).map((s=>'string'==typeof s?s:(0,t.formatTransaction)(s)));return{...s,baseFeePerGas:s.baseFeePerGas?BigInt(s.baseFeePerGas):null,blobGasUsed:s.blobGasUsed?BigInt(s.blobGasUsed):void 0,difficulty:s.difficulty?BigInt(s.difficulty):void 0,excessBlobGas:s.excessBlobGas?BigInt(s.excessBlobGas):void 0,gasLimit:s.gasLimit?BigInt(s.gasLimit):void 0,gasUsed:s.gasUsed?BigInt(s.gasUsed):void 0,hash:s.hash?s.hash:null,logsBloom:s.logsBloom?s.logsBloom:null,nonce:s.nonce?s.nonce:null,number:s.number?BigInt(s.number):null,size:s.size?BigInt(s.size):void 0,timestamp:s.timestamp?BigInt(s.timestamp):void 0,transactions:o,totalDifficulty:s.totalDifficulty?BigInt(s.totalDifficulty):null}}e.defineBlock=(0,s.defineFormatter)('block',o)}),8206,[8143,8207]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defineTransaction=void 0,e.formatTransaction=s,e.transactionType=void 0;var t=r(d[0]),n=r(d[1]);const o=e.transactionType={'0x0':'legacy','0x1':'eip2930','0x2':'eip1559','0x3':'eip4844','0x4':'eip7702'};function s(n){const s={...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,chainId:n.chainId?(0,t.hexToNumber)(n.chainId):void 0,gas:n.gas?BigInt(n.gas):void 0,gasPrice:n.gasPrice?BigInt(n.gasPrice):void 0,maxFeePerBlobGas:n.maxFeePerBlobGas?BigInt(n.maxFeePerBlobGas):void 0,maxFeePerGas:n.maxFeePerGas?BigInt(n.maxFeePerGas):void 0,maxPriorityFeePerGas:n.maxPriorityFeePerGas?BigInt(n.maxPriorityFeePerGas):void 0,nonce:n.nonce?(0,t.hexToNumber)(n.nonce):void 0,to:n.to?n.to:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,type:n.type?o[n.type]:void 0,typeHex:n.type?n.type:void 0,value:n.value?BigInt(n.value):void 0,v:n.v?BigInt(n.v):void 0};return n.authorizationList&&(s.authorizationList=n.authorizationList.map((t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)})))),s.yParity=(()=>{if(n.yParity)return Number(n.yParity);if('bigint'==typeof s.v){if(0n===s.v||27n===s.v)return 0;if(1n===s.v||28n===s.v)return 1;if(s.v>=35n)return s.v%2n===0n?1:0}})(),'legacy'===s.type&&(delete s.accessList,delete s.maxFeePerBlobGas,delete s.maxFeePerGas,delete s.maxPriorityFeePerGas,delete s.yParity),'eip2930'===s.type&&(delete s.maxFeePerBlobGas,delete s.maxFeePerGas,delete s.maxPriorityFeePerGas),'eip1559'===s.type&&delete s.maxFeePerBlobGas,s}e.defineTransaction=(0,n.defineFormatter)('transaction',s)}),8207,[8098,8143]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getGasPrice=async function(t){const n=await t.request({method:'eth_gasPrice'});return BigInt(n)}}),8208,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionCount=async function(o,{address:u,blockTag:s="latest",blockNumber:c}){const b=await o.request({method:'eth_getTransactionCount',params:[u,'bigint'==typeof c?(0,n.numberToHex)(c):s]},{dedupe:Boolean(c)});return(0,t.hexToNumber)(b)};var t=r(d[0]),n=r(d[1])}),8209,[8098,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.blobsToCommitments=function(b){const{kzg:s}=b,n=b.to??('string'==typeof b.blobs[0]?'hex':'bytes'),f='string'==typeof b.blobs[0]?b.blobs.map((t=>(0,o.hexToBytes)(t))):b.blobs,l=[];for(const o of f)l.push(Uint8Array.from(s.blobToKzgCommitment(o)));return'bytes'===n?l:l.map((o=>(0,t.bytesToHex)(o)))};var o=r(d[0]),t=r(d[1])}),8210,[8095,8101]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.blobsToProofs=function(s){const{kzg:n}=s,b=s.to??('string'==typeof s.blobs[0]?'hex':'bytes'),f='string'==typeof s.blobs[0]?s.blobs.map((t=>(0,o.hexToBytes)(t))):s.blobs,i='string'==typeof s.commitments[0]?s.commitments.map((t=>(0,o.hexToBytes)(t))):s.commitments,l=[];for(let o=0;o<f.length;o++){const t=f[o],s=i[o];l.push(Uint8Array.from(n.computeBlobKzgProof(t,s)))}return'bytes'===b?l:l.map((o=>(0,t.bytesToHex)(o)))};var o=r(d[0]),t=r(d[1])}),8211,[8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.commitmentsToVersionedHashes=function(t){const{commitments:n,version:s}=t,c=t.to??('string'==typeof n[0]?'hex':'bytes'),f=[];for(const t of n)f.push((0,o.commitmentToVersionedHash)({commitment:t,to:c,version:s}));return f};var o=r(d[0])}),8212,[8213]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.commitmentToVersionedHash=function(n){const{commitment:s,version:c=1}=n,y=n.to??('string'==typeof s?'hex':'bytes'),b=(0,o.sha256)(s,'bytes');return b.set([c],0),'bytes'===y?b:(0,t.bytesToHex)(b)};var t=r(d[0]),o=r(d[1])}),8213,[8101,8214]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sha256=function(c,u){const _=u||'hex',f=(0,t.sha256)((0,s.isHex)(c,{strict:!1})?(0,n.toBytes)(c):c);return'bytes'===_?f:(0,o.toHex)(f)};var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3])}),8214,[1381,8092,8095,8101]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.toBlobSidecars=function(s){const{data:l,kzg:n,to:c}=s,i=s.blobs??(0,b.toBlobs)({data:l,to:c}),f=s.commitments??(0,o.blobsToCommitments)({blobs:i,kzg:n,to:c}),u=s.proofs??(0,t.blobsToProofs)({blobs:i,commitments:f,kzg:n,to:c}),p=[];for(let o=0;o<i.length;o++)p.push({blob:i[o],commitment:f[o],proof:u[o]});return p};var o=r(d[0]),t=r(d[1]),b=r(d[2])}),8215,[8210,8211,8216]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.toBlobs=function(b){const c=b.to??('string'==typeof b.data?'hex':'bytes'),f='string'==typeof b.data?(0,y.hexToBytes)(b.data):b.data,B=(0,n.size)(f);if(!B)throw new o.EmptyBlobError;if(B>t.maxBytesPerTransaction)throw new o.BlobSizeTooLargeError({maxSize:t.maxBytesPerTransaction,size:B});const p=[];let u=!0,h=0;for(;u;){const o=(0,s.createCursor)(new Uint8Array(t.bytesPerBlob));let n=0;for(;n<t.fieldElementsPerBlob;){const s=f.slice(h,h+(t.bytesPerFieldElement-1));if(o.pushByte(0),o.pushBytes(s),s.length<31){o.pushByte(128),u=!1;break}n++,h+=31}p.push(o)}return'bytes'===c?p.map((t=>t.bytes)):p.map((t=>(0,l.bytesToHex)(t.bytes)))};var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3]),y=r(d[4]),l=r(d[5])}),8216,[8217,8218,8125,8091,8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.maxBytesPerTransaction=e.fieldElementsPerBlob=e.bytesPerFieldElement=e.bytesPerBlob=void 0;const t=e.bytesPerFieldElement=32,l=e.fieldElementsPerBlob=4096,n=e.bytesPerBlob=t*l;e.maxBytesPerTransaction=6*n-1-1*l*6}),8217,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidVersionedHashVersionError=e.InvalidVersionedHashSizeError=e.EmptyBlobError=e.BlobSizeTooLargeError=void 0;var s=r(d[0]),o=r(d[1]);class n extends o.BaseError{constructor({maxSize:s,size:o}){super('Blob size is too large.',{metaMessages:[`Max: ${s} bytes`,`Given: ${o} bytes`],name:'BlobSizeTooLargeError'})}}e.BlobSizeTooLargeError=n;class t extends o.BaseError{constructor(){super('Blob data must not be empty.',{name:'EmptyBlobError'})}}e.EmptyBlobError=t;class l extends o.BaseError{constructor({hash:s,size:o}){super(`Versioned hash "${s}" size is invalid.`,{metaMessages:['Expected: 32',`Received: ${o}`],name:'InvalidVersionedHashSizeError'})}}e.InvalidVersionedHashSizeError=l;class E extends o.BaseError{constructor({hash:o,version:n}){super(`Versioned hash "${o}" version is invalid.`,{metaMessages:[`Expected: ${s.versionedHashVersionKzg}`,`Received: ${n}`],name:'InvalidVersionedHashVersionError'})}}e.InvalidVersionedHashVersionError=E}),8218,[8219,8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.versionedHashVersionKzg=void 0;e.versionedHashVersionKzg=1}),8219,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionType=function(t){if(t.type)return t.type;if(void 0!==t.authorizationList)return'eip7702';if(void 0!==t.blobs||void 0!==t.blobVersionedHashes||void 0!==t.maxFeePerBlobGas||void 0!==t.sidecars)return'eip4844';if(void 0!==t.maxFeePerGas||void 0!==t.maxPriorityFeePerGas)return'eip1559';if(void 0!==t.gasPrice)return void 0!==t.accessList?'eip2930':'legacy';throw new o.InvalidSerializableTransactionError({transaction:t})};var o=r(d[0])}),8220,[8135]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getChainId=async function(n){const u=await n.request({method:'eth_chainId'},{dedupe:!0});return(0,t.hexToNumber)(u)};var t=r(d[0])}),8221,[8098]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getBalance=async function(n,{address:o,blockNumber:c,blockTag:s="latest"}){const u='bigint'==typeof c?(0,t.numberToHex)(c):void 0,l=await n.request({method:'eth_getBalance',params:[o,u||s]});return BigInt(l)};var t=r(d[0])}),8222,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getContractEvents=async function(n,c){const{abi:l,address:v,args:b,blockHash:f,eventName:k,fromBlock:u,toBlock:B,strict:_}=c,y=k?(0,t.getAbiItem)({abi:l,name:k}):void 0,h=y?void 0:l.filter((t=>'event'===t.type));return(0,o.getAction)(n,s.getLogs,'getLogs')({address:v,args:b,blockHash:f,event:y,events:h,fromBlock:u,toBlock:B,strict:_})};var t=r(d[0]),o=r(d[1]),s=r(d[2])}),8223,[8116,8184,8224]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getLogs=async function(c,{address:l,blockHash:p,fromBlock:f,toBlock:b,event:u,events:v,args:h,strict:k}={}){const _=k??!1,L=v??(u?[u]:void 0);let y,B=[];if(L){const o=L.flatMap((o=>(0,t.encodeEventTopics)({abi:[o],eventName:o.name,args:v?void 0:h})));B=[o],u&&(B=B[0])}y=p?await c.request({method:'eth_getLogs',params:[{address:l,topics:B,blockHash:p}]}):await c.request({method:'eth_getLogs',params:[{address:l,topics:B,fromBlock:'bigint'==typeof f?(0,s.numberToHex)(f):f,toBlock:'bigint'==typeof b?(0,s.numberToHex)(b):b}]});const H=y.map((t=>(0,n.formatLog)(t)));return L?(0,o.parseEventLogs)({abi:L,args:h,logs:H,strict:_}):H};var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3])}),8224,[8186,8225,8101,8227]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseEventLogs=function(n){const{abi:s,args:o,logs:f,strict:l=!0}=n,A=(()=>{if(n.eventName)return Array.isArray(n.eventName)?n.eventName:[n.eventName]})();return f.map((n=>{try{const t=s.find((t=>'event'===t.type&&n.topics[0]===(0,u.toEventSelector)(t)));if(!t)return null;const f=(0,c.decodeEventLog)({...n,abi:[t],strict:l});return A&&!A.includes(f.eventName)?null:y({args:f.args,inputs:t.inputs,matchArgs:o})?{...f,...n}:null}catch(s){let o,u;if(s instanceof t.AbiEventSignatureNotFoundError)return null;if(s instanceof t.DecodeLogDataMismatch||s instanceof t.DecodeLogTopicsMismatch){if(l)return null;o=s.abiItem.name,u=s.abiItem.inputs?.some((t=>!('name'in t&&t.name)))}return{...n,args:u?[]:{},eventName:o}}})).filter(Boolean)};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),u=r(d[4]),c=r(d[5]);function y(t){const{args:u,inputs:c,matchArgs:y}=t;if(!y)return!0;if(!u)return!1;function f(t,u,c){try{return'address'===t.type?(0,n.isAddressEqual)(u,c):'string'===t.type||'bytes'===t.type?(0,o.keccak256)((0,s.toBytes)(u))===c:u===c}catch{return!1}}return Array.isArray(u)&&Array.isArray(y)?y.every(((t,n)=>{if(null==t)return!0;const s=c[n];if(!s)return!1;return(Array.isArray(t)?t:[t]).some((t=>f(s,t,u[n])))})):'object'==typeof u&&!Array.isArray(u)&&'object'==typeof y&&!Array.isArray(y)&&Object.entries(y).every((([t,n])=>{if(null==n)return!0;const s=c.find((n=>n.name===t));if(!s)return!1;return(Array.isArray(n)?n:[n]).some((n=>f(s,n,u[t])))}))}}),8225,[8089,8147,8095,8102,8103,8226]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeEventLog=function(h){const{abi:p,data:u,strict:v,topics:b}=h,w=v??!0,[y,...E]=b;if(!y)throw new t.AbiEventSignatureEmptyTopicsError({docsPath:f});const D=p.find((t=>'event'===t.type&&y===(0,o.toEventSelector)((0,s.formatAbiItem)(t))));if(!D||!('name'in D)||'event'!==D.type)throw new t.AbiEventSignatureNotFoundError(y,{docsPath:f});const{name:x,inputs:A}=D,P=A?.some((t=>!('name'in t&&t.name))),L=P?[]:{},S=A.map(((t,n)=>[t,n])).filter((([t])=>'indexed'in t&&t.indexed));for(let n=0;n<S.length;n++){const[o,i]=S[n],c=E[n];if(!c)throw new t.DecodeLogTopicsMismatch({abiItem:D,param:o});L[P?i:o.name||i]=l({param:o,value:c})}const z=A.filter((t=>!('indexed'in t&&t.indexed)));if(z.length>0)if(u&&'0x'!==u)try{const t=(0,c.decodeAbiParameters)(z,u);if(t)if(P)for(let n=0;n<A.length;n++)L[n]=L[n]??t.shift();else for(let n=0;n<z.length;n++)L[z[n].name]=t[n]}catch(o){if(w){if(o instanceof t.AbiDecodingDataSizeTooSmallError||o instanceof i.PositionOutOfBoundsError)throw new t.DecodeLogDataMismatch({abiItem:D,data:u,params:z,size:(0,n.size)(u)});throw o}}else if(w)throw new t.DecodeLogDataMismatch({abiItem:D,data:'0x',params:z,size:0});return{eventName:x,args:Object.values(L).length>0?L:void 0}};var t=r(d[0]),n=r(d[1]),o=r(d[2]),i=r(d[3]),c=r(d[4]),s=r(d[5]);const f='/docs/contract/decodeEventLog';function l({param:t,value:n}){if('string'===t.type||'bytes'===t.type||'tuple'===t.type||t.type.match(/^(.*)\[(\d+)?\]$/))return n;return((0,c.decodeAbiParameters)([t],n)||[])[0]}}),8226,[8089,8091,8103,8126,8124,8090]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLog=function(n,{args:l,eventName:o}={}){return{...n,blockHash:n.blockHash?n.blockHash:null,blockNumber:n.blockNumber?BigInt(n.blockNumber):null,logIndex:n.logIndex?Number(n.logIndex):null,transactionHash:n.transactionHash?n.transactionHash:null,transactionIndex:n.transactionIndex?Number(n.transactionIndex):null,...o?{args:l,eventName:o}:{}}}}),8227,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.readContract=async function(u,f){const{abi:l,address:b,args:N,functionName:_,...h}=f,y=(0,n.encodeFunctionData)({abi:l,args:N,functionName:_});try{const{data:n}=await(0,o.getAction)(u,s.call,'call')({...h,data:y,to:b});return(0,t.decodeFunctionResult)({abi:l,args:N,functionName:_,data:n||'0x'})}catch(t){throw(0,c.getContractError)(t,{abi:l,address:b,args:N,docsPath:'/docs/contract/readContract',functionName:_})}};var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),s=r(d[4])}),8228,[8148,8119,8190,8184,8149]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.simulateContract=async function(f,l){const{abi:b,address:N,args:h,dataSuffix:x,functionName:_,...p}=l,y=p.account?(0,t.parseAccount)(p.account):f.account,C=(0,n.encodeFunctionData)({abi:b,args:h,functionName:_});try{const{data:t}=await(0,s.getAction)(f,u.call,'call')({batch:!1,data:`${C}${x?x.replace('0x',''):''}`,to:N,...p,account:y}),n=(0,c.decodeFunctionResult)({abi:b,args:h,functionName:_,data:t||'0x'});return{result:n,request:{abi:b.filter((t=>'name'in t&&t.name===l.functionName)),address:N,args:h,dataSuffix:x,functionName:_,...p,account:y}}}catch(t){throw(0,o.getContractError)(t,{abi:b,address:N,args:h,docsPath:'/docs/contract/simulateContract',functionName:_,sender:y?.address})}};var t=r(d[0]),c=r(d[1]),n=r(d[2]),o=r(d[3]),s=r(d[4]),u=r(d[5])}),8229,[8118,8148,8119,8190,8184,8149]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchContractEvent=function(w,L){const{abi:k,address:C,args:N,batch:B=!0,eventName:F,fromBlock:I,onError:A,onLogs:D,poll:_,pollingInterval:M=w.pollingInterval,strict:S}=L,O=void 0!==_?_:'bigint'==typeof I||'webSocket'!==w.transport.type&&('fallback'!==w.transport.type||'webSocket'!==w.transport.transports[0].config.type);return O?(()=>{const t=S??!1,o=(0,v.stringify)(['watchContractEvent',C,N,B,w.uid,F,M,t,I]);return(0,f.observe)(o,{onLogs:D,onError:A},(o=>{let s,c;void 0!==I&&(s=I-1n);let f=!1;const v=(0,p.poll)((async()=>{if(f)try{let n;if(c)n=await(0,l.getAction)(w,E.getFilterChanges,'getFilterChanges')({filter:c});else{const o=await(0,l.getAction)(w,b.getBlockNumber,'getBlockNumber')({});n=s&&s<o?await(0,l.getAction)(w,y.getContractEvents,'getContractEvents')({abi:k,address:C,args:N,eventName:F,fromBlock:s+1n,toBlock:o,strict:t}):[],s=o}if(0===n.length)return;if(B)o.onLogs(n);else for(const t of n)o.onLogs([t])}catch(t){c&&t instanceof n.InvalidInputRpcError&&(f=!1),o.onError?.(t)}else{try{c=await(0,l.getAction)(w,u.createContractEventFilter,'createContractEventFilter')({abi:k,address:C,args:N,eventName:F,strict:t,fromBlock:I})}catch{}f=!0}}),{emitOnBegin:!0,interval:M});return async()=>{c&&await(0,l.getAction)(w,h.uninstallFilter,'uninstallFilter')({filter:c}),v()}}))})():(()=>{const n=S??!1,l=(0,v.stringify)(['watchContractEvent',C,N,B,w.uid,F,M,n]);let p=!0,u=()=>p=!1;return(0,f.observe)(l,{onLogs:D,onError:A},(n=>((async()=>{try{const l=(()=>{if('fallback'===w.transport.type){const t=w.transport.transports.find((t=>'webSocket'===t.config.type));return t?t.value:w.transport}return w.transport})(),f=F?(0,s.encodeEventTopics)({abi:k,eventName:F,args:N}):[],{unsubscribe:v}=await l.subscribe({params:['logs',{address:C,topics:f}],onData(s){if(!p)return;const l=s.result;try{const{eventName:t,args:s}=(0,o.decodeEventLog)({abi:k,data:l.data,topics:l.topics,strict:S}),f=(0,c.formatLog)(l,{args:s,eventName:t});n.onLogs([f])}catch(o){let s,f;if(o instanceof t.DecodeLogDataMismatch||o instanceof t.DecodeLogTopicsMismatch){if(S)return;s=o.abiItem.name,f=o.abiItem.inputs?.some((t=>!('name'in t&&t.name)))}const p=(0,c.formatLog)(l,{args:f?[]:{},eventName:s});n.onLogs([p])}},onError(t){n.onError?.(t)}});u=v,p||u()}catch(t){A?.(t)}})(),()=>u())))})()};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),l=r(d[5]),f=r(d[6]),p=r(d[7]),v=r(d[8]),u=r(d[9]),b=r(d[10]),y=r(d[11]),E=r(d[12]),h=r(d[13])}),8230,[8089,8138,8226,8186,8227,8184,8231,8232,8129,8185,8234,8223,8236,8237]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.listenersCache=e.cleanupCache=void 0,e.observe=function(s,c,f){const l=++o,u=()=>n.get(s)||[],h=()=>{const t=u();n.set(s,t.filter((n=>n.id!==l)))},p=()=>{const n=u();if(!n.some((n=>n.id===l)))return;const o=t.get(s);1===n.length&&o&&o(),h()},C=u();if(n.set(s,[...C,{id:l,fns:c}]),C&&C.length>0)return p;const _={};for(const n in c)_[n]=(...t)=>{const o=u();if(0!==o.length)for(const s of o)s.fns[n]?.(...t)};const v=f(_);'function'==typeof v&&t.set(s,v);return p};const n=e.listenersCache=new Map,t=e.cleanupCache=new Map;let o=0}),8231,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.poll=function(n,{emitOnBegin:l,initialWaitTime:o,interval:c}){let u=!0;const w=()=>u=!1;return(async()=>{let s;l&&(s=await n({unpoll:w}));const p=await(o?.(s))??c;await(0,t.wait)(p);const _=async()=>{u&&(await n({unpoll:w}),await(0,t.wait)(c),_())};_()})(),w};var t=r(d[0])}),8232,[8233]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.wait=async function(n){return new Promise((t=>setTimeout(t,n)))}}),8233,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlockNumber=async function(n,{cacheTime:u=n.cacheTime}={}){const o=await(0,c.withCache)((()=>n.request({method:'eth_blockNumber'})),{cacheKey:t(n.uid),cacheTime:u});return BigInt(o)},e.getBlockNumberCache=function(n){return(0,c.getCache)(t(n))};var c=r(d[0]);const t=c=>`blockNumber.${c}`}),8234,[8235]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getCache=s,e.responseCache=e.promiseCache=void 0,e.withCache=async function(t,{cacheKey:c,cacheTime:n=Number.POSITIVE_INFINITY}){const o=s(c),p=o.response.get();if(p&&n>0){if((new Date).getTime()-p.created.getTime()<n)return p.data}let l=o.promise.get();l||(l=t(),o.promise.set(l));try{const t=await l;return o.response.set({created:new Date,data:t}),t}finally{o.promise.clear()}};const t=e.promiseCache=new Map,c=e.responseCache=new Map;function s(s){const n=(t,c)=>({clear:()=>c.delete(t),get:()=>c.get(t),set:s=>c.set(t,s)}),o=n(s,t),p=n(s,c);return{clear:()=>{o.clear(),p.clear()},promise:o,response:p}}}),8235,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getFilterChanges=async function(s,{filter:o}){const c='strict'in o&&o.strict,f=await o.request({method:'eth_getFilterChanges',params:[o.id]});if('string'==typeof f[0])return f;const u=f.map((t=>(0,n.formatLog)(t)));return'abi'in o&&o.abi?(0,t.parseEventLogs)({abi:o.abi,logs:u,strict:c}):u};var t=r(d[0]),n=r(d[1])}),8236,[8225,8227]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.uninstallFilter=async function(t,{filter:n}){return n.request({method:'eth_uninstallFilter',params:[n.id]})}}),8237,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.writeContract=async function(f,w){const{abi:h,account:l=f.account,address:b,args:C,dataSuffix:N,functionName:_,...p}=w;if(void 0===l)throw new n.AccountNotFoundError({docsPath:'/docs/contract/writeContract'});const v=l?(0,t.parseAccount)(l):null,y=(0,c.encodeFunctionData)({abi:h,args:C,functionName:_});try{return await(0,s.getAction)(f,u.sendTransaction,'sendTransaction')({data:`${y}${N?N.replace('0x',''):''}`,to:b,account:v,...p})}catch(t){throw(0,o.getContractError)(t,{abi:h,address:b,args:C,docsPath:'/docs/contract/writeContract',functionName:_,sender:v?.address})}};var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),s=r(d[4]),u=r(d[5])}),8238,[8118,8239,8119,8190,8184,8240]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AccountTypeNotSupportedError=e.AccountNotFoundError=void 0;var o=r(d[0]);class t extends o.BaseError{constructor({docsPath:o}={}){super(['Could not find an Account to execute with this Action.','Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.'].join('\n'),{docsPath:o,docsSlug:'account',name:'AccountNotFoundError'})}}e.AccountNotFoundError=t;class c extends o.BaseError{constructor({docsPath:o,metaMessages:t,type:c}){super(`Account type "${c}" is not supported.`,{docsPath:o,metaMessages:t,name:'AccountTypeNotSupportedError'})}}e.AccountTypeNotSupportedError=c}),8239,[8093]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.sendTransaction=async function(l,R){const{account:E=l.account,chain:F=l.chain,accessList:b,authorizationList:v,blobs:A,data:x,gas:z,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:M,maxPriorityFeePerGas:q,nonce:L,type:N,value:I,..._}=R;if(void 0===E)throw new e.AccountNotFoundError({docsPath:'/docs/actions/wallet/sendTransaction'});const S=E?(0,t.parseAccount)(E):null;try{(0,w.assertRequest)(R);const t=await(async()=>R.to?R.to:null!==R.to&&v&&v.length>0?await(0,n.recoverAuthorizationAddress)({authorization:v[0]}).catch((()=>{throw new o.BaseError('`to` is required. Could not infer from `authorizationList`.')})):void 0)();if('json-rpc'===S?.type||null===S){let e;null!==F&&(e=await(0,p.getAction)(l,y.getChainId,'getChainId')({}),(0,s.assertCurrentChain)({currentChainId:e,chain:F}));const o=l.chain?.formatters?.transactionRequest?.format,n=(o||h.formatTransactionRequest)({...(0,u.extract)(_,{format:o}),accessList:b,authorizationList:v,blobs:A,chainId:e,data:x,from:S?.address,gas:z,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:M,maxPriorityFeePerGas:q,nonce:L,to:t,type:N,value:I}),c=T.get(l.uid),w=c?'wallet_sendTransaction':'eth_sendTransaction';try{return await l.request({method:w,params:[n]},{retryCount:0})}catch(t){if(!1===c)throw t;const e=t;if('InvalidInputRpcError'===e.name||'InvalidParamsRpcError'===e.name||'MethodNotFoundRpcError'===e.name||'MethodNotSupportedRpcError'===e.name)return await l.request({method:'wallet_sendTransaction',params:[n]},{retryCount:0}).then((t=>(T.set(l.uid,!0),t))).catch((t=>{const o=t;if('MethodNotFoundRpcError'===o.name||'MethodNotSupportedRpcError'===o.name)throw T.set(l.uid,!1),e;throw o}));throw e}}if('local'===S?.type){const e=await(0,p.getAction)(l,P.prepareTransactionRequest,'prepareTransactionRequest')({account:S,accessList:b,authorizationList:v,blobs:A,chain:F,data:x,gas:z,gasPrice:C,maxFeePerBlobGas:G,maxFeePerGas:M,maxPriorityFeePerGas:q,nonce:L,nonceManager:S.nonceManager,parameters:[...P.defaultParameters,'sidecars'],type:N,value:I,..._,to:t}),o=F?.serializers?.transaction,n=await S.signTransaction(e,{serializer:o});return await(0,p.getAction)(l,f.sendRawTransaction,'sendRawTransaction')({serializedTransaction:n})}if('smart'===S?.type)throw new e.AccountTypeNotSupportedError({metaMessages:['Consider using the `sendUserOperation` Action instead.'],docsPath:'/docs/actions/bundler/sendUserOperation',type:'smart'});throw new e.AccountTypeNotSupportedError({docsPath:'/docs/actions/wallet/sendTransaction',type:S?.type})}catch(t){if(t instanceof e.AccountTypeNotSupportedError)throw t;throw(0,c.getTransactionError)(t,{...R,account:S,chain:R.chain||void 0})}};var t=r(d[0]),e=r(d[1]),o=r(d[2]),n=r(d[3]),s=r(d[4]),c=r(d[5]),u=r(d[6]),h=r(d[7]),p=r(d[8]),l=r(d[9]),w=r(d[10]),y=r(d[11]),P=r(d[12]),f=r(d[13]);const T=new l.LruMap(128)}),8240,[8118,8239,8093,8192,8241,8242,8141,8142,8184,8111,8145,8221,8200,8243]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.assertCurrentChain=function({chain:t,currentChainId:h}){if(!t)throw new n.ChainNotFoundError;if(h!==t.id)throw new n.ChainMismatchError({chain:t,currentChainId:h})};var n=r(d[0])}),8241,[8163]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionError=function(c,{docsPath:s,...u}){const E=(()=>{const o=(0,t.getNodeError)(c,u);return o instanceof n.UnknownNodeError?c:o})();return new o.TransactionExecutionError(E,{docsPath:s,...u})};var n=r(d[0]),o=r(d[1]),t=r(d[2])}),8242,[8139,8135,8140]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sendRawTransaction=async function(n,{serializedTransaction:t}){return n.request({method:'eth_sendRawTransaction',params:[t]},{retryCount:0})}}),8243,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WaitForCallsStatusTimeoutError=void 0,e.waitForCallsStatus=async function(t,v){const{id:w,pollingInterval:f=t.pollingInterval,status:C=({statusCode:t})=>t>=200,timeout:T=6e4}=v,p=(0,n.stringify)(['waitForCallsStatus',t.uid,w]),{promise:S,resolve:y,reject:F}=(0,l.withResolvers)();let b;const h=(0,o.observe)(p,{resolve:y,reject:F},(o=>{const l=(0,s.poll)((async()=>{const s=t=>{clearTimeout(b),l(),t(),h()};try{const l=await(0,u.getCallsStatus)(t,{id:w});if(!C(l))return;s((()=>o.resolve(l)))}catch(t){s((()=>o.reject(t)))}}),{interval:f,emitOnBegin:!0});return l}));return b=T?setTimeout((()=>{h(),clearTimeout(b),F(new c({id:w}))}),T):void 0,await S};var t=r(d[0]),o=r(d[1]),s=r(d[2]),l=r(d[3]),n=r(d[4]),u=r(d[5]);class c extends t.BaseError{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:'WaitForCallsStatusTimeoutError'})}}e.WaitForCallsStatusTimeoutError=c}),8244,[8093,8231,8232,8168,8129,8245]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getCallsStatus=async function(o,u){const{atomic:l=!1,chainId:p,receipts:h,version:f="2.0.0",...v}=await(async function(c){if(c.endsWith(n.fallbackMagicIdentifier.slice(2))){const u=(0,s.trim)((0,t.sliceHex)(c,-64,-32)),l=(0,t.sliceHex)(c,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(l.map((t=>n.fallbackTransactionErrorMagicIdentifier.slice(2)!==t?o.request({method:'eth_getTransactionReceipt',params:[`0x${t}`]},{dedupe:!0}):void 0))),h=p.some((t=>null===t))?100:p.every((t=>'0x1'===t?.status))?200:p.every((t=>'0x0'===t?.status))?500:600;return{atomic:!1,chainId:(0,r.hexToNumber)(u),receipts:p.filter(Boolean),status:h,version:'2.0.0'}}return o.request({method:'wallet_getCallsStatus',params:[c]})})(u.id),[b,x]=(()=>{const t=v.status;return t>=100&&t<200?['pending',t]:t>=200&&t<300?['success',t]:t>=300&&t<700?['failure',t]:'CONFIRMED'===t?['success',200]:'PENDING'===t?['pending',100]:[void 0,t]})();return{...v,atomic:l,chainId:p?(0,r.hexToNumber)(p):void 0,receipts:h?.map((t=>({...t,blockNumber:(0,r.hexToBigInt)(t.blockNumber),gasUsed:(0,r.hexToBigInt)(t.gasUsed),status:c.receiptStatuses[t.status]})))??[],statusCode:x,status:b,version:f}};var t=_r(d[0]),s=_r(d[1]),r=_r(d[2]),c=_r(d[3]),n=_r(d[4])}),8245,[8114,8100,8098,8246,8247]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defineTransactionReceipt=void 0,e.formatTransactionReceipt=l,e.receiptStatuses=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),c=r(d[3]);const o=e.receiptStatuses={'0x0':'reverted','0x1':'success'};function l(s){const l={...s,blockNumber:s.blockNumber?BigInt(s.blockNumber):null,contractAddress:s.contractAddress?s.contractAddress:null,cumulativeGasUsed:s.cumulativeGasUsed?BigInt(s.cumulativeGasUsed):null,effectiveGasPrice:s.effectiveGasPrice?BigInt(s.effectiveGasPrice):null,gasUsed:s.gasUsed?BigInt(s.gasUsed):null,logs:s.logs?s.logs.map((t=>(0,n.formatLog)(t))):null,to:s.to?s.to:null,transactionIndex:s.transactionIndex?(0,t.hexToNumber)(s.transactionIndex):null,status:s.status?o[s.status]:null,type:s.type?c.transactionType[s.type]||s.type:null};return s.blobGasPrice&&(l.blobGasPrice=BigInt(s.blobGasPrice)),s.blobGasUsed&&(l.blobGasUsed=BigInt(s.blobGasUsed)),l}e.defineTransactionReceipt=(0,s.defineFormatter)('transactionReceipt',l)}),8246,[8098,8143,8227,8207]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fallbackTransactionErrorMagicIdentifier=e.fallbackMagicIdentifier=void 0,e.sendCalls=async function(h,v){const{account:w=h.account,capabilities:T,chain:y=h.chain,experimental_fallback:x,experimental_fallbackDelay:E=32,forceAtomic:_=!1,id:k,version:C="2.0.0"}=v,M=w?(0,t.parseAccount)(w):null,I=v.calls.map((t=>{const o=t;return{data:o.abi?(0,r.encodeFunctionData)({abi:o.abi,functionName:o.functionName,args:o.args}):o.data,to:o.to,value:o.value?(0,l.numberToHex)(o.value):void 0}}));try{const t=await h.request({method:'wallet_sendCalls',params:[{atomicRequired:_,calls:I,capabilities:T,chainId:(0,l.numberToHex)(y.id),from:M?.address,id:k,version:C}]},{retryCount:0});return'string'==typeof t?{id:t}:t}catch(t){const r=t;if(x&&('MethodNotFoundRpcError'===r.name||'MethodNotSupportedRpcError'===r.name||r.details.toLowerCase().includes('does not exist / is not available')||r.details.toLowerCase().includes('missing or invalid. request()')||r.details.toLowerCase().includes('did not match any variant of untagged enum'))){if(T){if(Object.values(T).some((t=>!t.optional))){const t='non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.';throw new n.UnsupportedNonOptionalCapabilityError(new o.BaseError(t,{details:t}))}}if(_&&I.length>1){const t='`forceAtomic` is not supported on fallback to `eth_sendTransaction`.';throw new n.AtomicityNotSupportedError(new o.BaseError(t,{details:t}))}const t=[];for(const o of I){const n=(0,f.sendTransaction)(h,{account:M,chain:y,data:o.data,to:o.to,value:o.value?(0,c.hexToBigInt)(o.value):void 0});t.push(n),E>0&&await new Promise((t=>setTimeout(t,E)))}const r=await Promise.allSettled(t);if(r.every((t=>'rejected'===t.status)))throw r[0].reason;const u=r.map((t=>'fulfilled'===t.status?t.value:b));return{id:(0,s.concat)([...u,(0,l.numberToHex)(y.id,{size:32}),p])}}throw(0,u.getTransactionError)(t,{...v,account:M,chain:v.chain})}};var t=_r(d[0]),o=_r(d[1]),n=_r(d[2]),r=_r(d[3]),s=_r(d[4]),c=_r(d[5]),l=_r(d[6]),u=_r(d[7]),f=_r(d[8]);const p=e.fallbackMagicIdentifier='0x5792579257925792579257925792579257925792579257925792579257925792',b=e.fallbackTransactionErrorMagicIdentifier=(0,l.numberToHex)(0,{size:32})}),8247,[8118,8093,8138,8119,8113,8098,8101,8242,8240]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=function(c){const{batch:o,chain:u,ccipRead:l,key:s="base",name:p="Base Client",type:h="base"}=c,b=u?.blockTime??12e3,f=Math.min(Math.max(Math.floor(b/2),500),4e3),v=c.pollingInterval??f,y=c.cacheTime??v,M=c.account?(0,n.parseAccount)(c.account):void 0,{config:_,request:j,value:k}=c.transport({chain:u,pollingInterval:v}),x={..._,...k},I={account:M,batch:o,cacheTime:y,ccipRead:l,chain:u,key:s,name:p,pollingInterval:v,request:j,transport:x,type:h,uid:(0,t.uid)()};return Object.assign(I,{extend:(function n(t){return c=>{const o=c(t);for(const n in I)delete o[n];const u={...t,...o};return Object.assign(u,{extend:n(u)})}})(I)})},e.rpcSchema=function(){return null};var n=r(d[0]),t=r(d[1])}),8248,[8118,8249]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.uid=function(o=11){if(!n||i+o>512){n='',i=0;for(let i=0;i<t;i++)n+=(256+256*Math.random()|0).toString(16).substring(1)}return n.substring(i,i+++o)};const t=256;let n,i=t}),8249,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.custom=function(o,n={}){const{key:u="custom",methods:s,name:y="Custom Provider",retryDelay:c}=n;return({retryCount:l})=>(0,t.createTransport)({key:u,methods:s,name:y,request:o.request.bind(o),retryCount:n.retryCount??l,retryDelay:c,type:'custom'})};var t=r(d[0])}),8250,[8251]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createTransport=function({key:o,methods:n,name:y,request:s,retryCount:l=3,retryDelay:c=150,timeout:f,type:p},q){const _=(0,u.uid)();return{config:{key:o,methods:n,name:y,request:s,retryCount:l,retryDelay:c,timeout:f,type:p},request:(0,t.buildRequest)(s,{methods:n,retryCount:l,retryDelay:c,uid:_}),value:q}};var t=r(d[0]),u=r(d[1])}),8251,[8252,8249]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.buildRequest=function(h,E={}){return async(R,l={})=>{const{dedupe:y=!1,methods:U,retryDelay:I=150,retryCount:v=3,uid:f}={...E,...l},{method:N}=R;if(U?.exclude?.includes(N))throw new c.MethodNotSupportedRpcError(new Error('method not supported'),{method:N});if(U?.include&&!U.include.includes(N))throw new c.MethodNotSupportedRpcError(new Error('method not supported'),{method:N});const P=y?(0,n.stringToHex)(`${f}.${(0,p.stringify)(R)}`):void 0;return(0,s.withDedupe)((()=>(0,u.withRetry)((async()=>{try{return await h(R)}catch(t){const n=t;switch(n.code){case c.ParseRpcError.code:throw new c.ParseRpcError(n);case c.InvalidRequestRpcError.code:throw new c.InvalidRequestRpcError(n);case c.MethodNotFoundRpcError.code:throw new c.MethodNotFoundRpcError(n,{method:R.method});case c.InvalidParamsRpcError.code:throw new c.InvalidParamsRpcError(n);case c.InternalRpcError.code:throw new c.InternalRpcError(n);case c.InvalidInputRpcError.code:throw new c.InvalidInputRpcError(n);case c.ResourceNotFoundRpcError.code:throw new c.ResourceNotFoundRpcError(n);case c.ResourceUnavailableRpcError.code:throw new c.ResourceUnavailableRpcError(n);case c.TransactionRejectedRpcError.code:throw new c.TransactionRejectedRpcError(n);case c.MethodNotSupportedRpcError.code:throw new c.MethodNotSupportedRpcError(n,{method:R.method});case c.LimitExceededRpcError.code:throw new c.LimitExceededRpcError(n);case c.JsonRpcVersionUnsupportedError.code:throw new c.JsonRpcVersionUnsupportedError(n);case c.UserRejectedRequestError.code:throw new c.UserRejectedRequestError(n);case c.UnauthorizedProviderError.code:throw new c.UnauthorizedProviderError(n);case c.UnsupportedProviderMethodError.code:throw new c.UnsupportedProviderMethodError(n);case c.ProviderDisconnectedError.code:throw new c.ProviderDisconnectedError(n);case c.ChainDisconnectedError.code:throw new c.ChainDisconnectedError(n);case c.SwitchChainError.code:throw new c.SwitchChainError(n);case c.UnsupportedNonOptionalCapabilityError.code:throw new c.UnsupportedNonOptionalCapabilityError(n);case c.UnsupportedChainIdError.code:throw new c.UnsupportedChainIdError(n);case c.DuplicateIdError.code:throw new c.DuplicateIdError(n);case c.UnknownBundleIdError.code:throw new c.UnknownBundleIdError(n);case c.BundleTooLargeError.code:throw new c.BundleTooLargeError(n);case c.AtomicReadyWalletRejectedUpgradeError.code:throw new c.AtomicReadyWalletRejectedUpgradeError(n);case c.AtomicityNotSupportedError.code:throw new c.AtomicityNotSupportedError(n);case 5e3:throw new c.UserRejectedRequestError(n);default:if(t instanceof o.BaseError)throw t;throw new c.UnknownRpcError(n)}}}),{delay:({count:o,error:c})=>{if(c&&c instanceof t.HttpRequestError){const o=c?.headers?.get('Retry-After');if(o?.match(/\d/))return 1e3*Number.parseInt(o)}return(1<<o)*I},retryCount:v,shouldRetry:({error:o})=>w(o)})),{enabled:y,id:P})}},e.shouldRetry=w;var o=r(d[0]),t=r(d[1]),c=r(d[2]),n=r(d[3]),s=r(d[4]),u=r(d[5]),p=r(d[6]);function w(o){return'code'in o&&'number'==typeof o.code?-1===o.code||(o.code===c.LimitExceededRpcError.code||o.code===c.InternalRpcError.code):!(o instanceof t.HttpRequestError&&o.status)||(403===o.status||(408===o.status||(413===o.status||(429===o.status||(500===o.status||(502===o.status||(503===o.status||504===o.status)))))))}}),8252,[8093,8137,8138,8101,8253,8254,8129]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.promiseCache=void 0,e.withDedupe=function(t,{enabled:o=!0,id:u}){if(!o||!u)return t();if(n.get(u))return n.get(u);const c=t().finally((()=>n.delete(u)));return n.set(u,c),c};var t=r(d[0]);const n=e.promiseCache=new t.LruMap(8192)}),8253,[8111]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.withRetry=function(n,{delay:o=100,retryCount:c=2,shouldRetry:u=()=>!0}={}){return new Promise(((s,y)=>{const f=async({count:w=0}={})=>{const l=async({error:n})=>{const c='function'==typeof o?o({count:w,error:n}):o;c&&await(0,t.wait)(c),f({count:w+1})};try{const t=await n();s(t)}catch(t){if(w<c&&await u({count:w,error:t}))return l({error:t});y(t)}};f()}))};var t=r(d[0])}),8254,[8233]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fallback=function(t,n={}){const{key:a="fallback",name:i="Fallback",rank:u=!1,shouldThrow:l=s,retryCount:p,retryDelay:h}=n;return({chain:n,pollingInterval:s=4e3,timeout:y,...f})=>{let w=t,b=()=>{};const k=(0,o.createTransport)({key:a,name:i,async request({method:t,params:a}){let o;const s=async(c=0)=>{const i=w[c]({...f,chain:n,retryCount:0,timeout:y});try{const n=await i.request({method:t,params:a});return b({method:t,params:a,response:n,transport:i,status:'success'}),n}catch(u){if(b({error:u,method:t,params:a,transport:i,status:'error'}),l(u))throw u;if(c===w.length-1)throw u;if(o??=w.slice(c+1).some((a=>{const{include:o,exclude:s}=a({chain:n}).config.methods||{};return o?o.includes(t):!s||!s.includes(t)})),!o)throw u;return s(c+1)}};return s()},retryCount:p,retryDelay:h,type:'fallback'},{onResponse:t=>b=t,transports:w.map((t=>t({chain:n,retryCount:0})))});if(u){const t='object'==typeof u?u:{};c({chain:n,interval:t.interval??s,onTransports:t=>w=t,ping:t.ping,sampleCount:t.sampleCount,timeout:t.timeout,transports:w,weights:t.weights})}return k}},e.rankTransports=c,e.shouldThrow=s;var t=r(d[0]),n=r(d[1]),a=r(d[2]),o=r(d[3]);function s(a){return!(!('code'in a)||'number'!=typeof a.code||a.code!==n.TransactionRejectedRpcError.code&&a.code!==n.UserRejectedRequestError.code&&!t.ExecutionRevertedError.nodeMessage.test(a.message)&&5e3!==a.code)}function c({chain:t,interval:n=4e3,onTransports:o,ping:s,sampleCount:c=10,timeout:i=1e3,transports:u,weights:l={}}){const{stability:p=.7,latency:h=.3}=l,y=[],f=async()=>{const l=await Promise.all(u.map((async n=>{const a=n({chain:t,retryCount:0,timeout:i}),o=Date.now();let c,u;try{await(s?s({transport:a}):a.request({method:'net_listening'})),u=1}catch{u=0}finally{c=Date.now()}return{latency:c-o,success:u}})));y.push(l),y.length>c&&y.shift();const w=Math.max(...y.map((t=>Math.max(...t.map((({latency:t})=>t)))))),b=u.map(((t,n)=>{const a=y.map((t=>t[n].latency)),o=1-a.reduce(((t,n)=>t+n),0)/a.length/w,s=y.map((t=>t[n].success)),c=s.reduce(((t,n)=>t+n),0)/s.length;return 0===c?[0,n]:[h*o+p*c,n]})).sort(((t,n)=>n[0]-t[0]));o(b.map((([,t])=>u[t]))),await(0,a.wait)(n),f()};f()}}),8255,[8139,8138,8233,8251]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.http=function(a,c={}){const{batch:h,fetchOptions:p,key:l="http",methods:y,name:f="HTTP JSON-RPC",onFetchRequest:w,onFetchResponse:R,retryDelay:b,raw:q}=c;return({chain:C,retryCount:O,timeout:S})=>{const{batchSize:_=1e3,wait:P=0}='object'==typeof h?h:{},T=c.retryCount??O,j=S??c.timeout??1e4,k=a||C?.rpcUrls.default.http[0];if(!k)throw new o.UrlRequiredError;const v=(0,s.getHttpRpcClient)(k,{fetchOptions:p,onRequest:w,onResponse:R,timeout:j});return(0,u.createTransport)({key:l,methods:y,name:f,async request({method:o,params:s}){const u={method:o,params:s},{schedule:a}=(0,n.createBatchScheduler)({id:k,wait:P,shouldSplitBatch:t=>t.length>_,fn:t=>v.request({body:t}),sort:(t,o)=>t.id-o.id}),[{error:c,result:p}]=await(async t=>h?a(t):[await v.request({body:t})])(u);if(q)return{error:c,result:p};if(c)throw new t.RpcRequestError({body:u,error:c,url:k});return p},retryCount:T,retryDelay:b,timeout:j,type:'http'},{fetchOptions:p,url:k})}};var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),u=r(d[4])}),8256,[8137,8257,8167,8258,8251]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UrlRequiredError=void 0;var o=r(d[0]);class t extends o.BaseError{constructor(){super('No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.',{docsPath:'/docs/clients/intro',name:'UrlRequiredError'})}}e.UrlRequiredError=t}),8257,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getHttpRpcClient=function(u,c={}){return{async request(h){const{body:p,onRequest:l=c.onRequest,onResponse:y=c.onResponse,timeout:f=c.timeout??1e4}=h,w={...c.fetchOptions??{},...h.fetchOptions??{}},{headers:R,method:q,signal:T}=w;try{const c=await(0,o.withTimeout)((async({signal:t})=>{const o={...w,body:Array.isArray(p)?(0,s.stringify)(p.map((t=>({jsonrpc:'2.0',id:t.id??n.idCache.take(),...t})))):(0,s.stringify)({jsonrpc:'2.0',id:p.id??n.idCache.take(),...p}),headers:{'Content-Type':'application/json',...R},method:q||'POST',signal:T||(f>0?t:null)},c=new Request(u,o),h=await(l?.(c,o))??{...o,url:u};return await fetch(h.url??u,h)}),{errorInstance:new t.TimeoutError({body:p,url:u}),timeout:f,signal:!0});let h;if(y&&await y(c),c.headers.get('Content-Type')?.startsWith('application/json'))h=await c.json();else{h=await c.text();try{h=JSON.parse(h||'{}')}catch(t){if(c.ok)throw t;h={error:h}}}if(!c.ok)throw new t.HttpRequestError({body:p,details:(0,s.stringify)(h.error)||c.statusText,headers:c.headers,status:c.status,url:u});return h}catch(o){if(o instanceof t.HttpRequestError)throw o;if(o instanceof t.TimeoutError)throw o;throw new t.HttpRequestError({body:p,cause:o,url:u})}}}};var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3])}),8258,[8137,8259,8129,8260]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.withTimeout=function(t,{errorInstance:n=new Error('timed out'),timeout:o,signal:l}){return new Promise(((u,c)=>{(async()=>{let s;try{const w=new AbortController;o>0&&(s=setTimeout((()=>{l?w.abort():c(n)}),o)),u(await t({signal:w?.signal||null}))}catch(t){'AbortError'===t?.name&&c(n),c(t)}finally{clearTimeout(s)}})()}))}}),8259,[]);
__d((function(g,r,i,a,m,e,d){function t(){return{current:0,take(){return this.current++},reset(){this.current=0}}}Object.defineProperty(e,"__esModule",{value:!0}),e.idCache=void 0;e.idCache=t()}),8260,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createPublicClient=function(c){const{key:l="public",name:u="Public Client"}=c;return(0,n.createClient)({...c,key:l,name:u,type:'publicClient'}).extend(t.publicActions)};var n=r(d[0]),t=r(d[1])}),8261,[8248,8262]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.publicActions=function(re){return{call:t=>(0,l.call)(re,t),createAccessList:t=>(0,u.createAccessList)(re,t),createBlockFilter:()=>(0,C.createBlockFilter)(re),createContractEventFilter:t=>(0,F.createContractEventFilter)(re,t),createEventFilter:t=>(0,T.createEventFilter)(re,t),createPendingTransactionFilter:()=>(0,v.createPendingTransactionFilter)(re),estimateContractGas:t=>(0,B.estimateContractGas)(re,t),estimateGas:t=>(0,w.estimateGas)(re,t),getBalance:t=>(0,P.getBalance)(re,t),getBlobBaseFee:()=>(0,h.getBlobBaseFee)(re),getBlock:t=>(0,p.getBlock)(re,t),getBlockNumber:t=>(0,y.getBlockNumber)(re,t),getBlockTransactionCount:t=>(0,f.getBlockTransactionCount)(re,t),getBytecode:t=>(0,R.getCode)(re,t),getChainId:()=>(0,G.getChainId)(re),getCode:t=>(0,R.getCode)(re,t),getContractEvents:t=>(0,A.getContractEvents)(re,t),getEip712Domain:t=>(0,b.getEip712Domain)(re,t),getEnsAddress:n=>(0,t.getEnsAddress)(re,n),getEnsAvatar:t=>(0,n.getEnsAvatar)(re,t),getEnsName:t=>(0,s.getEnsName)(re,t),getEnsResolver:t=>(0,c.getEnsResolver)(re,t),getEnsText:t=>(0,o.getEnsText)(re,t),getFeeHistory:t=>(0,M.getFeeHistory)(re,t),estimateFeesPerGas:t=>(0,E.estimateFeesPerGas)(re,t),getFilterChanges:t=>(0,L.getFilterChanges)(re,t),getFilterLogs:t=>(0,N.getFilterLogs)(re,t),getGasPrice:()=>(0,x.getGasPrice)(re),getLogs:t=>(0,D.getLogs)(re,t),getProof:t=>(0,S.getProof)(re,t),estimateMaxPriorityFeePerGas:t=>(0,k.estimateMaxPriorityFeePerGas)(re,t),getStorageAt:t=>(0,_.getStorageAt)(re,t),getTransaction:t=>(0,q.getTransaction)(re,t),getTransactionConfirmations:t=>(0,H.getTransactionConfirmations)(re,t),getTransactionCount:t=>(0,I.getTransactionCount)(re,t),getTransactionReceipt:t=>(0,j.getTransactionReceipt)(re,t),multicall:t=>(0,O.multicall)(re,t),prepareTransactionRequest:t=>(0,ne.prepareTransactionRequest)(re,t),readContract:t=>(0,z.readContract)(re,t),sendRawTransaction:t=>(0,se.sendRawTransaction)(re,t),simulate:t=>(0,J.simulateBlocks)(re,t),simulateBlocks:t=>(0,J.simulateBlocks)(re,t),simulateCalls:t=>(0,K.simulateCalls)(re,t),simulateContract:t=>(0,Q.simulateContract)(re,t),verifyMessage:t=>(0,V.verifyMessage)(re,t),verifySiweMessage:t=>(0,ae.verifySiweMessage)(re,t),verifyTypedData:t=>(0,W.verifyTypedData)(re,t),uninstallFilter:t=>(0,U.uninstallFilter)(re,t),waitForTransactionReceipt:t=>(0,X.waitForTransactionReceipt)(re,t),watchBlocks:t=>(0,Z.watchBlocks)(re,t),watchBlockNumber:t=>(0,Y.watchBlockNumber)(re,t),watchContractEvent:t=>(0,$.watchContractEvent)(re,t),watchEvent:t=>(0,ee.watchEvent)(re,t),watchPendingTransactions:t=>(0,te.watchPendingTransactions)(re,t)}};var t=r(d[0]),n=r(d[1]),s=r(d[2]),c=r(d[3]),o=r(d[4]),l=r(d[5]),u=r(d[6]),C=r(d[7]),F=r(d[8]),T=r(d[9]),v=r(d[10]),B=r(d[11]),E=r(d[12]),w=r(d[13]),k=r(d[14]),P=r(d[15]),h=r(d[16]),p=r(d[17]),y=r(d[18]),f=r(d[19]),G=r(d[20]),R=r(d[21]),A=r(d[22]),b=r(d[23]),M=r(d[24]),L=r(d[25]),N=r(d[26]),x=r(d[27]),D=r(d[28]),S=r(d[29]),_=r(d[30]),q=r(d[31]),H=r(d[32]),I=r(d[33]),j=r(d[34]),O=r(d[35]),z=r(d[36]),J=r(d[37]),K=r(d[38]),Q=r(d[39]),U=r(d[40]),V=r(d[41]),W=r(d[42]),X=r(d[43]),Y=r(d[44]),Z=r(d[45]),$=r(d[46]),ee=r(d[47]),te=r(d[48]),ae=r(d[49]),ne=r(d[50]),se=r(d[51])}),8262,[8263,8270,8275,8276,8274,8149,8277,8278,8185,8279,8280,8189,8201,8191,8203,8222,8281,8204,8234,8282,8221,8283,8223,8284,8286,8236,8288,8208,8224,8289,8334,8335,8336,8209,8337,8338,8228,8339,8340,8229,8237,8355,8358,8359,8360,8361,8230,8362,8363,8364,8200,8243]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnsAddress=async function(A,w){const{blockNumber:y,blockTag:N,coinType:k,name:T,gatewayUrls:x,strict:B}=w,{chain:C}=A,U=(()=>{if(w.universalResolverAddress)return w.universalResolverAddress;if(!C)throw new Error('client chain not configured. universalResolverAddress is required.');return(0,o.getChainContractAddress)({blockNumber:y,chain:C,contract:'ensUniversalResolver'})})(),_=C?.ensTlds;if(_&&!_.some((n=>T.endsWith(n))))return null;try{const o=(0,t.encodeFunctionData)({abi:n.addressResolverAbi,functionName:'addr',...null!=k?{args:[(0,h.namehash)(T),BigInt(k)]}:{args:[(0,h.namehash)(T)]}}),u={address:U,abi:n.universalResolverResolveAbi,functionName:'resolve',args:[(0,c.toHex)((0,b.packetToBytes)(T)),o,x??[v.localBatchGatewayUrl]],blockNumber:y,blockTag:N},w=(0,f.getAction)(A,R.readContract,'readContract'),B=await w(u);if('0x'===B[0])return null;const C=(0,s.decodeFunctionResult)({abi:n.addressResolverAbi,args:null!=k?[(0,h.namehash)(T),BigInt(k)]:void 0,functionName:'addr',data:B[0]});return'0x'===C||'0x00'===(0,l.trim)(C)?null:C}catch(n){if(B)throw n;if((0,u.isNullUniversalResolverError)(n,'resolve'))return null;throw n}};var n=r(d[0]),s=r(d[1]),t=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),u=r(d[6]),v=r(d[7]),h=r(d[8]),b=r(d[9]),f=r(d[10]),R=r(d[11])}),8263,[8160,8148,8119,8165,8100,8101,8264,8169,8265,8267,8184,8228]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.isNullUniversalResolverError=function(n,s){if(!(n instanceof o.BaseError))return!1;const c=n.walk((e=>e instanceof t.ContractFunctionRevertedError));return c instanceof t.ContractFunctionRevertedError&&('ResolverNotFound'===c.data?.errorName||('ResolverWildcardNotSupported'===c.data?.errorName||('ResolverNotContract'===c.data?.errorName||('ResolverError'===c.data?.errorName||('HttpError'===c.data?.errorName||(!!c.reason?.includes('Wildcard on non-extended resolvers is not supported')||'reverse'===s&&c.reason===e.panicReasons[50]))))))};var e=r(d[0]),o=r(d[1]),t=r(d[2])}),8264,[8122,8093,8121]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.namehash=function(l){let i=new Uint8Array(32).fill(0);if(!l)return(0,o.bytesToHex)(i);const y=l.split('.');for(let o=y.length-1;o>=0;o-=1){const l=(0,c.encodedLabelToLabelhash)(y[o]),b=l?(0,n.toBytes)(l):(0,s.keccak256)((0,n.stringToBytes)(y[o]),'bytes');i=(0,s.keccak256)((0,t.concat)([i,b]),'bytes')}return(0,o.bytesToHex)(i)};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4])}),8265,[8113,8095,8101,8102,8266]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodedLabelToLabelhash=function(l){if(66!==l.length)return null;if(0!==l.indexOf('['))return null;if(65!==l.indexOf(']'))return null;const u=`0x${l.slice(1,65)}`;return(0,n.isHex)(u)?u:null};var n=r(d[0])}),8266,[8092]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.packetToBytes=function(l){const o=l.replace(/^\.|\.$/gm,'');if(0===o.length)return new Uint8Array(1);const h=new Uint8Array((0,t.stringToBytes)(o).byteLength+2);let i=0;const c=o.split('.');for(let l=0;l<c.length;l++){let o=(0,t.stringToBytes)(c[l]);o.byteLength>255&&(o=(0,t.stringToBytes)((0,n.encodeLabelhash)((0,s.labelhash)(c[l])))),h[i]=o.length,h.set(o,i+1),i+=o.length+1}return h.byteLength!==i+1?h.slice(0,i+1):h};var t=r(d[0]),n=r(d[1]),s=r(d[2])}),8267,[8095,8268,8269]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeLabelhash=function(n){return`[${n.slice(2)}]`}}),8268,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.labelhash=function(c){const s=new Uint8Array(32).fill(0);return c?(0,l.encodedLabelToLabelhash)(c)||(0,o.keccak256)((0,n.stringToBytes)(c)):(0,t.bytesToHex)(s)};var n=r(d[0]),t=r(d[1]),o=r(d[2]),l=r(d[3])}),8269,[8095,8101,8102,8266]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnsAvatar=async function(l,{blockNumber:c,blockTag:o,assetGatewayUrls:u,name:v,gatewayUrls:y,strict:b,universalResolverAddress:w}){const k=await(0,s.getAction)(l,n.getEnsText,'getEnsText')({blockNumber:c,blockTag:o,key:'avatar',name:v,universalResolverAddress:w,gatewayUrls:y,strict:b});if(!k)return null;try{return await(0,t.parseAvatarRecord)(l,{record:k,gatewayUrls:u})}catch{return null}};var t=r(d[0]),s=r(d[1]),n=r(d[2])}),8270,[8271,8184,8274]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAvatarRecord=async function(n,{gatewayUrls:c,record:o}){return/eip155:/i.test(o)?s(n,{gatewayUrls:c,record:o}):(0,t.parseAvatarUri)({uri:o,gatewayUrls:c})};var t=r(d[0]);async function s(s,{gatewayUrls:n,record:c}){const o=(0,t.parseNftUri)(c),l=await(0,t.getNftTokenUri)(s,{nft:o}),{uri:p,isOnChain:u,isEncoded:U}=(0,t.resolveAvatarUri)({uri:l,gatewayUrls:n});if(u&&(p.includes('data:application/json;base64,')||p.startsWith('{'))){const s=U?atob(p.replace('data:application/json;base64,','')):p,c=JSON.parse(s);return(0,t.parseAvatarUri)({uri:(0,t.getJsonImage)(c),gatewayUrls:n})}let y=o.tokenID;return'erc1155'===o.namespace&&(y=y.replace('0x','').padStart(64,'0')),(0,t.getMetadataAvatarUri)({gatewayUrls:n,uri:p.replace(/(?:0x)?{id}/,y)})}}),8271,[8272]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getGateway=f,e.getJsonImage=h,e.getMetadataAvatarUri=async function({gatewayUrls:t,uri:s}){try{const n=await fetch(s).then((t=>t.json()));return await l({gatewayUrls:t,uri:h(n)})}catch{throw new n.EnsAvatarUriResolutionError({uri:s})}},e.getNftTokenUri=async function(s,{nft:o}){if('erc721'===o.namespace)return(0,t.readContract)(s,{address:o.contractAddress,abi:[{name:'tokenURI',type:'function',stateMutability:'view',inputs:[{name:'tokenId',type:'uint256'}],outputs:[{name:'',type:'string'}]}],functionName:'tokenURI',args:[BigInt(o.tokenID)]});if('erc1155'===o.namespace)return(0,t.readContract)(s,{address:o.contractAddress,abi:[{name:'uri',type:'function',stateMutability:'view',inputs:[{name:'_id',type:'uint256'}],outputs:[{name:'',type:'string'}]}],functionName:'uri',args:[BigInt(o.tokenID)]});throw new n.EnsAvatarUnsupportedNamespaceError({namespace:o.namespace})},e.isImageUri=p,e.parseAvatarUri=l,e.parseNftUri=function(t){let s=t;s.startsWith('did:nft:')&&(s=s.replace('did:nft:','').replace(/_/g,'/'));const[o,u,c]=s.split('/'),[p,f]=o.split(':'),[w,h]=u.split(':');if(!p||'eip155'!==p.toLowerCase())throw new n.EnsAvatarInvalidNftUriError({reason:'Only EIP-155 supported'});if(!f)throw new n.EnsAvatarInvalidNftUriError({reason:'Chain ID not found'});if(!h)throw new n.EnsAvatarInvalidNftUriError({reason:'Contract address not found'});if(!c)throw new n.EnsAvatarInvalidNftUriError({reason:'Token ID not found'});if(!w)throw new n.EnsAvatarInvalidNftUriError({reason:'ERC namespace not found'});return{chainID:Number.parseInt(f),namespace:w.toLowerCase(),contractAddress:h,tokenID:c}},e.resolveAvatarUri=w;var t=r(d[0]),n=r(d[1]);const s=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,o=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,u=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,c=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function p(t){try{const n=await fetch(t,{method:'HEAD'});if(200===n.status){const t=n.headers.get('content-type');return t?.startsWith('image/')}return!1}catch(n){return('object'!=typeof n||void 0===n.response)&&(!!globalThis.hasOwnProperty('Image')&&new Promise((n=>{const s=new Image;s.onload=()=>{n(!0)},s.onerror=()=>{n(!1)},s.src=t})))}}function f(t,n){return t?t.endsWith('/')?t.slice(0,-1):t:n}function w({uri:t,gatewayUrls:p}){const w=u.test(t);if(w)return{uri:t,isOnChain:!0,isEncoded:w};const h=f(p?.ipfs,'https://ipfs.io'),l=f(p?.arweave,'https://arweave.net'),v=t.match(s),{protocol:E,subpath:y,target:A,subtarget:I=""}=v?.groups||{},U='ipns:/'===E||'ipns/'===y,b='ipfs:/'===E||'ipfs/'===y||o.test(t);if(t.startsWith('http')&&!U&&!b){let n=t;return p?.arweave&&(n=t.replace(/https:\/\/arweave.net/g,p?.arweave)),{uri:n,isOnChain:!1,isEncoded:!1}}if((U||b)&&A)return{uri:`${h}/${U?'ipns':'ipfs'}/${A}${I}`,isOnChain:!1,isEncoded:!1};if('ar:/'===E&&A)return{uri:`${l}/${A}${I||''}`,isOnChain:!1,isEncoded:!1};let C=t.replace(c,'');if(C.startsWith('<svg')&&(C=`data:image/svg+xml;base64,${btoa(C)}`),C.startsWith('data:')||C.startsWith('{'))return{uri:C,isOnChain:!0,isEncoded:!1};throw new n.EnsAvatarUriResolutionError({uri:t})}function h(t){if('object'!=typeof t||!('image'in t)&&!('image_url'in t)&&!('image_data'in t))throw new n.EnsAvatarInvalidMetadataError({data:t});return t.image||t.image_url||t.image_data}async function l({gatewayUrls:t,uri:s}){const{uri:o,isOnChain:u}=w({uri:s,gatewayUrls:t});if(u)return o;if(await p(o))return o;throw new n.EnsAvatarUriResolutionError({uri:s})}}),8272,[8228,8273]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.EnsAvatarUriResolutionError=e.EnsAvatarUnsupportedNamespaceError=e.EnsAvatarInvalidNftUriError=e.EnsAvatarInvalidMetadataError=void 0;var t=r(d[0]);class s extends t.BaseError{constructor({data:t}){super('Unable to extract image from metadata. The metadata may be malformed or invalid.',{metaMessages:['- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.','',`Provided data: ${JSON.stringify(t)}`],name:'EnsAvatarInvalidMetadataError'})}}e.EnsAvatarInvalidMetadataError=s;class o extends t.BaseError{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:'EnsAvatarInvalidNftUriError'})}}e.EnsAvatarInvalidNftUriError=o;class n extends t.BaseError{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:'EnsAvatarUriResolutionError'})}}e.EnsAvatarUriResolutionError=n;class E extends t.BaseError{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:'EnsAvatarUnsupportedNamespaceError'})}}e.EnsAvatarUnsupportedNamespaceError=E}),8273,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnsText=async function(R,A){const{blockNumber:k,blockTag:w,key:x,name:y,gatewayUrls:N,strict:T}=A,{chain:C}=R,U=(()=>{if(A.universalResolverAddress)return A.universalResolverAddress;if(!C)throw new Error('client chain not configured. universalResolverAddress is required.');return(0,o.getChainContractAddress)({blockNumber:k,chain:C,contract:'ensUniversalResolver'})})(),_=C?.ensTlds;if(_&&!_.some((t=>y.endsWith(t))))return null;try{const o={address:U,abi:t.universalResolverResolveAbi,functionName:'resolve',args:[(0,l.toHex)((0,b.packetToBytes)(y)),(0,s.encodeFunctionData)({abi:t.textResolverAbi,functionName:'text',args:[(0,v.namehash)(y),x]}),N??[u.localBatchGatewayUrl]],blockNumber:k,blockTag:w},c=(0,f.getAction)(R,h.readContract,'readContract'),A=await c(o);if('0x'===A[0])return null;const T=(0,n.decodeFunctionResult)({abi:t.textResolverAbi,functionName:'text',data:A[0]});return''===T?null:T}catch(t){if(T)throw t;if((0,c.isNullUniversalResolverError)(t,'resolve'))return null;throw t}};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),u=r(d[6]),v=r(d[7]),b=r(d[8]),f=r(d[9]),h=r(d[10])}),8274,[8160,8148,8119,8165,8101,8264,8169,8265,8267,8184,8228]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnsName=async function(v,{address:b,blockNumber:w,blockTag:f,gatewayUrls:h,strict:C,universalResolverAddress:k}){let N=k;if(!N){if(!v.chain)throw new Error('client chain not configured. universalResolverAddress is required.');N=(0,t.getChainContractAddress)({blockNumber:w,chain:v.chain,contract:'ensUniversalResolver'})}const R=`${b.toLowerCase().substring(2)}.addr.reverse`;try{const t={address:N,abi:s.universalResolverReverseAbi,functionName:'reverse',args:[(0,o.toHex)((0,c.packetToBytes)(R))],blockNumber:w,blockTag:f},n=(0,l.getAction)(v,u.readContract,'readContract'),[C,k]=h?await n({...t,args:[...t.args,h]}):await n(t);return b.toLowerCase()!==k.toLowerCase()?null:C}catch(s){if(C)throw s;if((0,n.isNullUniversalResolverError)(s,'reverse'))return null;throw s}};var s=r(d[0]),t=r(d[1]),o=r(d[2]),n=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6])}),8275,[8160,8165,8101,8264,8267,8184,8228]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getEnsResolver=async function(l,u){const{blockNumber:v,blockTag:b,name:f}=u,{chain:y}=l,h=(()=>{if(u.universalResolverAddress)return u.universalResolverAddress;if(!y)throw new Error('client chain not configured. universalResolverAddress is required.');return(0,n.getChainContractAddress)({blockNumber:v,chain:y,contract:'ensUniversalResolver'})})(),p=y?.ensTlds;if(p&&!p.some((n=>f.endsWith(n))))throw new Error(`${f} is not a valid ENS TLD (${p?.join(', ')}) for chain "${y.name}" (id: ${y.id}).`);const[R]=await(0,o.getAction)(l,c.readContract,'readContract')({address:h,abi:[{inputs:[{type:'bytes'}],name:'findResolver',outputs:[{type:'address'},{type:'bytes32'}],stateMutability:'view',type:'function'}],functionName:'findResolver',args:[(0,t.toHex)((0,s.packetToBytes)(f))],blockNumber:v,blockTag:b});return R};var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4])}),8276,[8165,8101,8267,8184,8228]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createAccessList=async function(l,b){const{account:P=l.account,blockNumber:f,blockTag:x="latest",blobs:h,data:v,gas:y,gasPrice:F,maxFeePerBlobGas:G,maxFeePerGas:_,maxPriorityFeePerGas:p,to:q,value:L,...A}=b,B=P?(0,t.parseAccount)(P):void 0;try{(0,u.assertRequest)(b);const t=('bigint'==typeof f?(0,s.numberToHex)(f):void 0)||x,c=l.chain?.formatters?.transactionRequest?.format,P=(c||n.formatTransactionRequest)({...(0,o.extract)(A,{format:c}),from:B?.address,blobs:h,data:v,gas:y,gasPrice:F,maxFeePerBlobGas:G,maxFeePerGas:_,maxPriorityFeePerGas:p,to:q,value:L}),R=await l.request({method:'eth_createAccessList',params:[P,t]});return{accessList:R.accessList,gasUsed:BigInt(R.gasUsed)}}catch(t){throw(0,c.getCallError)(t,{...b,account:B,chain:l.chain})}};var t=r(d[0]),s=r(d[1]),c=r(d[2]),o=r(d[3]),n=r(d[4]),u=r(d[5])}),8277,[8118,8101,8166,8141,8142,8145]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createBlockFilter=async function(c){const o=(0,t.createFilterRequestScope)(c,{method:'eth_newBlockFilter'}),l=await c.request({method:'eth_newBlockFilter'});return{id:l,request:o(l),type:'block'}};var t=r(d[0])}),8278,[8188]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createEventFilter=async function(c,{address:s,args:l,event:v,events:f,fromBlock:u,strict:p,toBlock:b}={}){const B=f??(v?[v]:void 0),k=(0,n.createFilterRequestScope)(c,{method:'eth_newFilter'});let _=[];if(B){const o=B.flatMap((o=>(0,t.encodeEventTopics)({abi:[o],eventName:o.name,args:l})));_=[o],v&&(_=_[0])}const h=await c.request({method:'eth_newFilter',params:[{address:s,fromBlock:'bigint'==typeof u?(0,o.numberToHex)(u):u,toBlock:'bigint'==typeof b?(0,o.numberToHex)(b):b,..._.length?{topics:_}:{}}]});return{abi:B,args:l,eventName:v?v.name:void 0,fromBlock:u,id:h,request:k(h),strict:Boolean(p),toBlock:b,type:'event'}};var t=r(d[0]),o=r(d[1]),n=r(d[2])}),8279,[8186,8101,8188]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createPendingTransactionFilter=async function(n){const c=(0,t.createFilterRequestScope)(n,{method:'eth_newPendingTransactionFilter'}),o=await n.request({method:'eth_newPendingTransactionFilter'});return{id:o,request:c(o),type:'transaction'}};var t=r(d[0])}),8280,[8188]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlobBaseFee=async function(t){const n=await t.request({method:'eth_blobBaseFee'});return BigInt(n)}}),8281,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getBlockTransactionCount=async function(n,{blockHash:u,blockNumber:c,blockTag:s="latest"}={}){const l=void 0!==c?(0,o.numberToHex)(c):void 0;let b;b=u?await n.request({method:'eth_getBlockTransactionCountByHash',params:[u]},{dedupe:!0}):await n.request({method:'eth_getBlockTransactionCountByNumber',params:[l||s]},{dedupe:Boolean(l)});return(0,t.hexToNumber)(b)};var t=r(d[0]),o=r(d[1])}),8282,[8098,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getCode=async function(t,{address:n,blockNumber:u,blockTag:s="latest"}){const c=void 0!==u?(0,o.numberToHex)(u):void 0,l=await t.request({method:'eth_getCode',params:[n,c||s]},{dedupe:Boolean(c)});return'0x'===l?void 0:l};var o=r(d[0])}),8283,[8101]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.getEip712Domain=async function(s,c){const{address:y,factory:u,factoryData:p}=c;try{const[t,c,f,l,v,D,b]=await(0,n.getAction)(s,e.readContract,'readContract')({abi:o,address:y,functionName:'eip712Domain',factory:u,factoryData:p});return{domain:{name:c,version:f,chainId:Number(l),verifyingContract:v,salt:D},extensions:b,fields:t}}catch(n){const e=n;if('ContractFunctionExecutionError'===e.name&&'ContractFunctionZeroDataError'===e.cause.name)throw new t.Eip712DomainNotFoundError({address:y});throw e}};var t=r(d[0]),n=r(d[1]),e=r(d[2]);const o=[{inputs:[],name:'eip712Domain',outputs:[{name:'fields',type:'bytes1'},{name:'name',type:'string'},{name:'version',type:'string'},{name:'chainId',type:'uint256'},{name:'verifyingContract',type:'address'},{name:'salt',type:'bytes32'},{name:'extensions',type:'uint256[]'}],stateMutability:'view',type:'function'}]}),8284,[8285,8184,8228]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Eip712DomainNotFoundError=void 0;var o=r(d[0]);class n extends o.BaseError{constructor({address:o}){super(`No EIP-712 domain found on contract "${o}".`,{metaMessages:['Ensure that:',`- The contract is deployed at the address "${o}".`,'- `eip712Domain()` function exists on the contract.','- `eip712Domain()` function matches signature to ERC-5267 specification.'],name:'Eip712DomainNotFoundError'})}}e.Eip712DomainNotFoundError=n}),8285,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getFeeHistory=async function(n,{blockCount:u,blockNumber:s,blockTag:c="latest",rewardPercentiles:b}){const l='bigint'==typeof s?(0,t.numberToHex)(s):void 0,f=await n.request({method:'eth_feeHistory',params:[(0,t.numberToHex)(u),l||c,b]},{dedupe:Boolean(l)});return(0,o.formatFeeHistory)(f)};var t=r(d[0]),o=r(d[1])}),8286,[8101,8287]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatFeeHistory=function(t){return{baseFeePerGas:t.baseFeePerGas.map((t=>BigInt(t))),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:t.reward?.map((t=>t.map((t=>BigInt(t)))))}}}),8287,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getFilterLogs=async function(s,{filter:n}){const c=n.strict??!1,l=(await n.request({method:'eth_getFilterLogs',params:[n.id]})).map((t=>(0,o.formatLog)(t)));return n.abi?(0,t.parseEventLogs)({abi:n.abi,logs:l,strict:c}):l};var t=r(d[0]),o=r(d[1])}),8288,[8225,8227]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getProof=async function(s,{address:n,blockNumber:u,blockTag:c,storageKeys:f}){const b=c??'latest',l=void 0!==u?(0,o.numberToHex)(u):void 0,_=await s.request({method:'eth_getProof',params:[n,f,l||b]});return(0,t.formatProof)(_)};var o=r(d[0]),t=r(d[1])}),8289,[8101,8290]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatProof=function(n){return{...n,balance:n.balance?BigInt(n.balance):void 0,nonce:n.nonce?(0,o.hexToNumber)(n.nonce):void 0,storageProof:n.storageProof?(t=n.storageProof,t.map((o=>({...o,value:BigInt(o.value)})))):void 0};var t};var o=r(d[0])}),8290,[8291]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"arrayRegex",{enumerable:!0,get:function(){return b.arrayRegex}}),Object.defineProperty(e,"assertCurrentChain",{enumerable:!0,get:function(){return o.assertCurrentChain}}),Object.defineProperty(e,"assertRequest",{enumerable:!0,get:function(){return Ke.assertRequest}}),Object.defineProperty(e,"assertTransactionEIP1559",{enumerable:!0,get:function(){return Ue.assertTransactionEIP1559}}),Object.defineProperty(e,"assertTransactionEIP2930",{enumerable:!0,get:function(){return Ue.assertTransactionEIP2930}}),Object.defineProperty(e,"assertTransactionLegacy",{enumerable:!0,get:function(){return Ue.assertTransactionLegacy}}),Object.defineProperty(e,"boolToBytes",{enumerable:!0,get:function(){return ce.boolToBytes}}),Object.defineProperty(e,"boolToHex",{enumerable:!0,get:function(){return ae.boolToHex}}),Object.defineProperty(e,"buildRequest",{enumerable:!0,get:function(){return t.buildRequest}}),Object.defineProperty(e,"bytesRegex",{enumerable:!0,get:function(){return b.bytesRegex}}),Object.defineProperty(e,"bytesToBigInt",{enumerable:!0,get:function(){return fe.bytesToBigInt}}),Object.defineProperty(e,"bytesToBigint",{enumerable:!0,get:function(){return fe.bytesToBigInt}}),Object.defineProperty(e,"bytesToBool",{enumerable:!0,get:function(){return fe.bytesToBool}}),Object.defineProperty(e,"bytesToHex",{enumerable:!0,get:function(){return ae.bytesToHex}}),Object.defineProperty(e,"bytesToNumber",{enumerable:!0,get:function(){return fe.bytesToNumber}}),Object.defineProperty(e,"bytesToString",{enumerable:!0,get:function(){return fe.bytesToString}}),Object.defineProperty(e,"ccipFetch",{enumerable:!0,get:function(){return n.ccipRequest}}),Object.defineProperty(e,"ccipRequest",{enumerable:!0,get:function(){return n.ccipRequest}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return J.concat}}),Object.defineProperty(e,"concatBytes",{enumerable:!0,get:function(){return J.concatBytes}}),Object.defineProperty(e,"concatHex",{enumerable:!0,get:function(){return J.concatHex}}),Object.defineProperty(e,"containsNodeError",{enumerable:!0,get:function(){return se.containsNodeError}}),Object.defineProperty(e,"createNonceManager",{enumerable:!0,get:function(){return et.createNonceManager}}),Object.defineProperty(e,"decodeAbiParameters",{enumerable:!0,get:function(){return O.decodeAbiParameters}}),Object.defineProperty(e,"decodeErrorResult",{enumerable:!0,get:function(){return T.decodeErrorResult}}),Object.defineProperty(e,"decodeEventLog",{enumerable:!0,get:function(){return h.decodeEventLog}}),Object.defineProperty(e,"decodeFunctionData",{enumerable:!0,get:function(){return A.decodeFunctionData}}),Object.defineProperty(e,"decodeFunctionResult",{enumerable:!0,get:function(){return E.decodeFunctionResult}}),Object.defineProperty(e,"defineBlock",{enumerable:!0,get:function(){return ee.defineBlock}}),Object.defineProperty(e,"defineChain",{enumerable:!0,get:function(){return u.defineChain}}),Object.defineProperty(e,"defineFormatter",{enumerable:!0,get:function(){return Pe.defineFormatter}}),Object.defineProperty(e,"defineTransaction",{enumerable:!0,get:function(){return te.defineTransaction}}),Object.defineProperty(e,"defineTransactionReceipt",{enumerable:!0,get:function(){return ne.defineTransactionReceipt}}),Object.defineProperty(e,"defineTransactionRequest",{enumerable:!0,get:function(){return oe.defineTransactionRequest}}),Object.defineProperty(e,"encodeAbiParameters",{enumerable:!0,get:function(){return x.encodeAbiParameters}}),Object.defineProperty(e,"encodeDeployData",{enumerable:!0,get:function(){return v.encodeDeployData}}),Object.defineProperty(e,"encodeErrorResult",{enumerable:!0,get:function(){return S.encodeErrorResult}}),Object.defineProperty(e,"encodeEventTopics",{enumerable:!0,get:function(){return R.encodeEventTopics}}),Object.defineProperty(e,"encodeFunctionData",{enumerable:!0,get:function(){return B.encodeFunctionData}}),Object.defineProperty(e,"encodeFunctionResult",{enumerable:!0,get:function(){return C.encodeFunctionResult}}),Object.defineProperty(e,"encodePacked",{enumerable:!0,get:function(){return F.encodePacked}}),Object.defineProperty(e,"extract",{enumerable:!0,get:function(){return ie.extract}}),Object.defineProperty(e,"extractChain",{enumerable:!0,get:function(){return c.extractChain}}),Object.defineProperty(e,"formatAbiItem",{enumerable:!0,get:function(){return D.formatAbiItem}}),Object.defineProperty(e,"formatAbiItemWithArgs",{enumerable:!0,get:function(){return I.formatAbiItemWithArgs}}),Object.defineProperty(e,"formatAbiParams",{enumerable:!0,get:function(){return D.formatAbiParams}}),Object.defineProperty(e,"formatBlock",{enumerable:!0,get:function(){return ee.formatBlock}}),Object.defineProperty(e,"formatEther",{enumerable:!0,get:function(){return Qe.formatEther}}),Object.defineProperty(e,"formatGwei",{enumerable:!0,get:function(){return Ve.formatGwei}}),Object.defineProperty(e,"formatLog",{enumerable:!0,get:function(){return re.formatLog}}),Object.defineProperty(e,"formatTransaction",{enumerable:!0,get:function(){return te.formatTransaction}}),Object.defineProperty(e,"formatTransactionRequest",{enumerable:!0,get:function(){return oe.formatTransactionRequest}}),Object.defineProperty(e,"formatUnits",{enumerable:!0,get:function(){return Xe.formatUnits}}),Object.defineProperty(e,"fromBytes",{enumerable:!0,get:function(){return fe.fromBytes}}),Object.defineProperty(e,"fromHex",{enumerable:!0,get:function(){return be.fromHex}}),Object.defineProperty(e,"fromRlp",{enumerable:!0,get:function(){return de.fromRlp}}),Object.defineProperty(e,"getAbiItem",{enumerable:!0,get:function(){return k.getAbiItem}}),Object.defineProperty(e,"getAction",{enumerable:!0,get:function(){return me.getAction}}),Object.defineProperty(e,"getAddress",{enumerable:!0,get:function(){return U.getAddress}}),Object.defineProperty(e,"getCallError",{enumerable:!0,get:function(){return ge.getCallError}}),Object.defineProperty(e,"getChainContractAddress",{enumerable:!0,get:function(){return f.getChainContractAddress}}),Object.defineProperty(e,"getContractAddress",{enumerable:!0,get:function(){return K.getContractAddress}}),Object.defineProperty(e,"getContractError",{enumerable:!0,get:function(){return pe.getContractError}}),Object.defineProperty(e,"getCreate2Address",{enumerable:!0,get:function(){return K.getCreate2Address}}),Object.defineProperty(e,"getCreateAddress",{enumerable:!0,get:function(){return K.getCreateAddress}}),Object.defineProperty(e,"getEstimateGasError",{enumerable:!0,get:function(){return le.getEstimateGasError}}),Object.defineProperty(e,"getEventSelector",{enumerable:!0,get:function(){return je.toEventSelector}}),Object.defineProperty(e,"getEventSignature",{enumerable:!0,get:function(){return Te.toEventSignature}}),Object.defineProperty(e,"getFunctionSelector",{enumerable:!0,get:function(){return Oe.toFunctionSelector}}),Object.defineProperty(e,"getFunctionSignature",{enumerable:!0,get:function(){return he.toFunctionSignature}}),Object.defineProperty(e,"getHttpRpcClient",{enumerable:!0,get:function(){return p.getHttpRpcClient}}),Object.defineProperty(e,"getNodeError",{enumerable:!0,get:function(){return se.getNodeError}}),Object.defineProperty(e,"getSerializedTransactionType",{enumerable:!0,get:function(){return Ge.getSerializedTransactionType}}),Object.defineProperty(e,"getSocket",{enumerable:!0,get:function(){return s.getSocket}}),Object.defineProperty(e,"getSocketRpcClient",{enumerable:!0,get:function(){return l.getSocketRpcClient}}),Object.defineProperty(e,"getTransactionError",{enumerable:!0,get:function(){return ye.getTransactionError}}),Object.defineProperty(e,"getTransactionType",{enumerable:!0,get:function(){return we.getTransactionType}}),Object.defineProperty(e,"getWebSocketRpcClient",{enumerable:!0,get:function(){return y.getWebSocketRpcClient}}),Object.defineProperty(e,"hashAuthorization",{enumerable:!0,get:function(){return L.hashAuthorization}}),Object.defineProperty(e,"hashMessage",{enumerable:!0,get:function(){return Le.hashMessage}}),Object.defineProperty(e,"hashStruct",{enumerable:!0,get:function(){return Be.hashStruct}}),Object.defineProperty(e,"hashTypedData",{enumerable:!0,get:function(){return Be.hashTypedData}}),Object.defineProperty(e,"hexToBigInt",{enumerable:!0,get:function(){return be.hexToBigInt}}),Object.defineProperty(e,"hexToBool",{enumerable:!0,get:function(){return be.hexToBool}}),Object.defineProperty(e,"hexToBytes",{enumerable:!0,get:function(){return ce.hexToBytes}}),Object.defineProperty(e,"hexToNumber",{enumerable:!0,get:function(){return be.hexToNumber}}),Object.defineProperty(e,"hexToString",{enumerable:!0,get:function(){return be.hexToString}}),Object.defineProperty(e,"integerRegex",{enumerable:!0,get:function(){return b.integerRegex}}),Object.defineProperty(e,"isAddress",{enumerable:!0,get:function(){return W.isAddress}}),Object.defineProperty(e,"isAddressEqual",{enumerable:!0,get:function(){return _.isAddressEqual}}),Object.defineProperty(e,"isBytes",{enumerable:!0,get:function(){return Q.isBytes}}),Object.defineProperty(e,"isErc6492Signature",{enumerable:!0,get:function(){return Me.isErc6492Signature}}),Object.defineProperty(e,"isHash",{enumerable:!0,get:function(){return xe.isHash}}),Object.defineProperty(e,"isHex",{enumerable:!0,get:function(){return V.isHex}}),Object.defineProperty(e,"keccak256",{enumerable:!0,get:function(){return ve.keccak256}}),Object.defineProperty(e,"nonceManager",{enumerable:!0,get:function(){return et.nonceManager}}),Object.defineProperty(e,"numberToBytes",{enumerable:!0,get:function(){return ce.numberToBytes}}),Object.defineProperty(e,"numberToHex",{enumerable:!0,get:function(){return ae.numberToHex}}),Object.defineProperty(e,"offchainLookup",{enumerable:!0,get:function(){return n.offchainLookup}}),Object.defineProperty(e,"offchainLookupAbiItem",{enumerable:!0,get:function(){return n.offchainLookupAbiItem}}),Object.defineProperty(e,"offchainLookupSignature",{enumerable:!0,get:function(){return n.offchainLookupSignature}}),Object.defineProperty(e,"pad",{enumerable:!0,get:function(){return X.pad}}),Object.defineProperty(e,"padBytes",{enumerable:!0,get:function(){return X.padBytes}}),Object.defineProperty(e,"padHex",{enumerable:!0,get:function(){return X.padHex}}),Object.defineProperty(e,"parseAbi",{enumerable:!0,get:function(){return z.parseAbi}}),Object.defineProperty(e,"parseAbiItem",{enumerable:!0,get:function(){return z.parseAbiItem}}),Object.defineProperty(e,"parseAbiParameter",{enumerable:!0,get:function(){return z.parseAbiParameter}}),Object.defineProperty(e,"parseAbiParameters",{enumerable:!0,get:function(){return z.parseAbiParameters}}),Object.defineProperty(e,"parseAccount",{enumerable:!0,get:function(){return G.parseAccount}}),Object.defineProperty(e,"parseErc6492Signature",{enumerable:!0,get:function(){return qe.parseErc6492Signature}}),Object.defineProperty(e,"parseEther",{enumerable:!0,get:function(){return Ze.parseEther}}),Object.defineProperty(e,"parseEventLogs",{enumerable:!0,get:function(){return H.parseEventLogs}}),Object.defineProperty(e,"parseGwei",{enumerable:!0,get:function(){return $e.parseGwei}}),Object.defineProperty(e,"parseTransaction",{enumerable:!0,get:function(){return We.parseTransaction}}),Object.defineProperty(e,"parseUnits",{enumerable:!0,get:function(){return Ye.parseUnits}}),Object.defineProperty(e,"publicKeyToAddress",{enumerable:!0,get:function(){return w.publicKeyToAddress}}),Object.defineProperty(e,"recoverAddress",{enumerable:!0,get:function(){return Ce.recoverAddress}}),Object.defineProperty(e,"recoverAuthorizationAddress",{enumerable:!0,get:function(){return q.recoverAuthorizationAddress}}),Object.defineProperty(e,"recoverMessageAddress",{enumerable:!0,get:function(){return He.recoverMessageAddress}}),Object.defineProperty(e,"recoverPublicKey",{enumerable:!0,get:function(){return ke.recoverPublicKey}}),Object.defineProperty(e,"recoverTypedDataAddress",{enumerable:!0,get:function(){return ze.recoverTypedDataAddress}}),Object.defineProperty(e,"ripemd160",{enumerable:!0,get:function(){return Re.ripemd160}}),Object.defineProperty(e,"rpc",{enumerable:!0,get:function(){return s.rpc}}),Object.defineProperty(e,"serializeAccessList",{enumerable:!0,get:function(){return Je.serializeAccessList}}),Object.defineProperty(e,"serializeAuthorizationList",{enumerable:!0,get:function(){return M.serializeAuthorizationList}}),Object.defineProperty(e,"serializeErc6492Signature",{enumerable:!0,get:function(){return Ne.serializeErc6492Signature}}),Object.defineProperty(e,"serializeTransaction",{enumerable:!0,get:function(){return _e.serializeTransaction}}),Object.defineProperty(e,"serializeTypedData",{enumerable:!0,get:function(){return j.serializeTypedData}}),Object.defineProperty(e,"sha256",{enumerable:!0,get:function(){return Se.sha256}}),Object.defineProperty(e,"size",{enumerable:!0,get:function(){return Y.size}}),Object.defineProperty(e,"slice",{enumerable:!0,get:function(){return Z.slice}}),Object.defineProperty(e,"sliceBytes",{enumerable:!0,get:function(){return Z.sliceBytes}}),Object.defineProperty(e,"sliceHex",{enumerable:!0,get:function(){return Z.sliceHex}}),Object.defineProperty(e,"socketClientCache",{enumerable:!0,get:function(){return l.socketClientCache}}),Object.defineProperty(e,"stringToBytes",{enumerable:!0,get:function(){return ce.stringToBytes}}),Object.defineProperty(e,"stringToHex",{enumerable:!0,get:function(){return ae.stringToHex}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return P.stringify}}),Object.defineProperty(e,"toBytes",{enumerable:!0,get:function(){return ce.toBytes}}),Object.defineProperty(e,"toEventHash",{enumerable:!0,get:function(){return Ae.toEventHash}}),Object.defineProperty(e,"toEventSelector",{enumerable:!0,get:function(){return je.toEventSelector}}),Object.defineProperty(e,"toEventSignature",{enumerable:!0,get:function(){return Te.toEventSignature}}),Object.defineProperty(e,"toFunctionHash",{enumerable:!0,get:function(){return Ee.toFunctionHash}}),Object.defineProperty(e,"toFunctionSelector",{enumerable:!0,get:function(){return Oe.toFunctionSelector}}),Object.defineProperty(e,"toFunctionSignature",{enumerable:!0,get:function(){return he.toFunctionSignature}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return ae.toHex}}),Object.defineProperty(e,"toRlp",{enumerable:!0,get:function(){return ue.toRlp}}),Object.defineProperty(e,"transactionType",{enumerable:!0,get:function(){return te.transactionType}}),Object.defineProperty(e,"trim",{enumerable:!0,get:function(){return $.trim}}),Object.defineProperty(e,"validateTypedData",{enumerable:!0,get:function(){return j.validateTypedData}}),Object.defineProperty(e,"verifyAuthorization",{enumerable:!0,get:function(){return N.verifyAuthorization}}),Object.defineProperty(e,"verifyHash",{enumerable:!0,get:function(){return Fe.verifyHash}}),Object.defineProperty(e,"verifyMessage",{enumerable:!0,get:function(){return Ie.verifyMessage}}),Object.defineProperty(e,"verifyTypedData",{enumerable:!0,get:function(){return De.verifyTypedData}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]),f=r(d[5]),b=r(d[6]),s=r(d[7]),p=r(d[8]),l=r(d[9]),y=r(d[10]),P=r(d[11]),j=r(d[12]),O=r(d[13]),T=r(d[14]),h=r(d[15]),A=r(d[16]),E=r(d[17]),x=r(d[18]),v=r(d[19]),S=r(d[20]),R=r(d[21]),B=r(d[22]),C=r(d[23]),H=r(d[24]),k=r(d[25]),z=r(d[26]),F=r(d[27]),I=r(d[28]),D=r(d[29]),L=r(d[30]),q=r(d[31]),M=r(d[32]),N=r(d[33]),G=r(d[34]),w=r(d[35]),K=r(d[36]),U=r(d[37]),W=r(d[38]),_=r(d[39]),J=r(d[40]),Q=r(d[41]),V=r(d[42]),X=r(d[43]),Y=r(d[44]),Z=r(d[45]),$=r(d[46]),ee=r(d[47]),te=r(d[48]),re=r(d[49]),ne=r(d[50]),oe=r(d[51]),ie=r(d[52]),ue=r(d[53]),ce=r(d[54]),ae=r(d[55]),fe=r(d[56]),be=r(d[57]),de=r(d[58]),se=r(d[59]),ge=r(d[60]),pe=r(d[61]),le=r(d[62]),ye=r(d[63]),me=r(d[64]),Pe=r(d[65]),je=r(d[66]),Oe=r(d[67]),Te=r(d[68]),he=r(d[69]),Ae=r(d[70]),Ee=r(d[71]),xe=r(d[72]),ve=r(d[73]),Se=r(d[74]),Re=r(d[75]),Be=r(d[76]),Ce=r(d[77]),He=r(d[78]),ke=r(d[79]),ze=r(d[80]),Fe=r(d[81]),Ie=r(d[82]),De=r(d[83]),Le=r(d[84]),qe=r(d[85]),Me=r(d[86]),Ne=r(d[87]),Ge=r(d[88]),we=r(d[89]),Ke=r(d[90]),Ue=r(d[91]),We=r(d[92]),_e=r(d[93]),Je=r(d[94]),Qe=r(d[95]),Ve=r(d[96]),Xe=r(d[97]),Ye=r(d[98]),Ze=r(d[99]),$e=r(d[100]),et=r(d[101])}),8291,[8252,8173,8241,8292,8293,8165,8115,8294,8258,8296,8295,8129,8297,8124,8123,8226,8170,8148,8108,8164,8171,8186,8119,8172,8225,8116,1255,8300,8128,8090,8196,8192,8301,8305,8118,8194,8306,8112,8110,8147,8113,8307,8092,8096,8091,8114,8100,8206,8207,8227,8246,8142,8141,8197,8095,8101,8127,8098,8308,8140,8166,8190,8198,8242,8184,8143,8103,8117,8309,8310,8311,8312,8313,8102,8214,8314,8299,8193,8315,8195,8319,8320,8321,8322,8316,8323,8324,8326,8327,8220,8145,8303,8328,8302,8304,8130,8133,8132,8329,8331,8332,8333]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defineChain=function(n){return{formatters:void 0,fees:void 0,serializers:void 0,...n}}}),8292,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.extractChain=function({chains:n,id:t}){return n.find((n=>n.id===t))}}),8293,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getSocket=async function(t){const n=await(0,o.getWebSocketRpcClient)(t);return Object.assign(n.socket,{requests:n.requests,subscriptions:n.subscriptions})},e.rpc=void 0;var t=r(d[0]),o=r(d[1]);e.rpc={http:(o,n)=>(0,t.getHttpRpcClient)(o).request(n),webSocket:function(t,{body:o,onError:n,onResponse:s}){return t.request({body:o,onError:n,onResponse:s}),t},webSocketAsync:async function(t,{body:o,timeout:n=1e4}){return t.requestAsync({body:o,timeout:n})}}}),8294,[8258,8295]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getWebSocketRpcClient=async function(o,s={}){const{keepAlive:c,reconnect:u}=s;return(0,n.getSocketRpcClient)({async getSocket({onClose:n,onError:s,onOpen:c,onResponse:u}){const l=await r(d[3])(d[2],d.paths).then((t=>t.WebSocket)),S=new l(o);function v(){S.removeEventListener('close',v),S.removeEventListener('message',E),S.removeEventListener('error',s),S.removeEventListener('open',c),n()}function E({data:t}){try{const n=JSON.parse(t);u(n)}catch(t){s(t)}}S.addEventListener('close',v),S.addEventListener('message',E),S.addEventListener('error',s),S.addEventListener('open',c),S.readyState===l.CONNECTING&&await new Promise(((t,n)=>{S&&(S.onopen=t,S.onerror=n)}));const{close:p}=S;return Object.assign(S,{close(){p.bind(S)(),v()},ping(){try{if(S.readyState===S.CLOSED||S.readyState===S.CLOSING)throw new t.WebSocketRequestError({url:S.url,cause:new t.SocketClosedError({url:S.url})});const n={jsonrpc:'2.0',method:'net_version',params:[]};S.send(JSON.stringify(n))}catch(t){s(t)}},request({body:n}){if(S.readyState===S.CLOSED||S.readyState===S.CLOSING)throw new t.WebSocketRequestError({body:n,url:S.url,cause:new t.SocketClosedError({url:S.url})});return S.send(JSON.stringify(n))}})},keepAlive:c,reconnect:u,url:o})};var t=r(d[0]),n=r(d[1])}),8295,{"0":8137,"1":8296,"2":1493,"3":1353,"paths":{"1493":"/_expo/static/js/web/native-210055bbd43bd18ce65bdfd722149642.js"}});
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getSocketRpcClient=async function(l){const{getSocket:u,keepAlive:p=!0,key:y="socket",reconnect:f=!0,url:h}=l,{interval:b=3e4}='object'==typeof p?p:{},{attempts:v=5,delay:w=2e3}='object'==typeof f?f:{};let E=c.get(`${y}:${h}`);if(E)return E;let k=0;const{schedule:C}=(0,t.createBatchScheduler)({id:`${y}:${h}`,fn:async()=>{const t=new Map,l=new Map;let C,$,R;return await(async function n(){const s=await u({onClose(){for(const n of t.values())n.onError?.(new o.SocketClosedError({url:h}));for(const t of l.values())t.onError?.(new o.SocketClosedError({url:h}));f&&k<v?setTimeout((async()=>{k++,await n().catch(console.error)}),w):(t.clear(),l.clear())},onError(o){C=o;for(const o of t.values())o.onError?.(C);for(const o of l.values())o.onError?.(C);E?.close(),f&&k<v?setTimeout((async()=>{k++,await n().catch(console.error)}),w):(t.clear(),l.clear())},onOpen(){C=void 0,k=0},onResponse(o){const n='eth_subscription'===o.method,s=n?o.params.subscription:o.id,c=n?l:t,u=c.get(s);u&&u.onResponse(o),n||c.delete(s)}});return $=s,p&&(R&&clearInterval(R),R=setInterval((()=>$.ping?.()),b)),s})(),C=void 0,E={close(){R&&clearInterval(R),$.close(),c.delete(`${y}:${h}`)},get socket(){return $},request({body:o,onError:n,onResponse:c}){C&&n&&n(C);const u=o.id??s.idCache.take(),p=t=>{'number'==typeof t.id&&u!==t.id||('eth_subscribe'===o.method&&'string'==typeof t.result&&l.set(t.result,{onResponse:p,onError:n}),'eth_unsubscribe'===o.method&&l.delete(o.params?.[0]),c(t))};t.set(u,{onResponse:p,onError:n});try{$.request({body:{jsonrpc:'2.0',id:u,...o}})}catch(o){n?.(o)}},requestAsync({body:t,timeout:s=1e4}){return(0,n.withTimeout)((()=>new Promise(((o,n)=>this.request({body:t,onError:n,onResponse:o})))),{errorInstance:new o.TimeoutError({body:t,url:h}),timeout:s})},requests:t,subscriptions:l,url:h},c.set(`${y}:${h}`,E),[E]}}),[$,[R]]=await C();return R},e.socketClientCache=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),s=r(d[3]);const c=e.socketClientCache=new Map}),8296,[8137,8167,8259,8260]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.domainSeparator=function({domain:t}){return(0,c.hashDomain)({domain:t,types:{EIP712Domain:I({domain:t})}})},e.getTypesForEIP712Domain=I,e.serializeTypedData=function(t){const{domain:n,message:o,primaryType:s,types:y}=t,p=(t,n)=>{const o={...n};for(const n of t){const{name:t,type:s}=n;'address'===s&&(o[t]=o[t].toLowerCase())}return o},f=y.EIP712Domain&&n?p(y.EIP712Domain,n):{},c=(()=>{if('EIP712Domain'!==s)return p(y[s],o)})();return(0,u.stringify)({domain:f,message:c,primaryType:s,types:y})},e.validateTypedData=function(c){const{domain:u,message:I,primaryType:b,types:l}=c,E=(o,c)=>{for(const u of o){const{name:o,type:I}=u,b=c[o],v=I.match(f.integerRegex);if(v&&('number'==typeof b||'bigint'==typeof b)){const[t,n,o]=v;(0,p.numberToHex)(b,{signed:'int'===n,size:Number.parseInt(o)/8})}if('address'===I&&'string'==typeof b&&!(0,s.isAddress)(b))throw new n.InvalidAddressError({address:b});const D=I.match(f.bytesRegex);if(D){const[n,o]=D;if(o&&(0,y.size)(b)!==Number.parseInt(o))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(o),givenSize:(0,y.size)(b)})}const w=l[I];w&&(h(I),E(w,b))}};if(l.EIP712Domain&&u){if('object'!=typeof u)throw new o.InvalidDomainError({domain:u});E(l.EIP712Domain,u)}if('EIP712Domain'!==b){if(!l[b])throw new o.InvalidPrimaryTypeError({primaryType:b,types:l});E(l[b],I)}};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),y=r(d[4]),p=r(d[5]),f=r(d[6]),c=r(d[7]),u=r(d[8]);function I({domain:t}){return['string'==typeof t?.name&&{name:'name',type:'string'},t?.version&&{name:'version',type:'string'},('number'==typeof t?.chainId||'bigint'==typeof t?.chainId)&&{name:'chainId',type:'uint256'},t?.verifyingContract&&{name:'verifyingContract',type:'address'},t?.salt&&{name:'salt',type:'bytes32'}].filter(Boolean)}function h(t){if('address'===t||'bool'===t||'string'===t||t.startsWith('bytes')||t.startsWith('uint')||t.startsWith('int'))throw new o.InvalidStructTypeError({type:t})}}),8297,[8089,8109,8298,8110,8091,8101,8115,8299,8129]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidStructTypeError=e.InvalidPrimaryTypeError=e.InvalidDomainError=void 0;var t=r(d[0]),s=r(d[1]);class o extends s.BaseError{constructor({domain:s}){super(`Invalid domain "${(0,t.stringify)(s)}".`,{metaMessages:['Must be a valid EIP-712 domain.']})}}e.InvalidDomainError=o;class n extends s.BaseError{constructor({primaryType:t,types:s}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(s))}\`.`,{docsPath:'/api/glossary/Errors#typeddatainvalidprimarytypeerror',metaMessages:['Check that the primary type is a key in `types`.']})}}e.InvalidPrimaryTypeError=n;class y extends s.BaseError{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:['Struct type must not be a Solidity type.'],name:'InvalidStructTypeError'})}}e.InvalidStructTypeError=y}),8298,[8129,8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeType=T,e.hashDomain=o,e.hashStruct=c,e.hashTypedData=function(t){const{domain:y={},message:u,primaryType:f}=t,T={EIP712Domain:(0,s.getTypesForEIP712Domain)({domain:y}),...t.types};(0,s.validateTypedData)({domain:y,message:u,primaryType:f,types:T});const h=['0x1901'];y&&h.push(o({domain:y,types:T}));'EIP712Domain'!==f&&h.push(c({data:u,primaryType:f,types:T}));return(0,n.keccak256)((0,p.concat)(h))};var t=r(d[0]),p=r(d[1]),y=r(d[2]),n=r(d[3]),s=r(d[4]);function o({domain:t,types:p}){return c({data:t,primaryType:'EIP712Domain',types:p})}function c({data:t,primaryType:p,types:y}){const s=u({data:t,primaryType:p,types:y});return(0,n.keccak256)(s)}function u({data:p,primaryType:y,types:n}){const s=[{type:'bytes32'}],o=[f({primaryType:y,types:n})];for(const t of n[y]){const[y,c]=k({types:n,name:t.name,type:t.type,value:p[t.name]});s.push(y),o.push(c)}return(0,t.encodeAbiParameters)(s,o)}function f({primaryType:t,types:p}){const s=(0,y.toHex)(T({primaryType:t,types:p}));return(0,n.keccak256)(s)}function T({primaryType:t,types:p}){let y='';const n=h({primaryType:t,types:p});n.delete(t);const s=[t,...Array.from(n).sort()];for(const t of s)y+=`${t}(${p[t].map((({name:t,type:p})=>`${p} ${t}`)).join(',')})`;return y}function h({primaryType:t,types:p},y=new Set){const n=t.match(/^\w*/u),s=n?.[0];if(y.has(s)||void 0===p[s])return y;y.add(s);for(const t of p[s])h({primaryType:t.type,types:p},y);return y}function k({types:p,name:s,type:o,value:c}){if(void 0!==p[o])return[{type:'bytes32'},(0,n.keccak256)(u({data:c,primaryType:o,types:p}))];if('bytes'===o){return c=`0x${(c.length%2?'0':'')+c.slice(2)}`,[{type:'bytes32'},(0,n.keccak256)(c)]}if('string'===o)return[{type:'bytes32'},(0,n.keccak256)((0,y.toHex)(c))];if(o.lastIndexOf(']')===o.length-1){const y=o.slice(0,o.lastIndexOf('[')),u=c.map((t=>k({name:s,type:y,types:p,value:t})));return[{type:'bytes32'},(0,n.keccak256)((0,t.encodeAbiParameters)(u.map((([t])=>t)),u.map((([,t])=>t))))]}return[{type:o},c]}}),8299,[8108,8113,8101,8102,8297]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodePacked=function(n,s){if(n.length!==s.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:n.length,givenLength:s.length});const o=[];for(let t=0;t<n.length;t++){const i=n[t],c=s[t];o.push(u(i,c))}return(0,i.concatHex)(o)};var t=r(d[0]),n=r(d[1]),s=r(d[2]),i=r(d[3]),o=r(d[4]),c=r(d[5]),h=r(d[6]);function u(l,f,p=!1){if('address'===l){const t=f;if(!(0,s.isAddress)(t))throw new n.InvalidAddressError({address:t});return(0,o.pad)(t.toLowerCase(),{size:p?32:null})}if('string'===l)return(0,c.stringToHex)(f);if('bytes'===l)return f;if('bool'===l)return(0,o.pad)((0,c.boolToHex)(f),{size:p?32:1});const b=l.match(h.integerRegex);if(b){const[t,n,s="256"]=b,i=Number.parseInt(s)/8;return(0,c.numberToHex)(f,{size:p?32:i,signed:'int'===n})}const x=l.match(h.bytesRegex);if(x){const[n,s]=x;if(Number.parseInt(s)!==(f.length-2)/2)throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(s),givenSize:(f.length-2)/2});return(0,o.pad)(f,{dir:'right',size:p?32:null})}const w=l.match(h.arrayRegex);if(w&&Array.isArray(f)){const[t,n]=w,s=[];for(let t=0;t<f.length;t++)s.push(u(n,f[t],!0));return 0===s.length?'0x':(0,i.concatHex)(s)}throw new t.UnsupportedPackedAbiType(l)}}),8300,[8089,8109,8110,8113,8096,8101,8115]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeAuthorizationList=function(o){if(!o||0===o.length)return[];const s=[];for(const u of o){const{chainId:o,nonce:c,...f}=u,h=u.address;s.push([o?(0,t.toHex)(o):'0x',h,c?(0,t.toHex)(c):'0x',...(0,n.toYParitySignatureArray)({},f)])}return s};var t=r(d[0]),n=r(d[1])}),8301,[8101,8302]);
__d((function(g,_r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeTransaction=function(t,o){const s=(0,b.getTransactionType)(t);return'eip1559'===s?P(t,o):'eip2930'===s?h(t,o):'eip4844'===s?p(t,o):'eip7702'===s?f(t,o):y(t,o)},e.toYParitySignatureArray=I;var t=_r(d[0]),o=_r(d[1]),s=_r(d[2]),n=_r(d[3]),i=_r(d[4]),x=_r(d[5]),r=_r(d[6]),c=_r(d[7]),H=_r(d[8]),l=_r(d[9]),u=_r(d[10]),b=_r(d[11]),v=_r(d[12]);function f(t,s){const{authorizationList:n,chainId:i,gas:x,nonce:c,to:b,value:f,maxFeePerGas:p,maxPriorityFeePerGas:P,accessList:h,data:y}=t;(0,u.assertTransactionEIP7702)(t);const L=(0,v.serializeAccessList)(h),T=(0,o.serializeAuthorizationList)(n);return(0,r.concatHex)(['0x04',(0,l.toRlp)([(0,H.toHex)(i),c?(0,H.toHex)(c):'0x',P?(0,H.toHex)(P):'0x',p?(0,H.toHex)(p):'0x',x?(0,H.toHex)(x):'0x',b??'0x',f?(0,H.toHex)(f):'0x',y??'0x',L,T,...I(t,s)])])}function p(t,o){const{chainId:c,gas:b,nonce:f,to:p,value:P,maxFeePerBlobGas:h,maxFeePerGas:y,maxPriorityFeePerGas:L,accessList:T,data:z}=t;(0,u.assertTransactionEIP4844)(t);let F=t.blobVersionedHashes,G=t.sidecars;if(t.blobs&&(void 0===F||void 0===G)){const o='string'==typeof t.blobs[0]?t.blobs:t.blobs.map((t=>(0,H.bytesToHex)(t))),r=t.kzg,c=(0,s.blobsToCommitments)({blobs:o,kzg:r});if(void 0===F&&(F=(0,i.commitmentsToVersionedHashes)({commitments:c})),void 0===G){const t=(0,n.blobsToProofs)({blobs:o,commitments:c,kzg:r});G=(0,x.toBlobSidecars)({blobs:o,commitments:c,proofs:t})}}const A=(0,v.serializeAccessList)(T),R=[(0,H.toHex)(c),f?(0,H.toHex)(f):'0x',L?(0,H.toHex)(L):'0x',y?(0,H.toHex)(y):'0x',b?(0,H.toHex)(b):'0x',p??'0x',P?(0,H.toHex)(P):'0x',z??'0x',A,h?(0,H.toHex)(h):'0x',F??[],...I(t,o)],E=[],B=[],_=[];if(G)for(let t=0;t<G.length;t++){const{blob:o,commitment:s,proof:n}=G[t];E.push(o),B.push(s),_.push(n)}return(0,r.concatHex)(['0x03',G?(0,l.toRlp)([R,E,B,_]):(0,l.toRlp)(R)])}function P(t,o){const{chainId:s,gas:n,nonce:i,to:x,value:c,maxFeePerGas:b,maxPriorityFeePerGas:f,accessList:p,data:P}=t;(0,u.assertTransactionEIP1559)(t);const h=(0,v.serializeAccessList)(p),y=[(0,H.toHex)(s),i?(0,H.toHex)(i):'0x',f?(0,H.toHex)(f):'0x',b?(0,H.toHex)(b):'0x',n?(0,H.toHex)(n):'0x',x??'0x',c?(0,H.toHex)(c):'0x',P??'0x',h,...I(t,o)];return(0,r.concatHex)(['0x02',(0,l.toRlp)(y)])}function h(t,o){const{chainId:s,gas:n,data:i,nonce:x,to:c,value:b,accessList:f,gasPrice:p}=t;(0,u.assertTransactionEIP2930)(t);const P=(0,v.serializeAccessList)(f),h=[(0,H.toHex)(s),x?(0,H.toHex)(x):'0x',p?(0,H.toHex)(p):'0x',n?(0,H.toHex)(n):'0x',c??'0x',b?(0,H.toHex)(b):'0x',i??'0x',P,...I(t,o)];return(0,r.concatHex)(['0x01',(0,l.toRlp)(h)])}function y(o,s){const{chainId:n=0,gas:i,data:x,nonce:r,to:b,value:v,gasPrice:f}=o;(0,u.assertTransactionLegacy)(o);let p=[r?(0,H.toHex)(r):'0x',f?(0,H.toHex)(f):'0x',i?(0,H.toHex)(i):'0x',b??'0x',v?(0,H.toHex)(v):'0x',x??'0x'];if(s){const o=(()=>{if(s.v>=35n){return(s.v-35n)/2n>0?s.v:27n+(35n===s.v?0n:1n)}if(n>0)return BigInt(2*n)+BigInt(35n+s.v-27n);const o=27n+(27n===s.v?0n:1n);if(s.v!==o)throw new t.InvalidLegacyVError({v:s.v});return o})(),i=(0,c.trim)(s.r),x=(0,c.trim)(s.s);p=[...p,(0,H.toHex)(o),'0x00'===i?'0x':i,'0x00'===x?'0x':x]}else n>0&&(p=[...p,(0,H.toHex)(n),'0x','0x']);return(0,l.toRlp)(p)}function I(t,o){const s=o??t,{v:n,yParity:i}=s;if(void 0===s.r)return[];if(void 0===s.s)return[];if(void 0===n&&void 0===i)return[];const x=(0,c.trim)(s.r),r=(0,c.trim)(s.s);return['number'==typeof i?i?(0,H.toHex)(1):'0x':0n===n?'0x':1n===n?(0,H.toHex)(1):27n===n?'0x':(0,H.toHex)(1),'0x00'===x?'0x':x,'0x00'===r?'0x':r]}}),8302,[8135,8301,8210,8211,8212,8215,8113,8100,8101,8197,8303,8220,8304]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.assertTransactionEIP1559=x,e.assertTransactionEIP2930=function(s){const{chainId:h,maxPriorityFeePerGas:P,gasPrice:I,maxFeePerGas:E,to:x}=s;if(h<=0)throw new c.InvalidChainIdError({chainId:h});if(x&&!(0,f.isAddress)(x))throw new n.InvalidAddressError({address:x});if(P||E)throw new t.BaseError('`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.');if(I&&I>o.maxUint256)throw new w.FeeCapTooHighError({maxFeePerGas:I})},e.assertTransactionEIP4844=function(o){const{blobVersionedHashes:n}=o;if(n){if(0===n.length)throw new h.EmptyBlobError;for(const o of n){const n=(0,P.size)(o),t=(0,E.hexToNumber)((0,I.slice)(o,0,1));if(32!==n)throw new h.InvalidVersionedHashSizeError({hash:o,size:n});if(t!==s.versionedHashVersionKzg)throw new h.InvalidVersionedHashVersionError({hash:o,version:t})}}x(o)},e.assertTransactionEIP7702=function(s){const{authorizationList:o}=s;if(o)for(const s of o){const{chainId:o}=s,t=s.address;if(!(0,f.isAddress)(t))throw new n.InvalidAddressError({address:t});if(o<0)throw new c.InvalidChainIdError({chainId:o})}x(s)},e.assertTransactionLegacy=function(s){const{chainId:h,maxPriorityFeePerGas:P,gasPrice:I,maxFeePerGas:E,to:x}=s;if(x&&!(0,f.isAddress)(x))throw new n.InvalidAddressError({address:x});if(void 0!==h&&h<=0)throw new c.InvalidChainIdError({chainId:h});if(P||E)throw new t.BaseError('`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.');if(I&&I>o.maxUint256)throw new w.FeeCapTooHighError({maxFeePerGas:I})};var s=r(d[0]),o=r(d[1]),n=r(d[2]),t=r(d[3]),h=r(d[4]),c=r(d[5]),w=r(d[6]),f=r(d[7]),P=r(d[8]),I=r(d[9]),E=r(d[10]);function x(s){const{chainId:t,maxPriorityFeePerGas:h,maxFeePerGas:P,to:I}=s;if(t<=0)throw new c.InvalidChainIdError({chainId:t});if(I&&!(0,f.isAddress)(I))throw new n.InvalidAddressError({address:I});if(P&&P>o.maxUint256)throw new w.FeeCapTooHighError({maxFeePerGas:P});if(h&&P&&h>P)throw new w.TipAboveFeeCapError({maxFeePerGas:P,maxPriorityFeePerGas:h})}}),8303,[8219,8146,8109,8093,8218,8163,8139,8110,8091,8114,8098]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeAccessList=function(o){if(!o||0===o.length)return[];const i=[];for(let l=0;l<o.length;l++){const{address:c,storageKeys:f}=o[l];for(let t=0;t<f.length;t++)if(f[t].length-2!=64)throw new s.InvalidStorageKeySizeError({storageKey:f[t]});if(!(0,n.isAddress)(c,{strict:!1}))throw new t.InvalidAddressError({address:c});i.push([c,f])}return i};var t=r(d[0]),s=r(d[1]),n=r(d[2])}),8304,[8109,8135,8110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyAuthorization=async function({address:s,authorization:u,signature:c}){return(0,n.isAddressEqual)((0,t.getAddress)(s),await(0,o.recoverAuthorizationAddress)({authorization:u,signature:c}))};var t=r(d[0]),n=r(d[1]),o=r(d[2])}),8305,[8112,8147,8192]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getContractAddress=function(t){return'CREATE2'===t.opcode?A(t):u(t)},e.getCreate2Address=A,e.getCreateAddress=u;var t=r(d[0]),s=r(d[1]),o=r(d[2]),c=r(d[3]),n=r(d[4]),y=r(d[5]),f=r(d[6]),l=r(d[7]);function u(t){const s=(0,n.toBytes)((0,l.getAddress)(t.from));let o=(0,n.toBytes)(t.nonce);return 0===o[0]&&(o=new Uint8Array([])),(0,l.getAddress)(`0x${(0,f.keccak256)((0,y.toRlp)([s,o],'bytes')).slice(26)}`)}function A(y){const u=(0,n.toBytes)((0,l.getAddress)(y.from)),A=(0,o.pad)((0,s.isBytes)(y.salt)?y.salt:(0,n.toBytes)(y.salt),{size:32}),b='bytecodeHash'in y?(0,s.isBytes)(y.bytecodeHash)?y.bytecodeHash:(0,n.toBytes)(y.bytecodeHash):(0,f.keccak256)(y.bytecode,'bytes');return(0,l.getAddress)((0,c.slice)((0,f.keccak256)((0,t.concat)([(0,n.toBytes)('0xff'),u,A,b])),12))}}),8306,[8113,8307,8096,8114,8095,8197,8102,8112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isBytes=function(t){return!!t&&('object'==typeof t&&('BYTES_PER_ELEMENT'in t&&(1===t.BYTES_PER_ELEMENT&&'Uint8Array'===t.constructor.name)))}}),8307,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fromRlp=function(t,f="hex"){const c=(()=>{if('string'==typeof t){if(t.length>3&&t.length%2!=0)throw new n.InvalidHexValueError(t);return(0,u.hexToBytes)(t)}return t})(),h=(0,o.createCursor)(c,{recursiveReadLimit:Number.POSITIVE_INFINITY});return s(h,f)};var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),f=r(d[4]);function s(t,n="hex"){if(0===t.bytes.length)return'hex'===n?(0,f.bytesToHex)(t.bytes):t.bytes;const o=t.readByte();if(o<128&&t.decrementPosition(1),o<192){const u=c(t,o,128),s=t.readBytes(u);return'hex'===n?(0,f.bytesToHex)(s):s}return h(t,c(t,o,192),n)}function c(n,o,u){if(128===u&&o<128)return 1;if(o<=u+55)return o-u;if(o===u+55+1)return n.readUint8();if(o===u+55+2)return n.readUint16();if(o===u+55+3)return n.readUint24();if(o===u+55+4)return n.readUint32();throw new t.BaseError('Invalid RLP prefix')}function h(t,n,o){const u=t.position,f=[];for(;t.position-u<n;)f.push(s(t,o));return f}}),8308,[8093,8099,8125,8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"toEventSignature",{enumerable:!0,get:function(){return t.toSignature}});var t=r(d[0])}),8309,[8106]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"toFunctionSignature",{enumerable:!0,get:function(){return t.toSignature}});var t=r(d[0])}),8310,[8106]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"toEventHash",{enumerable:!0,get:function(){return t.toSignatureHash}});var t=r(d[0])}),8311,[8104]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"toFunctionHash",{enumerable:!0,get:function(){return t.toSignatureHash}});var t=r(d[0])}),8312,[8104]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isHash=function(t){return(0,n.isHex)(t)&&32===(0,s.size)(t)};var n=r(d[0]),s=r(d[1])}),8313,[8092,8091]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ripemd160=function(c,u){const _=u||'hex',f=(0,t.ripemd160)((0,n.isHex)(c,{strict:!1})?(0,o.toBytes)(c):c);return'bytes'===_?f:(0,s.toHex)(f)};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3])}),8314,[1513,8092,8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverMessageAddress=async function({message:t,signature:u}){return(0,n.recoverAddress)({hash:(0,s.hashMessage)(t),signature:u})};var s=r(d[0]),n=r(d[1])}),8315,[8316,8193]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.hashMessage=function(t,c){return(0,n.keccak256)((0,s.toPrefixedMessage)(t),c)};var n=r(d[0]),s=r(d[1])}),8316,[8102,8317]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.toPrefixedMessage=function(f){const c='string'==typeof f?(0,o.stringToHex)(f):'string'==typeof f.raw?f.raw:(0,o.bytesToHex)(f.raw),u=(0,o.stringToHex)(`${t.presignMessagePrefix}${(0,s.size)(c)}`);return(0,n.concat)([u,c])};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3])}),8317,[8318,8113,8091,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.presignMessagePrefix=void 0;e.presignMessagePrefix='\x19Ethereum Signed Message:\n'}),8318,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverTypedDataAddress=async function(t){const{domain:y,message:o,primaryType:p,signature:c,types:u}=t;return(0,n.recoverAddress)({hash:(0,s.hashTypedData)({domain:y,message:o,primaryType:p,types:u}),signature:c})};var s=r(d[0]),n=r(d[1])}),8319,[8299,8193]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyHash=async function({address:u,hash:c,signature:h}){return(0,n.isAddressEqual)((0,s.getAddress)(u),await(0,t.recoverAddress)({hash:c,signature:h}))};var s=r(d[0]),n=r(d[1]),t=r(d[2])}),8320,[8112,8147,8193]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyMessage=async function({address:u,message:c,signature:o}){return(0,n.isAddressEqual)((0,s.getAddress)(u),await(0,t.recoverMessageAddress)({message:c,signature:o}))};var s=r(d[0]),n=r(d[1]),t=r(d[2])}),8321,[8112,8147,8315]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyTypedData=async function(y){const{address:p,domain:o,message:u,primaryType:c,signature:f,types:v}=y;return(0,t.isAddressEqual)((0,s.getAddress)(p),await(0,n.recoverTypedDataAddress)({domain:o,message:u,primaryType:c,signature:f,types:v}))};var s=r(d[0]),t=r(d[1]),n=r(d[2])}),8322,[8112,8147,8319]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseErc6492Signature=function(n){if(!(0,s.isErc6492Signature)(n))return{signature:n};const[u,c,o]=(0,t.decodeAbiParameters)([{type:'address'},{type:'bytes'},{type:'bytes'}],n);return{address:u,data:c,signature:o}};var t=r(d[0]),s=r(d[1])}),8323,[8124,8324]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isErc6492Signature=function(t){return(0,n.sliceHex)(t,-32)===c.erc6492MagicBytes};var c=r(d[0]),n=r(d[1])}),8324,[8325,8114]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.zeroHash=e.erc6492MagicBytes=void 0;e.erc6492MagicBytes='0x6492649264926492649264926492649264926492649264926492649264926492',e.zeroHash='0x0000000000000000000000000000000000000000000000000000000000000000'}),8325,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeErc6492Signature=function(o){const{address:y,data:u,signature:b,to:p="hex"}=o,x=(0,n.concatHex)([(0,s.encodeAbiParameters)([{type:'address'},{type:'bytes'},{type:'bytes'}],[y,u,b]),t.erc6492MagicBytes]);return'hex'===p?x:(0,c.hexToBytes)(x)};var t=r(d[0]),s=r(d[1]),n=r(d[2]),c=r(d[3])}),8326,[8325,8108,8113,8095]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getSerializedTransactionType=function(u){const c=(0,t.sliceHex)(u,0,1);if('0x04'===c)return'eip7702';if('0x03'===c)return'eip4844';if('0x02'===c)return'eip1559';if('0x01'===c)return'eip2930';if('0x'!==c&&(0,o.hexToNumber)(c)>=192)return'legacy';throw new n.InvalidSerializedTransactionTypeError({serializedType:c})};var n=r(d[0]),t=r(d[1]),o=r(d[2])}),8327,[8135,8114,8098]);
__d((function(g,_r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAccessList=f,e.parseTransaction=function(i){const t=(0,T.getSerializedTransactionType)(i);return'eip1559'===t?p(i):'eip2930'===t?v(i):'eip4844'===t?H(i):'eip7702'===t?I(i):P(i)},e.toTransactionArray=y;var i=_r(d[0]),t=_r(d[1]),n=_r(d[2]),s=_r(d[3]),r=_r(d[4]),o=_r(d[5]),x=_r(d[6]),c=_r(d[7]),h=_r(d[8]),l=_r(d[9]),u=_r(d[10]),T=_r(d[11]);function I(i){const n=y(i),[s,o,x,h,l,T,I,H,p,v,P,z,w]=n;if(10!==n.length&&13!==n.length)throw new t.InvalidSerializedTransactionError({attributes:{chainId:s,nonce:o,maxPriorityFeePerGas:x,maxFeePerGas:h,gas:l,to:T,value:I,data:H,accessList:p,authorizationList:v,...n.length>9?{v:P,r:z,s:w}:{}},serializedTransaction:i,type:'eip7702'});const F={chainId:(0,c.hexToNumber)(s),type:'eip7702'};(0,r.isHex)(T)&&'0x'!==T&&(F.to=T),(0,r.isHex)(l)&&'0x'!==l&&(F.gas=(0,c.hexToBigInt)(l)),(0,r.isHex)(H)&&'0x'!==H&&(F.data=H),(0,r.isHex)(o)&&(F.nonce='0x'===o?0:(0,c.hexToNumber)(o)),(0,r.isHex)(I)&&'0x'!==I&&(F.value=(0,c.hexToBigInt)(I)),(0,r.isHex)(h)&&'0x'!==h&&(F.maxFeePerGas=(0,c.hexToBigInt)(h)),(0,r.isHex)(x)&&'0x'!==x&&(F.maxPriorityFeePerGas=(0,c.hexToBigInt)(x)),0!==p.length&&'0x'!==p&&(F.accessList=f(p)),0!==v.length&&'0x'!==v&&(F.authorizationList=b(v)),(0,u.assertTransactionEIP7702)(F);return{...13===n.length?B(n):void 0,...F}}function H(i){const n=y(i),o=4===n.length,x=o?n[0]:n,h=o?n.slice(1):[],[l,T,I,H,p,v,P,b,z,w,F,G,L,N]=x,[E,S,A]=h;if(11!==x.length&&14!==x.length)throw new t.InvalidSerializedTransactionError({attributes:{chainId:l,nonce:T,maxPriorityFeePerGas:I,maxFeePerGas:H,gas:p,to:v,value:P,data:b,accessList:z,...x.length>9?{v:G,r:L,s:N}:{}},serializedTransaction:i,type:'eip4844'});const _={blobVersionedHashes:F,chainId:(0,c.hexToNumber)(l),type:'eip4844'};(0,r.isHex)(v)&&'0x'!==v&&(_.to=v),(0,r.isHex)(p)&&'0x'!==p&&(_.gas=(0,c.hexToBigInt)(p)),(0,r.isHex)(b)&&'0x'!==b&&(_.data=b),(0,r.isHex)(T)&&(_.nonce='0x'===T?0:(0,c.hexToNumber)(T)),(0,r.isHex)(P)&&'0x'!==P&&(_.value=(0,c.hexToBigInt)(P)),(0,r.isHex)(w)&&'0x'!==w&&(_.maxFeePerBlobGas=(0,c.hexToBigInt)(w)),(0,r.isHex)(H)&&'0x'!==H&&(_.maxFeePerGas=(0,c.hexToBigInt)(H)),(0,r.isHex)(I)&&'0x'!==I&&(_.maxPriorityFeePerGas=(0,c.hexToBigInt)(I)),0!==z.length&&'0x'!==z&&(_.accessList=f(z)),E&&S&&A&&(_.sidecars=(0,s.toBlobSidecars)({blobs:E,commitments:S,proofs:A})),(0,u.assertTransactionEIP4844)(_);return{...14===x.length?B(x):void 0,..._}}function p(i){const n=y(i),[s,o,x,h,l,T,I,H,p,v,P,b]=n;if(9!==n.length&&12!==n.length)throw new t.InvalidSerializedTransactionError({attributes:{chainId:s,nonce:o,maxPriorityFeePerGas:x,maxFeePerGas:h,gas:l,to:T,value:I,data:H,accessList:p,...n.length>9?{v:v,r:P,s:b}:{}},serializedTransaction:i,type:'eip1559'});const z={chainId:(0,c.hexToNumber)(s),type:'eip1559'};(0,r.isHex)(T)&&'0x'!==T&&(z.to=T),(0,r.isHex)(l)&&'0x'!==l&&(z.gas=(0,c.hexToBigInt)(l)),(0,r.isHex)(H)&&'0x'!==H&&(z.data=H),(0,r.isHex)(o)&&(z.nonce='0x'===o?0:(0,c.hexToNumber)(o)),(0,r.isHex)(I)&&'0x'!==I&&(z.value=(0,c.hexToBigInt)(I)),(0,r.isHex)(h)&&'0x'!==h&&(z.maxFeePerGas=(0,c.hexToBigInt)(h)),(0,r.isHex)(x)&&'0x'!==x&&(z.maxPriorityFeePerGas=(0,c.hexToBigInt)(x)),0!==p.length&&'0x'!==p&&(z.accessList=f(p)),(0,u.assertTransactionEIP1559)(z);return{...12===n.length?B(n):void 0,...z}}function v(i){const n=y(i),[s,o,x,h,l,T,I,H,p,v,P]=n;if(8!==n.length&&11!==n.length)throw new t.InvalidSerializedTransactionError({attributes:{chainId:s,nonce:o,gasPrice:x,gas:h,to:l,value:T,data:I,accessList:H,...n.length>8?{v:p,r:v,s:P}:{}},serializedTransaction:i,type:'eip2930'});const b={chainId:(0,c.hexToNumber)(s),type:'eip2930'};(0,r.isHex)(l)&&'0x'!==l&&(b.to=l),(0,r.isHex)(h)&&'0x'!==h&&(b.gas=(0,c.hexToBigInt)(h)),(0,r.isHex)(I)&&'0x'!==I&&(b.data=I),(0,r.isHex)(o)&&(b.nonce='0x'===o?0:(0,c.hexToNumber)(o)),(0,r.isHex)(T)&&'0x'!==T&&(b.value=(0,c.hexToBigInt)(T)),(0,r.isHex)(x)&&'0x'!==x&&(b.gasPrice=(0,c.hexToBigInt)(x)),0!==H.length&&'0x'!==H&&(b.accessList=f(H)),(0,u.assertTransactionEIP2930)(b);return{...11===n.length?B(n):void 0,...b}}function P(i){const n=(0,h.fromRlp)(i,'hex'),[s,o,x,l,T,I,H,p,v]=n;if(6!==n.length&&9!==n.length)throw new t.InvalidSerializedTransactionError({attributes:{nonce:s,gasPrice:o,gas:x,to:l,value:T,data:I,...n.length>6?{v:H,r:p,s:v}:{}},serializedTransaction:i,type:'legacy'});const P={type:'legacy'};if((0,r.isHex)(l)&&'0x'!==l&&(P.to=l),(0,r.isHex)(x)&&'0x'!==x&&(P.gas=(0,c.hexToBigInt)(x)),(0,r.isHex)(I)&&'0x'!==I&&(P.data=I),(0,r.isHex)(s)&&(P.nonce='0x'===s?0:(0,c.hexToNumber)(s)),(0,r.isHex)(T)&&'0x'!==T&&(P.value=(0,c.hexToBigInt)(T)),(0,r.isHex)(o)&&'0x'!==o&&(P.gasPrice=(0,c.hexToBigInt)(o)),(0,u.assertTransactionLegacy)(P),6===n.length)return P;const y=(0,r.isHex)(H)&&'0x'!==H?(0,c.hexToBigInt)(H):0n;if('0x'===v&&'0x'===p)return y>0&&(P.chainId=Number(y)),P;const f=y,b=Number((f-35n)/2n);if(b>0)P.chainId=b;else if(27n!==f&&28n!==f)throw new t.InvalidLegacyVError({v:f});return P.v=f,P.s=v,P.r=p,P.yParity=f%2n===0n?1:0,P}function y(i){return(0,h.fromRlp)(`0x${i.slice(4)}`,'hex')}function f(t){const s=[];for(let r=0;r<t.length;r++){const[o,c]=t[r];if(!(0,n.isAddress)(o,{strict:!1}))throw new i.InvalidAddressError({address:o});s.push({address:o,storageKeys:c.map((i=>(0,l.isHash)(i)?i:(0,x.trim)(i)))})}return s}function b(i){const t=[];for(let n=0;n<i.length;n++){const[s,r,o,x,h,l]=i[n];t.push({address:r,chainId:(0,c.hexToNumber)(s),nonce:(0,c.hexToNumber)(o),...B([x,h,l])})}return t}function B(i){const t=i.slice(-3),n='0x'===t[0]||0n===(0,c.hexToBigInt)(t[0])?27n:28n;return{r:(0,o.padHex)(t[1],{size:32}),s:(0,o.padHex)(t[2],{size:32}),v:n,yParity:27n===n?0:1}}}),8328,[8109,8135,8110,8215,8092,8096,8100,8098,8308,8313,8303,8327]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnits=function(n,l){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(n))throw new t.InvalidDecimalNumberError({value:n});let[s,c="0"]=n.split('.');const $=s.startsWith('-');$&&(s=s.slice(1));if(c=c.replace(/(0+)$/,''),0===l)1===Math.round(Number(`.${c}`))&&(s=`${BigInt(s)+1n}`),c='';else if(c.length>l){const[t,n,$]=[c.slice(0,l-1),c.slice(l-1,l),c.slice(l)],u=Math.round(Number(`${n}.${$}`));c=u>9?`${BigInt(t)+BigInt(1)}0`.padStart(t.length+1,'0'):`${t}${u}`,c.length>l&&(c=c.slice(1),s=`${BigInt(s)+1n}`),c=c.slice(0,l)}else c=c.padEnd(l,'0');return BigInt(`${$?'-':''}${s}${c}`)};var t=r(d[0])}),8329,[8330]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidDecimalNumberError=void 0;var l=r(d[0]);class n extends l.BaseError{constructor({value:l}){super(`Number \`${l}\` is not a valid decimal number.`,{name:'InvalidDecimalNumberError'})}}e.InvalidDecimalNumberError=n}),8330,[8093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseEther=function(s,u="wei"){return(0,n.parseUnits)(s,t.etherUnits[u])};var t=r(d[0]),n=r(d[1])}),8331,[8131,8329]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseGwei=function(s,u="wei"){return(0,t.parseUnits)(s,n.gweiUnits[u])};var n=r(d[0]),t=r(d[1])}),8332,[8131,8329]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createNonceManager=t,e.jsonRpc=c,e.nonceManager=void 0;var n=r(d[0]),s=r(d[1]);function t(n){const{source:t}=n,c=new Map,o=new s.LruMap(8192),h=new Map,u=({address:n,chainId:s})=>`${n}.${s}`;return{async consume({address:n,chainId:s,client:c}){const h=u({address:n,chainId:s}),l=this.get({address:n,chainId:s,client:c});this.increment({address:n,chainId:s});const I=await l;return await t.set({address:n,chainId:s},I),o.set(h,I),I},async increment({address:n,chainId:s}){const t=u({address:n,chainId:s}),o=c.get(t)??0;c.set(t,o+1)},async get({address:n,chainId:s,client:l}){const I=u({address:n,chainId:s});let y=h.get(I);y||(y=(async()=>{try{const c=await t.get({address:n,chainId:s,client:l}),h=o.get(I)??0;return h>0&&c<=h?h+1:(o.delete(I),c)}finally{this.reset({address:n,chainId:s})}})(),h.set(I,y));return(c.get(I)??0)+await y},reset({address:n,chainId:s}){const t=u({address:n,chainId:s});c.delete(t),h.delete(t)}}}function c(){return{async get(s){const{address:t,client:c}=s;return(0,n.getTransactionCount)(c,{address:t,blockTag:'pending'})},set(){}}}e.nonceManager=t({source:c()})}),8333,[8209,8111]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getStorageAt=async function(o,{address:n,blockNumber:s,blockTag:u="latest",slot:c}){const l=void 0!==s?(0,t.numberToHex)(s):void 0;return await o.request({method:'eth_getStorageAt',params:[n,c,l||u]})};var t=r(d[0])}),8334,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransaction=async function(s,{blockHash:c,blockNumber:u,blockTag:h,hash:l,index:b}){const T=h||'latest',k=void 0!==u?(0,o.numberToHex)(u):void 0;let f=null;l?f=await s.request({method:'eth_getTransactionByHash',params:[l]},{dedupe:!0}):c?f=await s.request({method:'eth_getTransactionByBlockHashAndIndex',params:[c,(0,o.numberToHex)(b)]},{dedupe:!0}):(k||T)&&(f=await s.request({method:'eth_getTransactionByBlockNumberAndIndex',params:[k||T,(0,o.numberToHex)(b)]},{dedupe:Boolean(k)}));if(!f)throw new t.TransactionNotFoundError({blockHash:c,blockNumber:u,blockTag:T,hash:l,index:b});return(s.chain?.formatters?.transaction?.format||n.formatTransaction)(f)};var t=r(d[0]),o=r(d[1]),n=r(d[2])}),8335,[8135,8101,8207]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionConfirmations=async function(c,{hash:s,transactionReceipt:u}){const[l,b]=await Promise.all([(0,t.getAction)(c,n.getBlockNumber,'getBlockNumber')({}),s?(0,t.getAction)(c,o.getTransaction,'getTransaction')({hash:s}):void 0]),f=u?.blockNumber||b?.blockNumber;return f?l-f+1n:0n};var t=r(d[0]),n=r(d[1]),o=r(d[2])}),8336,[8184,8234,8335]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTransactionReceipt=async function(o,{hash:c}){const s=await o.request({method:'eth_getTransactionReceipt',params:[c]},{dedupe:!0});if(!s)throw new t.TransactionReceiptNotFoundError({hash:c});return(o.chain?.formatters?.transactionReceipt?.format||n.formatTransactionReceipt)(s)};var t=r(d[0]),n=r(d[1])}),8337,[8135,8246]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.multicall=async function(b,w){const{account:N,allowFailure:v=!0,batchSize:C,blockNumber:D,blockTag:p,multicallAddress:A,stateOverride:E}=w,k=w.contracts,y=C??('object'==typeof b.batch?.multicall&&b.batch.multicall.batchSize||1024);let F=A;if(!F){if(!b.chain)throw new Error('client chain not configured. multicallAddress is required.');F=(0,i.getChainContractAddress)({blockNumber:D,chain:b.chain,contract:'multicall3'})}const P=[[]];let _=0,j=0;for(let t=0;t<k.length;t++){const{abi:c,address:o,args:l,functionName:n}=k[t];try{const t=(0,s.encodeFunctionData)({abi:c,args:l,functionName:n});j+=(t.length-2)/2,y>0&&j>y&&P[_].length>0&&(_++,j=(t.length-2)/2,P[_]=[]),P[_]=[...P[_],{allowFailure:!0,callData:t,target:o}]}catch(t){const s=(0,u.getContractError)(t,{abi:c,address:o,args:l,docsPath:'/docs/contract/multicall',functionName:n,sender:N});if(!v)throw s;P[_]=[...P[_],{allowFailure:!0,callData:'0x',target:o}]}}const O=await Promise.allSettled(P.map((c=>(0,h.getAction)(b,f.readContract,'readContract')({abi:t.multicall3Abi,account:N,address:F,args:[c],blockNumber:D,blockTag:p,functionName:'aggregate3',stateOverride:E})))),S=[];for(let t=0;t<O.length;t++){const o=O[t];if('rejected'===o.status){if(!v)throw o.reason;for(let c=0;c<P[t].length;c++)S.push({status:'failure',error:o.reason,result:void 0});continue}const s=o.value;for(let o=0;o<s.length;o++){const{returnData:i,success:h}=s[o],{callData:f}=P[t][o],{abi:b,address:w,functionName:N,args:C}=k[S.length];try{if('0x'===f)throw new c.AbiDecodingZeroDataError;if(!h)throw new l.RawContractError({data:i});const t=(0,n.decodeFunctionResult)({abi:b,args:C,data:i,functionName:N});S.push(v?{result:t,status:'success'}:t)}catch(t){const c=(0,u.getContractError)(t,{abi:b,address:w,args:C,docsPath:'/docs/contract/multicall',functionName:N});if(!v)throw c;S.push({error:c,result:void 0,status:'failure'})}}}if(S.length!==k.length)throw new o.BaseError('multicall results mismatch');return S};var t=r(d[0]),c=r(d[1]),o=r(d[2]),l=r(d[3]),n=r(d[4]),s=r(d[5]),i=r(d[6]),u=r(d[7]),h=r(d[8]),f=r(d[9])}),8338,[8160,8089,8093,8121,8148,8119,8165,8190,8184,8228]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.simulateBlocks=async function(w,O){const{blockNumber:_,blockTag:y="latest",blocks:h,returnFullTransactions:T,traceTransfers:N,validation:D}=O;try{const s=[];for(const t of h){const o=t.blockOverrides?e.toRpc(t.blockOverrides):void 0,n=t.calls.map((e=>{const t=e,o=t.account?(0,r.parseAccount)(t.account):void 0,s={...t,data:t.abi?(0,c.encodeFunctionData)(t):t.data,from:t.from??o?.address};return(0,k.assertRequest)(s),(0,b.formatTransactionRequest)(s)})),i=t.stateOverrides?(0,v.serializeStateOverride)(t.stateOverrides):void 0;s.push({blockOverrides:o,calls:n,stateOverrides:i})}const l=('bigint'==typeof _?(0,i.numberToHex)(_):void 0)||y;return(await w.request({method:'eth_simulateV1',params:[{blockStateCalls:s,returnFullTransactions:T,traceTransfers:N,validation:D},l]})).map(((e,r)=>({...(0,f.formatBlock)(e),calls:e.calls.map(((e,s)=>{const{abi:c,args:i,functionName:l,to:f}=h[r].calls[s],b=e.error?.data??e.returnData,v=BigInt(e.gasUsed),k=e.logs?.map((e=>(0,p.formatLog)(e))),w='0x1'===e.status?'success':'failure',O=c&&'success'===w&&'0x'!==b?(0,n.decodeFunctionResult)({abi:c,data:b,functionName:l}):null,_=(()=>{if('success'===w)return;let r;return'0x'===e.error?.data?r=new t.AbiDecodingZeroDataError:e.error&&(r=new o.RawContractError(e.error)),r?(0,u.getContractError)(r,{abi:c??[],address:f,args:i,functionName:l??'<unknown>'}):void 0})();return{data:b,gasUsed:v,logs:k,status:w,...'success'===w?{result:O}:{error:_}}}))})))}catch(e){const r=e,t=(0,l.getNodeError)(r,{});if(t instanceof s.UnknownNodeError)throw r;throw t}};var e=(function(e,r){if("function"==typeof WeakMap)var t=new WeakMap,o=new WeakMap;return(function(e,r){if(!r&&e&&e.__esModule)return e;var s,n,c={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return c;if(s=r?o:t){if(s.has(e))return s.get(e);s.set(e,c)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((n=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(n.get||n.set)?s(c,r,n):c[r]=e[r]);return c})(e,r)})(_r(d[0])),r=_r(d[1]),t=_r(d[2]),o=_r(d[3]),s=_r(d[4]),n=_r(d[5]),c=_r(d[6]),i=_r(d[7]),u=_r(d[8]),l=_r(d[9]),f=_r(d[10]),p=_r(d[11]),b=_r(d[12]),v=_r(d[13]),k=_r(d[14])}),8339,[8150,8118,8089,8121,8139,8148,8119,8101,8190,8140,8206,8227,8142,8144,8145]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.simulateCalls=async function(u,p){const{blockNumber:y,blockTag:v,calls:O,stateOverrides:A,traceAssetChanges:k,traceTransfers:h,validation:w}=p,z=p.account?(0,f.parseAccount)(p.account):void 0;if(k&&!z)throw new n.BaseError('`account` is required when `traceAssetChanges` is true');const _=z?e.encode(e.from('constructor(bytes, bytes)'),{bytecode:r.deploylessCallViaBytecodeBytecode,args:[b,s.encodeData(s.from('function getBalance(address)'),[z.address])]}):void 0,B=k?await Promise.all(p.calls.map((async e=>{if(!e.data&&!e.abi)return;const{accessList:s}=await(0,l.createAccessList)(u,{account:z.address,...e,data:e.abi?(0,o.encodeFunctionData)(e):e.data});return s.map((({address:e,storageKeys:s})=>s.length>0?e:null))}))).then((e=>e.flat().filter(Boolean))):[],N=A?.map((e=>e.address===z?.address?{...e,nonce:0}:e)),T=await(0,i.simulateBlocks)(u,{blockNumber:y,blockTag:v,blocks:[...k?[{calls:[{data:_}],stateOverrides:A},{calls:B.map(((e,f)=>({abi:[s.from('function balanceOf(address) returns (uint256)')],functionName:'balanceOf',args:[z.address],to:e,from:t.zeroAddress,nonce:f}))),stateOverrides:[{address:t.zeroAddress,nonce:0}]}]:[],{calls:[...O,{}].map(((e,s)=>({...e,from:z?.address,nonce:s}))),stateOverrides:N},...k?[{calls:[{data:_}]},{calls:B.map(((e,f)=>({abi:[s.from('function balanceOf(address) returns (uint256)')],functionName:'balanceOf',args:[z.address],to:e,from:t.zeroAddress,nonce:f}))),stateOverrides:[{address:t.zeroAddress,nonce:0}]},{calls:B.map(((e,f)=>({to:e,abi:[s.from('function decimals() returns (uint256)')],functionName:'decimals',from:t.zeroAddress,nonce:f}))),stateOverrides:[{address:t.zeroAddress,nonce:0}]},{calls:B.map(((e,f)=>({to:e,abi:[s.from('function tokenURI(uint256) returns (string)')],functionName:'tokenURI',args:[0n],from:t.zeroAddress,nonce:f}))),stateOverrides:[{address:t.zeroAddress,nonce:0}]},{calls:B.map(((e,f)=>({to:e,abi:[s.from('function symbol() returns (string)')],functionName:'symbol',from:t.zeroAddress,nonce:f}))),stateOverrides:[{address:t.zeroAddress,nonce:0}]}]:[]],traceTransfers:h,validation:w}),C=k?T[2]:T[0],[M,P,,j,I,x,D,W]=k?T:[],{calls:E,...L}=C,R=E.slice(0,-1)??[],U=[...M?.calls??[],...P?.calls??[]].map((e=>'success'===e.status?(0,c.hexToBigInt)(e.data):null)),q=[...j?.calls??[],...I?.calls??[]].map((e=>'success'===e.status?(0,c.hexToBigInt)(e.data):null)),F=(x?.calls??[]).map((e=>'success'===e.status?e.result:null)),H=(W?.calls??[]).map((e=>'success'===e.status?e.result:null)),K=(D?.calls??[]).map((e=>'success'===e.status?e.result:null)),V=[];for(const[e,s]of q.entries()){const f=U[e];if('bigint'!=typeof s)continue;if('bigint'!=typeof f)continue;const r=F[e-1],n=H[e-1],o=K[e-1],c=0===e?{address:t.ethAddress,decimals:18,symbol:'ETH'}:{address:B[e-1],decimals:o||r?Number(r??1):void 0,symbol:n??void 0};V.some((e=>e.token.address===c.address))||V.push({token:c,value:{pre:f,post:s,diff:s-f}})}return{assetChanges:V,block:L,results:R}};var e=u(_r(d[0])),s=u(_r(d[1])),f=_r(d[2]),t=_r(d[3]),r=_r(d[4]),n=_r(d[5]),o=_r(d[6]),c=_r(d[7]),l=_r(d[8]),i=_r(d[9]);function u(e,s){if("function"==typeof WeakMap)var f=new WeakMap,t=new WeakMap;return(u=function(e,s){if(!s&&e&&e.__esModule)return e;var r,n,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(r=s?t:f){if(r.has(e))return r.get(e);r.set(e,o)}for(const s in e)"default"!==s&&{}.hasOwnProperty.call(e,s)&&((n=(r=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,s))&&(n.get||n.set)?r(o,s,n):o[s]=e[s]);return o})(e,s)}const b='0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033'}),8340,[8341,8353,8118,8354,8162,8093,8119,8291,8277,8339]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.decode=function(t,e){const{bytecode:r}=e;if(0===t.inputs.length)return;const o=e.data.replace(r,'0x');return n.decode(t.inputs,o)},_e.encode=function(t,e){const{bytecode:o,args:u}=e;return r.concat(o,t.inputs?.length&&u?.length?n.encode(t.inputs,u):'0x')},_e.format=function(e){return t.formatAbiItem(e)},_e.from=function(t){return e.from(t)},_e.fromAbi=function(t){const n=t.find((t=>'constructor'===t.type));if(!n)throw new e.NotFoundError({name:'constructor'});return n};var t=o(_r(d[0])),e=o(_r(d[1])),n=o(_r(d[2])),r=o(_r(d[3]));function o(t,e){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(o=function(t,e){if(!e&&t&&t.__esModule)return t;var o,u,c={__proto__:null,default:t};if(null===t||"object"!=typeof t&&"function"!=typeof t)return c;if(o=e?r:n){if(o.has(t))return o.get(t);o.set(t,c)}for(const e in t)"default"!==e&&{}.hasOwnProperty.call(t,e)&&((u=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(t,e))&&(u.get||u.set)?o(c,e,u):c[e]=t[e]);return c})(t,e)}}),8341,[1255,8342,8349,8151]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.NotFoundError=_e.InvalidSelectorSizeError=_e.AmbiguityError=void 0,_e.format=function(t){return e.formatAbiItem(t)},_e.from=function(t,r={}){const{prepare:n=!0}=r,i=Array.isArray(t)||'string'==typeof t?e.parseAbiItem(t):t;return{...i,...n?{hash:f(i)}:{}}},_e.fromAbi=function(e,t,r){const{args:o=[],prepare:s=!0}=r??{},p=n.validate(t,{strict:!1}),b=e.filter((e=>p?'function'===e.type||'error'===e.type?u(e)===n.slice(t,0,4):'event'===e.type&&f(e)===t:'name'in e&&e.name===t));if(0===b.length)throw new l({name:t});if(1===b.length)return{...b[0],...s?{hash:f(b[0])}:{}};let h;for(const e of b){if(!('inputs'in e))continue;if(!o||0===o.length){if(!e.inputs||0===e.inputs.length)return{...e,...s?{hash:f(e)}:{}};continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==o.length)continue;if(o.every(((t,r)=>{const n='inputs'in e&&e.inputs[r];return!!n&&i.isArgOfType(t,n)}))){if(h&&'inputs'in h&&h.inputs){const t=i.getAmbiguousTypes(e.inputs,h.inputs,o);if(t)throw new c({abiItem:e,type:t[0]},{abiItem:h,type:t[1]})}h=e}}const y=(()=>{if(h)return h;const[e,...t]=b;return{...e,overloads:t}})();if(!y)throw new l({name:t});return{...y,...s?{hash:f(y)}:{}}},_e.getSelector=u,_e.getSignature=s,_e.getSignatureHash=f;var e=o(_r(d[0])),t=o(_r(d[1])),r=o(_r(d[2])),n=o(_r(d[3])),i=o(_r(d[4]));function o(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(o=function(e,t){if(!t&&e&&e.__esModule)return e;var i,o,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(i=t?n:r){if(i.has(e))return i.get(e);i.set(e,u)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(i=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?i(u,t,o):u[t]=e[t]);return u})(e,t)}function u(e){return n.slice(f(e),0,4)}function s(t){const r='string'==typeof t?t:e.formatAbiItem(t);return i.normalizeSignature(r)}function f(e){return'string'!=typeof e&&'hash'in e&&e.hash?e.hash:r.keccak256(n.fromString(s(e)))}class c extends t.BaseError{constructor(t,r){super('Found ambiguous types in overloaded ABI Items.',{metaMessages:[`\`${t.type}\` in \`${i.normalizeSignature(e.formatAbiItem(t.abiItem))}\`, and`,`\`${r.type}\` in \`${i.normalizeSignature(e.formatAbiItem(r.abiItem))}\``,'','These types encode differently and cannot be distinguished at runtime.','Remove one of the ambiguous items in the ABI.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiItem.AmbiguityError'})}}_e.AmbiguityError=c;class l extends t.BaseError{constructor({name:e,data:t,type:r="item"}){super(`ABI ${r}${e?` with name "${e}"`:t?` with data "${t}"`:''} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiItem.NotFoundError'})}}_e.NotFoundError=l;class p extends t.BaseError{constructor({data:e}){super(`Selector size is invalid. Expected 4 bytes. Received ${n.size(e)} bytes ("${e}").`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiItem.InvalidSelectorSizeError'})}}_e.InvalidSelectorSizeError=p}),8342,[1255,8153,8343,8151,8344]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.keccak256=function(e,r={}){const{as:f=('string'==typeof e?'Hex':'Bytes')}=r,s=(0,t.keccak_256)(n.from(e));return'Bytes'===f?s:o.fromBytes(s)},_e.ripemd160=function(t,r={}){const{as:f=('string'==typeof t?'Hex':'Bytes')}=r,s=(0,e.ripemd160)(n.from(t));return'Bytes'===f?s:o.fromBytes(s)},_e.sha256=function(e,t={}){const{as:f=('string'==typeof e?'Hex':'Bytes')}=t,s=(0,r.sha256)(n.from(e));return'Bytes'===f?s:o.fromBytes(s)},_e.validate=function(e){return o.validate(e)&&32===o.size(e)};var e=_r(d[0]),t=_r(d[1]),r=_r(d[2]),n=f(_r(d[3])),o=f(_r(d[4]));function f(e,t){if("function"==typeof WeakMap)var r=new WeakMap,n=new WeakMap;return(f=function(e,t){if(!t&&e&&e.__esModule)return e;var o,f,s={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return s;if(o=t?n:r){if(o.has(e))return o.get(e);o.set(e,s)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((f=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(f.get||f.set)?o(s,t,f):s[t]=e[t]);return s})(e,t)}}),8343,[1513,1296,1381,8152,8151]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.getAmbiguousTypes=function t(n,r,s){for(const i in n){const o=n[i],u=r[i];if('tuple'===o.type&&'tuple'===u.type&&'components'in o&&'components'in u)return t(o.components,u.components,s[i]);const c=[o.type,u.type];if(!(!c.includes('address')||!c.includes('bytes20'))||(c.includes('address')&&c.includes('string')||!(!c.includes('address')||!c.includes('bytes')))&&e.validate(s[i],{strict:!1}))return c}return},_e.isArgOfType=function t(n,r){const s=typeof n,i=r.type;switch(i){case'address':return e.validate(n,{strict:!1});case'bool':return'boolean'===s;case'function':case'string':return'string'===s;default:return'tuple'===i&&'components'in r?Object.values(r.components).every(((e,r)=>t(Object.values(n)[r],e))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?'number'===s||'bigint'===s:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?'string'===s||n instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)&&(Array.isArray(n)&&n.every((e=>t(e,{...r,type:i.replace(/(\[[0-9]{0,}\])$/,'')}))))}},_e.normalizeSignature=function(e){let n=!0,r='',s=0,i='',o=!1;for(let t=0;t<e.length;t++){const u=e[t];if(['(',')',','].includes(u)&&(n=!0),'('===u&&s++,')'===u&&s--,n)if(0!==s)' '!==u?(i+=u,r+=u):','!==e[t-1]&&','!==r&&',('!==r&&(r='',n=!1);else if(' '===u&&['event','function','error',''].includes(i))i='';else if(i+=u,')'===u){o=!0;break}}if(!o)throw new t.BaseError('Unable to normalize signature.');return i};var e=n(_r(d[0])),t=n(_r(d[1]));function n(e,t){if("function"==typeof WeakMap)var r=new WeakMap,s=new WeakMap;return(n=function(e,t){if(!t&&e&&e.__esModule)return e;var n,i,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(n=t?s:r){if(n.has(e))return n.get(e);n.set(e,o)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((i=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(i.get||i.set)?n(o,t,i):o[t]=e[t]);return o})(e,t)}}),8344,[8345,8153]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.InvalidInputError=_e.InvalidChecksumError=_e.InvalidAddressError=void 0,_e.assert=i,_e.checksum=u,_e.from=l,_e.fromPublicKey=function(e,r={}){return l(`0x${s.keccak256(`0x${n.toHex(e).slice(4)}`).substring(26)}`,r)},_e.isEqual=function(e,r){return i(e,{strict:!1}),i(r,{strict:!1}),e.toLowerCase()===r.toLowerCase()},_e.validate=function(e,r={}){const{strict:t=!0}=r??{};try{return i(e,{strict:t}),!0}catch{return!1}};var e=o(_r(d[0])),r=o(_r(d[1])),t=o(_r(d[2])),s=o(_r(d[3])),n=o(_r(d[4]));function o(e,r){if("function"==typeof WeakMap)var t=new WeakMap,s=new WeakMap;return(o=function(e,r){if(!r&&e&&e.__esModule)return e;var n,o,c={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return c;if(n=r?s:t){if(n.has(e))return n.get(e);n.set(e,c)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(o.get||o.set)?n(c,r,o):c[r]=e[r]);return c})(e,r)}const c=/^0x[a-fA-F0-9]{40}$/;function i(e,r={}){const{strict:t=!0}=r;if(!c.test(e))throw new f({address:e,cause:new p});if(t){if(e.toLowerCase()===e)return;if(u(e)!==e)throw new f({address:e,cause:new h})}}function u(t){if(r.checksum.has(t))return r.checksum.get(t);i(t,{strict:!1});const n=t.substring(2).toLowerCase(),o=s.keccak256(e.fromString(n),{as:'Bytes'}),c=n.split('');for(let e=0;e<40;e+=2)o[e>>1]>>4>=8&&c[e]&&(c[e]=c[e].toUpperCase()),(15&o[e>>1])>=8&&c[e+1]&&(c[e+1]=c[e+1].toUpperCase());const u=`0x${c.join('')}`;return r.checksum.set(t,u),u}function l(e,r={}){const{checksum:t=!1}=r;return i(e),t?u(e):e}class f extends t.BaseError{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Address.InvalidAddressError'})}}_e.InvalidAddressError=f;class p extends t.BaseError{constructor(){super('Address is not a 20 byte (40 hexadecimal character) value.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Address.InvalidInputError'})}}_e.InvalidInputError=p;class h extends t.BaseError{constructor(){super('Address does not match its checksum counterpart.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Address.InvalidChecksumError'})}}_e.InvalidChecksumError=h}),8345,[8152,8346,8153,8343,8348]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.checksum=void 0,e.clear=function(){for(const u of Object.values(c))u.clear()};const c={checksum:new(r(d[0]).LruMap)(8192)};e.checksum=c.checksum}),8346,[8347]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.LruMap=void 0;class t extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const s=super.get(t);return super.has(t)&&void 0!==s&&(this.delete(t),super.set(t,s)),s}set(t,s){if(super.set(t,s),this.maxSize&&this.size>this.maxSize){const t=this.keys().next().value;t&&this.delete(t)}return this}}e.LruMap=t}),8347,[]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.InvalidUncompressedPrefixError=_e.InvalidSerializedSizeError=_e.InvalidPrefixError=_e.InvalidError=_e.InvalidCompressedPrefixError=void 0,_e.assert=s,_e.compress=function(e){const{x:r,y:i}=e;return{prefix:i%2n===0n?2:3,x:r}},_e.from=function(r){const n=(()=>{if(i.validate(r))return u(r);if(e.validate(r))return o(r);const{prefix:n,x:t,y:s}=r;return'bigint'==typeof t&&'bigint'==typeof s?{prefix:n??4,x:t,y:s}:{prefix:n,x:t}})();return s(n),n},_e.fromBytes=o,_e.fromHex=u,_e.toBytes=function(r,i={}){return e.fromHex(c(r,i))},_e.toHex=c,_e.validate=function(e,r={}){try{return s(e,r),!0}catch(e){return!1}};var e=t(_r(d[0])),r=t(_r(d[1])),i=t(_r(d[2])),n=t(_r(d[3]));function t(e,r){if("function"==typeof WeakMap)var i=new WeakMap,n=new WeakMap;return(t=function(e,r){if(!r&&e&&e.__esModule)return e;var t,s,o={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return o;if(t=r?n:i){if(t.has(e))return t.get(e);t.set(e,o)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((s=(t=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(s.get||s.set)?t(o,r,s):o[r]=e[r]);return o})(e,r)}function s(e,r={}){const{compressed:i}=r,{prefix:n,x:t,y:s}=e;if(!1===i||'bigint'==typeof t&&'bigint'==typeof s){if(4!==n)throw new l({prefix:n,cause:new b})}else{if(!0!==i&&('bigint'!=typeof t||void 0!==s))throw new f({publicKey:e});if(3!==n&&2!==n)throw new l({prefix:n,cause:new p})}}function o(e){return u(i.fromBytes(e))}function u(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new x({publicKey:e});if(130===e.length){return{prefix:4,x:BigInt(i.slice(e,0,32)),y:BigInt(i.slice(e,32,64))}}if(132===e.length){return{prefix:Number(i.slice(e,0,1)),x:BigInt(i.slice(e,1,33)),y:BigInt(i.slice(e,33,65))}}return{prefix:Number(i.slice(e,0,1)),x:BigInt(i.slice(e,1,33))}}function c(e,r={}){s(e);const{prefix:n,x:t,y:o}=e,{includePrefix:u=!0}=r;return i.concat(u?i.fromNumber(n,{size:1}):'0x',i.fromNumber(t,{size:32}),'bigint'==typeof o?i.fromNumber(o,{size:32}):'0x')}class f extends r.BaseError{constructor({publicKey:e}){super(`Value \`${n.stringify(e)}\` is not a valid public key.`,{metaMessages:['Public key must contain:','- an `x` and `prefix` value (compressed)','- an `x`, `y`, and `prefix` value (uncompressed)']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'PublicKey.InvalidError'})}}_e.InvalidError=f;class l extends r.BaseError{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'PublicKey.InvalidPrefixError'})}}_e.InvalidPrefixError=l;class p extends r.BaseError{constructor(){super('Prefix must be 2 or 3 for compressed public keys.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'PublicKey.InvalidCompressedPrefixError'})}}_e.InvalidCompressedPrefixError=p;class b extends r.BaseError{constructor(){super('Prefix must be 4 for uncompressed public keys.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'PublicKey.InvalidUncompressedPrefixError'})}}_e.InvalidUncompressedPrefixError=b;class x extends r.BaseError{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:['Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).',`Received ${i.size(i.from(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'PublicKey.InvalidSerializedSizeError'})}}_e.InvalidSerializedSizeError=x}),8348,[8152,8153,8151,8156]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.ZeroDataError=_e.LengthMismatchError=_e.InvalidTypeError=_e.InvalidArrayError=_e.DataSizeTooSmallError=_e.BytesSizeMismatchError=_e.ArrayLengthMismatchError=void 0,_e.decode=function(e,r,n={}){const{as:o="Array",checksumAddress:l=!1}=n,u='string'==typeof r?t.fromHex(r):r,p=c.create(u);if(0===t.size(u)&&e.length>0)throw new h;if(t.size(u)&&t.size(u)<32)throw new f({data:'string'==typeof r?r:s.fromBytes(r),parameters:e,size:t.size(u)});let b=0;const y='Array'===o?[]:{};for(let r=0;r<e.length;++r){const t=e[r];p.setPosition(b);const[n,s]=i.decodeParameter(p,t,{checksumAddress:l,staticPosition:0});b+=s,'Array'===o?y.push(n):y[t.name??r]=n}return y},_e.encode=function(e,r,t){const{checksumAddress:n=!1}=t??{};if(e.length!==r.length)throw new y({expectedLength:e.length,givenLength:r.length});const s=i.prepareParameters({checksumAddress:n,parameters:e,values:r}),o=i.encode(s);return 0===o.length?'0x':o},_e.encodePacked=u,_e.format=function(r){return e.formatAbiParameters(r)},_e.from=function(r){return Array.isArray(r)&&'string'==typeof r[0]||'string'==typeof r?e.parseAbiParameters(r):r};var e=l(_r(d[0])),r=l(_r(d[1])),t=l(_r(d[2])),n=l(_r(d[3])),s=l(_r(d[4])),o=l(_r(d[5])),i=l(_r(d[6])),c=l(_r(d[7]));function l(e,r){if("function"==typeof WeakMap)var t=new WeakMap,n=new WeakMap;return(l=function(e,r){if(!r&&e&&e.__esModule)return e;var s,o,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(s=r?n:t){if(s.has(e))return s.get(e);s.set(e,i)}for(const r in e)"default"!==r&&{}.hasOwnProperty.call(e,r)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,r))&&(o.get||o.set)?s(i,r,o):i[r]=e[r]);return i})(e,r)}function u(e,r){if(e.length!==r.length)throw new y({expectedLength:e.length,givenLength:r.length});const t=[];for(let n=0;n<e.length;n++){const s=e[n],o=r[n];t.push(u.encode(s,o))}return s.concat(...t)}!(function(e){e.encode=function e(t,n,i=!1){if('address'===t){const e=n;return r.assert(e),s.padLeft(e.toLowerCase(),i?32:0)}if('string'===t)return s.fromString(n);if('bytes'===t)return n;if('bool'===t)return s.padLeft(s.fromBoolean(n),i?32:1);const c=t.match(o.integerRegex);if(c){const[e,r,t="256"]=c,o=Number.parseInt(t)/8;return s.fromNumber(n,{size:i?32:o,signed:'int'===r})}const l=t.match(o.bytesRegex);if(l){const[e,r]=l;if(Number.parseInt(r)!==(n.length-2)/2)throw new b({expectedSize:Number.parseInt(r),value:n});return s.padRight(n,i?32:0)}const u=t.match(o.arrayRegex);if(u&&Array.isArray(n)){const[r,t]=u,o=[];for(let r=0;r<n.length;r++)o.push(e(t,n[r],!0));return 0===o.length?'0x':s.concat(...o)}throw new A(t)}})(u||(_e.encodePacked=u={}));class f extends n.BaseError{constructor({data:r,parameters:t,size:n}){super(`Data size of ${n} bytes is too small for given parameters.`,{metaMessages:[`Params: (${e.formatAbiParameters(t)})`,`Data:   ${r} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.DataSizeTooSmallError'})}}_e.DataSizeTooSmallError=f;class h extends n.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.ZeroDataError'})}}_e.ZeroDataError=h;class p extends n.BaseError{constructor({expectedLength:e,givenLength:r,type:t}){super(`Array length mismatch for type \`${t}\`. Expected: \`${e}\`. Given: \`${r}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.ArrayLengthMismatchError'})}}_e.ArrayLengthMismatchError=p;class b extends n.BaseError{constructor({expectedSize:e,value:r}){super(`Size of bytes "${r}" (bytes${s.size(r)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.BytesSizeMismatchError'})}}_e.BytesSizeMismatchError=b;class y extends n.BaseError{constructor({expectedLength:e,givenLength:r}){super(['ABI encoding parameters/values length mismatch.',`Expected length (parameters): ${e}`,`Given length (values): ${r}`].join('\n')),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.LengthMismatchError'})}}_e.LengthMismatchError=y;class v extends n.BaseError{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.InvalidArrayError'})}}_e.InvalidArrayError=v;class A extends n.BaseError{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'AbiParameters.InvalidTypeError'})}}_e.InvalidTypeError=A}),8349,[1255,8345,8152,8153,8151,8350,8351,8352]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.minInt96=e.minInt88=e.minInt80=e.minInt8=e.minInt72=e.minInt64=e.minInt56=e.minInt48=e.minInt40=e.minInt32=e.minInt256=e.minInt248=e.minInt240=e.minInt24=e.minInt232=e.minInt224=e.minInt216=e.minInt208=e.minInt200=e.minInt192=e.minInt184=e.minInt176=e.minInt168=e.minInt160=e.minInt16=e.minInt152=e.minInt144=e.minInt136=e.minInt128=e.minInt120=e.minInt112=e.minInt104=e.maxUint96=e.maxUint88=e.maxUint80=e.maxUint8=e.maxUint72=e.maxUint64=e.maxUint56=e.maxUint48=e.maxUint40=e.maxUint32=e.maxUint256=e.maxUint248=e.maxUint240=e.maxUint24=e.maxUint232=e.maxUint224=e.maxUint216=e.maxUint208=e.maxUint200=e.maxUint192=e.maxUint184=e.maxUint176=e.maxUint168=e.maxUint160=e.maxUint16=e.maxUint152=e.maxUint144=e.maxUint136=e.maxUint128=e.maxUint120=e.maxUint112=e.maxUint104=e.maxInt96=e.maxInt88=e.maxInt80=e.maxInt8=e.maxInt72=e.maxInt64=e.maxInt56=e.maxInt48=e.maxInt40=e.maxInt32=e.maxInt256=e.maxInt248=e.maxInt240=e.maxInt24=e.maxInt232=e.maxInt224=e.maxInt216=e.maxInt208=e.maxInt200=e.maxInt192=e.maxInt184=e.maxInt176=e.maxInt168=e.maxInt160=e.maxInt16=e.maxInt152=e.maxInt144=e.maxInt136=e.maxInt128=e.maxInt120=e.maxInt112=e.maxInt104=e.integerRegex=e.bytesRegex=e.arrayRegex=void 0;e.arrayRegex=/^(.*)\[([0-9]*)\]$/,e.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,e.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,e.maxInt8=127n,e.maxInt16=32767n,e.maxInt24=8388607n,e.maxInt32=2n**31n-1n,e.maxInt40=2n**39n-1n,e.maxInt48=2n**47n-1n,e.maxInt56=2n**55n-1n,e.maxInt64=2n**63n-1n,e.maxInt72=2n**71n-1n,e.maxInt80=2n**79n-1n,e.maxInt88=2n**87n-1n,e.maxInt96=2n**95n-1n,e.maxInt104=2n**103n-1n,e.maxInt112=2n**111n-1n,e.maxInt120=2n**119n-1n,e.maxInt128=2n**127n-1n,e.maxInt136=2n**135n-1n,e.maxInt144=2n**143n-1n,e.maxInt152=2n**151n-1n,e.maxInt160=2n**159n-1n,e.maxInt168=2n**167n-1n,e.maxInt176=2n**175n-1n,e.maxInt184=2n**183n-1n,e.maxInt192=2n**191n-1n,e.maxInt200=2n**199n-1n,e.maxInt208=2n**207n-1n,e.maxInt216=2n**215n-1n,e.maxInt224=2n**223n-1n,e.maxInt232=2n**231n-1n,e.maxInt240=2n**239n-1n,e.maxInt248=2n**247n-1n,e.maxInt256=2n**255n-1n,e.minInt8=-128n,e.minInt16=-32768n,e.minInt24=-8388608n,e.minInt32=-(2n**31n),e.minInt40=-(2n**39n),e.minInt48=-(2n**47n),e.minInt56=-(2n**55n),e.minInt64=-(2n**63n),e.minInt72=-(2n**71n),e.minInt80=-(2n**79n),e.minInt88=-(2n**87n),e.minInt96=-(2n**95n),e.minInt104=-(2n**103n),e.minInt112=-(2n**111n),e.minInt120=-(2n**119n),e.minInt128=-(2n**127n),e.minInt136=-(2n**135n),e.minInt144=-(2n**143n),e.minInt152=-(2n**151n),e.minInt160=-(2n**159n),e.minInt168=-(2n**167n),e.minInt176=-(2n**175n),e.minInt184=-(2n**183n),e.minInt192=-(2n**191n),e.minInt200=-(2n**199n),e.minInt208=-(2n**207n),e.minInt216=-(2n**215n),e.minInt224=-(2n**223n),e.minInt232=-(2n**231n),e.minInt240=-(2n**239n),e.minInt248=-(2n**247n),e.minInt256=-(2n**255n),e.maxUint8=255n,e.maxUint16=65535n,e.maxUint24=2n**24n-1n,e.maxUint32=2n**32n-1n,e.maxUint40=2n**40n-1n,e.maxUint48=2n**48n-1n,e.maxUint56=2n**56n-1n,e.maxUint64=2n**64n-1n,e.maxUint72=2n**72n-1n,e.maxUint80=2n**80n-1n,e.maxUint88=2n**88n-1n,e.maxUint96=2n**96n-1n,e.maxUint104=2n**104n-1n,e.maxUint112=2n**112n-1n,e.maxUint120=2n**120n-1n,e.maxUint128=2n**128n-1n,e.maxUint136=2n**136n-1n,e.maxUint144=2n**144n-1n,e.maxUint152=2n**152n-1n,e.maxUint160=2n**160n-1n,e.maxUint168=2n**168n-1n,e.maxUint176=2n**176n-1n,e.maxUint184=2n**184n-1n,e.maxUint192=2n**192n-1n,e.maxUint200=2n**200n-1n,e.maxUint208=2n**208n-1n,e.maxUint216=2n**216n-1n,e.maxUint224=2n**224n-1n,e.maxUint232=2n**232n-1n,e.maxUint240=2n**240n-1n,e.maxUint248=2n**248n-1n,e.maxUint256=2n**256n-1n}),8350,[]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.decodeAddress=f,_e.decodeArray=y,_e.decodeBool=l,_e.decodeBytes=h,_e.decodeNumber=b,_e.decodeParameter=c,_e.decodeString=A,_e.decodeTuple=P,_e.encode=B,_e.encodeAddress=N,_e.encodeArray=v,_e.encodeBoolean=z,_e.encodeBytes=w,_e.encodeNumber=W,_e.encodeString=I,_e.encodeTuple=_,_e.getArrayComponents=M,_e.hasDynamicChild=S,_e.prepareParameter=k,_e.prepareParameters=function({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(k({checksumAddress:e,parameter:t[s],value:n[s]}));return r};var e=i(_r(d[0])),t=i(_r(d[1])),n=i(_r(d[2])),r=i(_r(d[3])),s=i(_r(d[4])),o=_r(d[5]);function i(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(i=function(e,t){if(!t&&e&&e.__esModule)return e;var s,o,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(s=t?r:n){if(s.has(e))return s.get(e);s.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?s(i,t,o):i[t]=e[t]);return i})(e,t)}function c(t,n,r){const{checksumAddress:s,staticPosition:o}=r,i=M(n.type);if(i){const[e,r]=i;return y(t,{...n,type:r},{checksumAddress:s,length:e,staticPosition:o})}if('tuple'===n.type)return P(t,n,{checksumAddress:s,staticPosition:o});if('address'===n.type)return f(t,{checksum:s});if('bool'===n.type)return l(t);if(n.type.startsWith('bytes'))return h(t,n,{staticPosition:o});if(n.type.startsWith('uint')||n.type.startsWith('int'))return b(t,n);if('string'===n.type)return A(t,{staticPosition:o});throw new e.InvalidTypeError(n.type)}const u=32,p=32;function f(e,r={}){const{checksum:o=!1}=r,i=e.readBytes(32);return[(c=s.fromBytes(n.slice(i,-20)),o?t.checksum(c):c),32];var c}function y(e,t,r){const{checksumAddress:s,length:o,staticPosition:i}=r;if(!o){const r=i+n.toNumber(e.readBytes(p)),o=r+u;e.setPosition(r);const f=n.toNumber(e.readBytes(u)),y=S(t);let l=0;const h=[];for(let n=0;n<f;++n){e.setPosition(o+(y?32*n:l));const[r,i]=c(e,t,{checksumAddress:s,staticPosition:o});l+=i,h.push(r)}return e.setPosition(i+32),[h,32]}if(S(t)){const r=i+n.toNumber(e.readBytes(p)),u=[];for(let n=0;n<o;++n){e.setPosition(r+32*n);const[o]=c(e,t,{checksumAddress:s,staticPosition:r});u.push(o)}return e.setPosition(i+32),[u,32]}let f=0;const y=[];for(let n=0;n<o;++n){const[n,r]=c(e,t,{checksumAddress:s,staticPosition:i+f});f+=r,y.push(n)}return[y,f]}function l(e){return[n.toBoolean(e.readBytes(32),{size:32}),32]}function h(e,t,{staticPosition:r}){const[o,i]=t.type.split('bytes');if(!i){const t=n.toNumber(e.readBytes(32));e.setPosition(r+t);const o=n.toNumber(e.readBytes(32));if(0===o)return e.setPosition(r+32),['0x',32];const i=e.readBytes(o);return e.setPosition(r+32),[s.fromBytes(i),32]}return[s.fromBytes(e.readBytes(Number.parseInt(i),32)),32]}function b(e,t){const r=t.type.startsWith('int'),s=Number.parseInt(t.type.split('int')[1]||'256'),o=e.readBytes(32);return[s>48?n.toBigInt(o,{signed:r}):n.toNumber(o,{signed:r}),32]}function P(e,t,r){const{checksumAddress:s,staticPosition:o}=r,i=0===t.components.length||t.components.some((({name:e})=>!e)),u=i?[]:{};let f=0;if(S(t)){const r=o+n.toNumber(e.readBytes(p));for(let n=0;n<t.components.length;++n){const o=t.components[n];e.setPosition(r+f);const[p,y]=c(e,o,{checksumAddress:s,staticPosition:r});f+=y,u[i?n:o?.name]=p}return e.setPosition(o+32),[u,32]}for(let n=0;n<t.components.length;++n){const r=t.components[n],[p,y]=c(e,r,{checksumAddress:s,staticPosition:o});u[i?n:r?.name]=p,f+=y}return[u,f]}function A(e,{staticPosition:t}){const r=t+n.toNumber(e.readBytes(32));e.setPosition(r);const s=n.toNumber(e.readBytes(32));if(0===s)return e.setPosition(t+32),['',32];const o=e.readBytes(s,32),i=n.toString(n.trimLeft(o));return e.setPosition(t+32),[i,32]}function k({checksumAddress:t=!1,parameter:n,value:r}){const s=n,i=M(s.type);if(i){const[e,n]=i;return v(r,{checksumAddress:t,length:e,parameter:{...s,type:n}})}if('tuple'===s.type)return _(r,{checksumAddress:t,parameter:s});if('address'===s.type)return N(r,{checksum:t});if('bool'===s.type)return z(r);if(s.type.startsWith('uint')||s.type.startsWith('int')){const e=s.type.startsWith('int'),[,,t="256"]=o.integerRegex.exec(s.type)??[];return W(r,{signed:e,size:Number(t)})}if(s.type.startsWith('bytes'))return w(r,{type:s.type});if('string'===s.type)return I(r);throw new e.InvalidTypeError(s.type)}function B(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:r,encoded:o}=e[n];t+=r?32:s.size(o)}const n=[],r=[];let o=0;for(let i=0;i<e.length;i++){const{dynamic:c,encoded:u}=e[i];c?(n.push(s.fromNumber(t+o,{size:32})),r.push(u),o+=s.size(u)):n.push(u)}return s.concat(...n,...r)}function N(e,n){const{checksum:r=!1}=n;return t.assert(e,{strict:r}),{dynamic:!1,encoded:s.padLeft(e.toLowerCase())}}function v(t,n){const{checksumAddress:r,length:o,parameter:i}=n,c=null===o;if(!Array.isArray(t))throw new e.InvalidArrayError(t);if(!c&&t.length!==o)throw new e.ArrayLengthMismatchError({expectedLength:o,givenLength:t.length,type:`${i.type}[${o}]`});let u=!1;const p=[];for(let e=0;e<t.length;e++){const n=k({checksumAddress:r,parameter:i,value:t[e]});n.dynamic&&(u=!0),p.push(n)}if(c||u){const e=B(p);if(c){const t=s.fromNumber(p.length,{size:32});return{dynamic:!0,encoded:p.length>0?s.concat(t,e):t}}if(u)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:s.concat(...p.map((({encoded:e})=>e)))}}function w(t,{type:n}){const[,r]=n.split('bytes'),o=s.size(t);if(!r){let e=t;return o%32!=0&&(e=s.padRight(e,32*Math.ceil((t.length-2)/2/32))),{dynamic:!0,encoded:s.concat(s.padLeft(s.fromNumber(o,{size:32})),e)}}if(o!==Number.parseInt(r))throw new e.BytesSizeMismatchError({expectedSize:Number.parseInt(r),value:t});return{dynamic:!1,encoded:s.padRight(t)}}function z(e){if('boolean'!=typeof e)throw new r.BaseError(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:s.padLeft(s.fromBoolean(e))}}function W(e,{signed:t,size:n}){if('number'==typeof n){const r=2n**(BigInt(n)-(t?1n:0n))-1n,o=t?-r-1n:0n;if(e>r||e<o)throw new s.IntegerOutOfRangeError({max:r.toString(),min:o.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:s.fromNumber(e,{size:32,signed:t})}}function I(e){const t=s.fromString(e),n=Math.ceil(s.size(t)/32),r=[];for(let e=0;e<n;e++)r.push(s.padRight(s.slice(t,32*e,32*(e+1))));return{dynamic:!0,encoded:s.concat(s.padRight(s.fromNumber(s.size(t),{size:32})),...r)}}function _(e,t){const{checksumAddress:n,parameter:r}=t;let o=!1;const i=[];for(let t=0;t<r.components.length;t++){const s=r.components[t],c=k({checksumAddress:n,parameter:s,value:e[Array.isArray(e)?t:s.name]});i.push(c),c.dynamic&&(o=!0)}return{dynamic:o,encoded:o?B(i):s.concat(...i.map((({encoded:e})=>e)))}}function M(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function S(e){const{type:t}=e;if('string'===t)return!0;if('bytes'===t)return!0;if(t.endsWith('[]'))return!0;if('tuple'===t)return e.components?.some(S);const n=M(e.type);return!(!n||!S({...e,type:n[1]}))}}),8351,[8349,8345,8152,8153,8151,8350]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.RecursiveReadLimitExceededError=_e.PositionOutOfBoundsError=_e.NegativeOffsetError=void 0,_e.create=function(t,{recursiveReadLimit:s=8192}={}){const e=Object.create(i);return e.bytes=t,e.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),e.positionReadCount=new Map,e.recursiveReadLimit=s,e};var t=(function(t,i){if("function"==typeof WeakMap)var s=new WeakMap,e=new WeakMap;return(function(t,i){if(!i&&t&&t.__esModule)return t;var o,n,r={__proto__:null,default:t};if(null===t||"object"!=typeof t&&"function"!=typeof t)return r;if(o=i?e:s){if(o.has(t))return o.get(t);o.set(t,r)}for(const i in t)"default"!==i&&{}.hasOwnProperty.call(t,i)&&((n=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(t,i))&&(n.get||n.set)?o(r,i,n):r[i]=t[i]);return r})(t,i)})(_r(d[0]));const i={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new o({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new e({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new s({offset:t});const i=this.position-t;this.assertPosition(i),this.position=i},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new s({offset:t});const i=this.position+t;this.assertPosition(i),this.position=i},inspectByte(t){const i=t??this.position;return this.assertPosition(i),this.bytes[i]},inspectBytes(t,i){const s=i??this.position;return this.assertPosition(s+t-1),this.bytes.subarray(s,s+t)},inspectUint8(t){const i=t??this.position;return this.assertPosition(i),this.bytes[i]},inspectUint16(t){const i=t??this.position;return this.assertPosition(i+1),this.dataView.getUint16(i)},inspectUint24(t){const i=t??this.position;return this.assertPosition(i+2),(this.dataView.getUint16(i)<<8)+this.dataView.getUint8(i+2)},inspectUint32(t){const i=t??this.position;return this.assertPosition(i+3),this.dataView.getUint32(i)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,255&t),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,i){this.assertReadLimit(),this._touch();const s=this.inspectBytes(t);return this.position+=i??t,s},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const i=this.position;return this.assertPosition(t),this.position=t,()=>this.position=i},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};class s extends t.BaseError{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Cursor.NegativeOffsetError'})}}_e.NegativeOffsetError=s;class e extends t.BaseError{constructor({length:t,position:i}){super(`Position \`${i}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Cursor.PositionOutOfBoundsError'})}}_e.PositionOutOfBoundsError=e;class o extends t.BaseError{constructor({count:t,limit:i}){super(`Recursive read limit of \`${i}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:'Cursor.RecursiveReadLimitExceededError'})}}_e.RecursiveReadLimitExceededError=o}),8352,[8153]);
__d((function(g,_r,_i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.decodeData=function(e,o){const{overloads:c}=e;if(r.size(o)<4)throw new t.InvalidSelectorSizeError({data:o});if(0===e.inputs.length)return;const i=c?u([e,...c],o):e;return r.size(o)<=4?void 0:n.decode(i.inputs,r.slice(o,4))},_e.decodeResult=function(e,t,r={}){const o=n.decode(e.outputs,t,r);if(o&&0===Object.keys(o).length)return;if(o&&1===Object.keys(o).length)return Array.isArray(o)?o[0]:Object.values(o)[0];return o},_e.encodeData=function(e,...t){const{overloads:o}=e,i=o?u([e,...o],e.name,{args:t[0]}):e,f=c(i),s=t.length>0?n.encode(i.inputs,t[0]):void 0;return s?r.concat(f,s):f},_e.encodeResult=function(e,t,r={}){const{as:o="Array"}=r,u=1===e.outputs.length?[t]:Array.isArray(t)?t:'Object'===o?Object.values(t):[t];return n.encode(e.outputs,u)},_e.format=function(t){return e.formatAbiItem(t)},_e.from=function(e,n={}){return t.from(e,n)},_e.fromAbi=u,_e.getSelector=c;var e=o(_r(d[0])),t=o(_r(d[1])),n=o(_r(d[2])),r=o(_r(d[3]));function o(e,t){if("function"==typeof WeakMap)var n=new WeakMap,r=new WeakMap;return(o=function(e,t){if(!t&&e&&e.__esModule)return e;var o,u,c={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return c;if(o=t?r:n){if(o.has(e))return o.get(e);o.set(e,c)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((u=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(u.get||u.set)?o(c,t,u):c[t]=e[t]);return c})(e,t)}function u(e,n,r){const o=t.fromAbi(e,n,r);if('function'!==o.type)throw new t.NotFoundError({name:n,type:'function'});return o}function c(e){return t.getSelector(e)}}),8353,[1255,8342,8349,8151]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.zeroAddress=e.ethAddress=e.entryPoint08Address=e.entryPoint07Address=e.entryPoint06Address=void 0;e.entryPoint06Address='0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789',e.entryPoint07Address='0x0000000071727De22E5E9d8BAf0edAc6f37da032',e.entryPoint08Address='0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108',e.ethAddress='0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee',e.zeroAddress='0x0000000000000000000000000000000000000000'}),8354,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyMessage=async function(n,{address:c,message:f,factory:o,factoryData:y,signature:u,...h}){const v=(0,s.hashMessage)(f);return(0,t.verifyHash)(n,{address:c,factory:o,factoryData:y,hash:v,signature:u,...h})};var s=r(d[0]),t=r(d[1])}),8355,[8316,8356]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyHash=async function(x,E){const{address:w,factory:D,factoryData:_,hash:p,signature:H,universalSignatureVerifierAddress:j=x.chain?.contracts?.universalSignatureVerifier?.address,...z}=E,B=(0,l.isHex)(H)?H:'object'==typeof H&&'r'in H&&'s'in H?(0,A.serializeSignature)(H):(0,f.bytesToHex)(H),C=await(async()=>D||_?(0,v.isErc6492Signature)(B)?B:(0,b.serializeErc6492Signature)({address:D,data:_,signature:B}):B)();try{const s=j?{to:j,data:(0,h.encodeFunctionData)({abi:t.universalSignatureValidatorAbi,functionName:'isValidSig',args:[w,p,C]}),...z}:{data:(0,o.encodeDeployData)({abi:t.universalSignatureValidatorAbi,args:[w,p,C],bytecode:n.universalSignatureValidatorByteCode}),...z},{data:c}=await(0,y.getAction)(x,V.call,'call')(s);return(0,h.hexToBool)(c??'0x0')}catch(t){try{if((0,u.isAddressEqual)((0,c.getAddress)(w),await(0,S.recoverAddress)({hash:p,signature:H})))return!0}catch{}if(t instanceof s.CallExecutionError)return!1;throw t}};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]),u=r(d[5]),l=r(d[6]),f=r(d[7]),y=r(d[8]),h=r(d[9]),v=r(d[10]),S=r(d[11]),b=r(d[12]),A=r(d[13]),V=r(d[14])}),8356,[8160,8162,8121,8164,8112,8147,8092,8101,8184,8291,8324,8193,8326,8357,8149]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeSignature=function({r:o,s:u,to:c="hex",v:x,yParity:h}){const s=(()=>{if(0===h||1===h)return h;if(x&&(27n===x||28n===x||x>=35n))return x%2n===0n?1:0;throw new Error('Invalid `v` or `yParity` value')})(),v=`0x${new n.secp256k1.Signature((0,r.hexToBigInt)(o),(0,r.hexToBigInt)(u)).toCompactHex()}${0===s?'1b':'1c'}`;return'hex'===c?v:(0,t.hexToBytes)(v)};var n=_r(d[0]),r=_r(d[1]),t=_r(d[2])}),8357,[8082,8098,8095]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyTypedData=async function(y,n){const{address:o,factory:c,factoryData:f,signature:p,message:u,primaryType:h,types:v,domain:D,...T}=n,_=(0,s.hashTypedData)({message:u,primaryType:h,types:v,domain:D});return(0,t.verifyHash)(y,{address:o,factory:c,factoryData:f,hash:_,signature:p,...T})};var s=r(d[0]),t=r(d[1])}),8358,[8299,8356]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.waitForTransactionReceipt=async function(v,{confirmations:y=1,hash:R,onReplaced:T,pollingInterval:k=v.pollingInterval,retryCount:N=6,retryDelay:w=({count:t})=>200*(1<<t),timeout:B=18e4}){const F=(0,u.stringify)(['waitForTransactionReceipt',v.uid,R]);let j,A,E,_,C,I=!1;const{promise:M,resolve:O,reject:D}=(0,l.withResolvers)(),P=B?setTimeout((()=>{C(),_(),D(new o.WaitForTransactionReceiptTimeoutError({hash:R}))}),B):void 0;return _=(0,c.observe)(F,{onReplaced:T,resolve:O,reject:D},(c=>{C=(0,n.getAction)(v,h.watchBlockNumber,'watchBlockNumber')({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:k,async onBlockNumber(l){const u=t=>{clearTimeout(P),C(),t(),_()};let h=l;if(!I)try{if(E){if(y>1&&(!E.blockNumber||h-E.blockNumber+1n<y))return;return void u((()=>c.resolve(E)))}if(j||(I=!0,await(0,s.withRetry)((async()=>{j=await(0,n.getAction)(v,p.getTransaction,'getTransaction')({hash:R}),j.blockNumber&&(h=j.blockNumber)}),{delay:w,retryCount:N}),I=!1),E=await(0,n.getAction)(v,f.getTransactionReceipt,'getTransactionReceipt')({hash:R}),y>1&&(!E.blockNumber||h-E.blockNumber+1n<y))return;u((()=>c.resolve(E)))}catch(l){if(l instanceof o.TransactionNotFoundError||l instanceof o.TransactionReceiptNotFoundError){if(!j)return void(I=!1);try{A=j,I=!0;const o=await(0,s.withRetry)((()=>(0,n.getAction)(v,b.getBlock,'getBlock')({blockNumber:h,includeTransactions:!0})),{delay:w,retryCount:N,shouldRetry:({error:o})=>o instanceof t.BlockNotFoundError});I=!1;const l=o.transactions.find((({from:t,nonce:o})=>t===A.from&&o===A.nonce));if(!l)return;if(E=await(0,n.getAction)(v,f.getTransactionReceipt,'getTransactionReceipt')({hash:l.hash}),y>1&&(!E.blockNumber||h-E.blockNumber+1n<y))return;let p='replaced';l.to===A.to&&l.value===A.value&&l.input===A.input?p='repriced':l.from===l.to&&0n===l.value&&(p='cancelled'),u((()=>{c.onReplaced?.({reason:p,replacedTransaction:A,transaction:l,transactionReceipt:E}),c.resolve(E)}))}catch(t){u((()=>c.reject(t)))}}else u((()=>c.reject(l)))}}})})),M};var t=r(d[0]),o=r(d[1]),n=r(d[2]),c=r(d[3]),l=r(d[4]),s=r(d[5]),u=r(d[6]),b=r(d[7]),p=r(d[8]),f=r(d[9]),h=r(d[10])}),8359,[8205,8135,8184,8231,8168,8254,8129,8204,8335,8337,8360]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchBlockNumber=function(l,{emitOnBegin:u=!1,emitMissed:b=!1,onBlockNumber:p,onError:f,poll:k,pollingInterval:B=l.pollingInterval}){const y=void 0!==k?k:'webSocket'!==l.transport.type&&('fallback'!==l.transport.type||'webSocket'!==l.transport.transports[0].config.type);let N;return y?(()=>{const t=(0,i.stringify)(['watchBlockNumber',l.uid,u,b,B]);return(0,n.observe)(t,{onBlockNumber:p,onError:f},(t=>(0,c.poll)((async()=>{try{const n=await(0,o.getAction)(l,s.getBlockNumber,'getBlockNumber')({cacheTime:0});if(N){if(n===N)return;if(n-N>1&&b)for(let o=N+1n;o<n;o++)t.onBlockNumber(o,N),N=o}(!N||n>N)&&(t.onBlockNumber(n,N),N=n)}catch(o){t.onError?.(o)}}),{emitOnBegin:u,interval:B})))})():(()=>{const o=(0,i.stringify)(['watchBlockNumber',l.uid,u,b]);return(0,n.observe)(o,{onBlockNumber:p,onError:f},(o=>{let n=!0,c=()=>n=!1;return(async()=>{try{const i=(()=>{if('fallback'===l.transport.type){const t=l.transport.transports.find((t=>'webSocket'===t.config.type));return t?t.value:l.transport}return l.transport})(),{unsubscribe:s}=await i.subscribe({params:['newHeads'],onData(c){if(!n)return;const i=(0,t.hexToBigInt)(c.result?.number);o.onBlockNumber(i,N),N=i},onError(t){o.onError?.(t)}});c=s,n||c()}catch(t){f?.(t)}})(),()=>c()}))})()};var t=r(d[0]),o=r(d[1]),n=r(d[2]),c=r(d[3]),i=r(d[4]),s=r(d[5])}),8360,[8098,8184,8231,8232,8129,8234]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchBlocks=function(i,{blockTag:s="latest",emitMissed:u=!1,emitOnBegin:b=!1,onBlock:k,onError:p,includeTransactions:B,poll:f,pollingInterval:y=i.pollingInterval}){const w=void 0!==f?f:'webSocket'!==i.transport.type&&('fallback'!==i.transport.type||'webSocket'!==i.transport.transports[0].config.type),v=B??!1;let T;return w?(()=>{const B=(0,c.stringify)(['watchBlocks',i.uid,s,u,b,v,y]);return(0,t.observe)(B,{onBlock:k,onError:p},(t=>(0,o.poll)((async()=>{try{const o=await(0,n.getAction)(i,l.getBlock,'getBlock')({blockTag:s,includeTransactions:v});if(null!==o.number&&null!=T?.number){if(o.number===T.number)return;if(o.number-T.number>1&&u)for(let c=T?.number+1n;c<o.number;c++){const o=await(0,n.getAction)(i,l.getBlock,'getBlock')({blockNumber:c,includeTransactions:v});t.onBlock(o,T),T=o}}(null==T?.number||'pending'===s&&null==o?.number||null!==o.number&&o.number>T.number)&&(t.onBlock(o,T),T=o)}catch(n){t.onError?.(n)}}),{emitOnBegin:b,interval:y})))})():(()=>{let t=!0,o=!0,c=()=>t=!1;return(async()=>{try{b&&(0,n.getAction)(i,l.getBlock,'getBlock')({blockTag:s,includeTransactions:v}).then((n=>{t&&o&&(k(n,void 0),o=!1)})).catch(p);const u=(()=>{if('fallback'===i.transport.type){const n=i.transport.transports.find((n=>'webSocket'===n.config.type));return n?n.value:i.transport}return i.transport})(),{unsubscribe:B}=await u.subscribe({params:['newHeads'],async onData(c){if(!t)return;const s=await(0,n.getAction)(i,l.getBlock,'getBlock')({blockNumber:c.blockNumber,includeTransactions:v}).catch((()=>{}));t&&(k(s,T),o=!1,T=s)},onError(n){p?.(n)}});c=B,t||c()}catch(n){p?.(n)}})(),()=>c()})()};var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]),l=r(d[4])}),8361,[8184,8231,8232,8129,8204]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchEvent=function(w,{address:E,args:L,batch:B=!0,event:F,events:I,fromBlock:N,onError:A,onLogs:D,poll:M,pollingInterval:_=w.pollingInterval,strict:S}){const C=void 0!==M?M:'bigint'==typeof N||'webSocket'!==w.transport.type&&('fallback'!==w.transport.type||'webSocket'!==w.transport.transports[0].config.type),O=S??!1;return C?(()=>{const t=(0,s.stringify)(['watchEvent',E,L,B,w.uid,F,_,N]);return(0,n.observe)(t,{onLogs:D,onError:A},(t=>{let n,s;void 0!==N&&(n=N-1n);let c=!1;const f=(0,o.poll)((async()=>{if(c)try{let o;if(s)o=await(0,v.getAction)(w,y.getFilterChanges,'getFilterChanges')({filter:s});else{const t=await(0,v.getAction)(w,b.getBlockNumber,'getBlockNumber')({});o=n&&n!==t?await(0,v.getAction)(w,h.getLogs,'getLogs')({address:E,args:L,event:F,events:I,fromBlock:n+1n,toBlock:t}):[],n=t}if(0===o.length)return;if(B)t.onLogs(o);else for(const n of o)t.onLogs([n])}catch(n){s&&n instanceof l.InvalidInputRpcError&&(c=!1),t.onError?.(n)}else{try{s=await(0,v.getAction)(w,u.createEventFilter,'createEventFilter')({address:E,args:L,event:F,events:I,strict:O,fromBlock:N})}catch{}c=!0}}),{emitOnBegin:!0,interval:_});return async()=>{s&&await(0,v.getAction)(w,k.uninstallFilter,'uninstallFilter')({filter:s}),f()}}))})():(()=>{let n=!0,o=()=>n=!1;return(async()=>{try{const s=(()=>{if('fallback'===w.transport.type){const t=w.transport.transports.find((t=>'webSocket'===t.config.type));return t?t.value:w.transport}return w.transport})(),l=I??(F?[F]:void 0);let v=[];if(l){const n=l.flatMap((n=>(0,t.encodeEventTopics)({abi:[n],eventName:n.name,args:L})));v=[n],F&&(v=v[0])}const{unsubscribe:u}=await s.subscribe({params:['logs',{address:E,topics:v}],onData(t){if(!n)return;const o=t.result;try{const{eventName:t,args:n}=(0,f.decodeEventLog)({abi:l??[],data:o.data,topics:o.topics,strict:O}),s=(0,p.formatLog)(o,{args:n,eventName:t});D([s])}catch(t){let n,s;if(t instanceof c.DecodeLogDataMismatch||t instanceof c.DecodeLogTopicsMismatch){if(S)return;n=t.abiItem.name,s=t.abiItem.inputs?.some((t=>!('name'in t&&t.name)))}const l=(0,p.formatLog)(o,{args:s?[]:{},eventName:n});D([l])}},onError(t){A?.(t)}});o=u,n||o()}catch(t){A?.(t)}})(),()=>o()})()};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),l=r(d[5]),f=r(d[6]),p=r(d[7]),v=r(d[8]),u=r(d[9]),b=r(d[10]),y=r(d[11]),h=r(d[12]),k=r(d[13])}),8362,[8186,8231,8232,8129,8089,8138,8226,8227,8184,8279,8234,8236,8224,8237]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchPendingTransactions=function(f,{batch:h=!0,onError:p,onTransactions:w,poll:y,pollingInterval:T=f.pollingInterval}){const b=void 0!==y?y:'webSocket'!==f.transport.type;return b?(()=>{const y=(0,s.stringify)(['watchPendingTransactions',f.uid,h,T]);return(0,t.observe)(y,{onTransactions:w,onError:p},(t=>{let s;const p=(0,o.poll)((async()=>{try{if(!s)try{return void(s=await(0,n.getAction)(f,c.createPendingTransactionFilter,'createPendingTransactionFilter')({}))}catch(n){throw p(),n}const o=await(0,n.getAction)(f,l.getFilterChanges,'getFilterChanges')({filter:s});if(0===o.length)return;if(h)t.onTransactions(o);else for(const n of o)t.onTransactions([n])}catch(n){t.onError?.(n)}}),{emitOnBegin:!0,interval:T});return async()=>{s&&await(0,n.getAction)(f,u.uninstallFilter,'uninstallFilter')({filter:s}),p()}}))})():(()=>{let n=!0,t=()=>n=!1;return(async()=>{try{const{unsubscribe:o}=await f.transport.subscribe({params:['newPendingTransactions'],onData(t){if(!n)return;const o=t.result;w([o])},onError(n){p?.(n)}});t=o,n||t()}catch(n){p?.(n)}})(),()=>t()})()};var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6])}),8363,[8184,8231,8232,8129,8280,8236,8237]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verifySiweMessage=async function(o,u){const{address:f,domain:h,message:v,nonce:M,scheme:w,signature:y,time:_=new Date,...l}=u,S=(0,n.parseSiweMessage)(v);if(!S.address)return!1;if(!(0,t.validateSiweMessage)({address:f,domain:h,message:S,nonce:M,scheme:w,time:_}))return!1;const p=(0,s.hashMessage)(v);return(0,c.verifyHash)(o,{address:S.address,hash:p,signature:y,...l})};var s=r(d[0]),n=r(d[1]),t=r(d[2]),c=r(d[3])}),8364,[8316,8365,8366,8356]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseSiweMessage=function(s){const{scheme:o,statement:u,...c}=s.match(n)?.groups??{},{chainId:h,expirationTime:p,issuedAt:I,notBefore:A,requestId:f,...w}=s.match(t)?.groups??{},l=s.split('Resources:')[1]?.split('\n- ').slice(1);return{...c,...w,...h?{chainId:Number(h)}:{},...p?{expirationTime:new Date(p)}:{},...I?{issuedAt:new Date(I)}:{},...A?{notBefore:new Date(A)}:{},...f?{requestId:f}:{},...l?{resources:l}:{},...o?{scheme:o}:{},...u?{statement:u}:{}}};const n=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,t=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/}),8365,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSiweMessage=function(s){const{address:o,domain:u,message:f,nonce:c,scheme:l,time:_=new Date}=s;if(u&&f.domain!==u)return!1;if(c&&f.nonce!==c)return!1;if(l&&f.scheme!==l)return!1;if(f.expirationTime&&_>=f.expirationTime)return!1;if(f.notBefore&&_<f.notBefore)return!1;try{if(!f.address)return!1;if(!(0,n.isAddress)(f.address,{strict:!1}))return!1;if(o&&!(0,t.isAddressEqual)(f.address,o))return!1}catch{return!1}return!0};var n=r(d[0]),t=r(d[1])}),8366,[8110,8147]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createTestClient=function(o){const{key:s="test",name:c="Test Client",mode:l}=o;return(0,t.createClient)({...o,key:s,name:c,type:'testClient'}).extend((t=>({mode:l,...(0,n.testActions)({mode:l})(t)})))};var t=r(d[0]),n=r(d[1])}),8367,[8248,8368]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.testActions=function({mode:j}){return y=>{const O=y.extend((()=>({mode:j})));return{dropTransaction:s=>(0,t.dropTransaction)(O,s),dumpState:()=>(0,s.dumpState)(O),getAutomine:()=>(0,n.getAutomine)(O),getTxpoolContent:()=>(0,o.getTxpoolContent)(O),getTxpoolStatus:()=>(0,c.getTxpoolStatus)(O),impersonateAccount:t=>(0,l.impersonateAccount)(O,t),increaseTime:t=>(0,p.increaseTime)(O,t),inspectTxpool:()=>(0,u.inspectTxpool)(O),loadState:t=>(0,T.loadState)(O,t),mine:t=>(0,B.mine)(O,t),removeBlockTimestampInterval:()=>(0,v.removeBlockTimestampInterval)(O),reset:t=>(0,x.reset)(O,t),revert:t=>(0,A.revert)(O,t),sendUnsignedTransaction:t=>(0,k.sendUnsignedTransaction)(O,t),setAutomine:t=>(0,I.setAutomine)(O,t),setBalance:t=>(0,S.setBalance)(O,t),setBlockGasLimit:t=>(0,C.setBlockGasLimit)(O,t),setBlockTimestampInterval:t=>(0,G.setBlockTimestampInterval)(O,t),setCode:t=>(0,N.setCode)(O,t),setCoinbase:t=>(0,b.setCoinbase)(O,t),setIntervalMining:t=>(0,M.setIntervalMining)(O,t),setLoggingEnabled:t=>(0,P.setLoggingEnabled)(O,t),setMinGasPrice:t=>(0,L.setMinGasPrice)(O,t),setNextBlockBaseFeePerGas:t=>(0,U.setNextBlockBaseFeePerGas)(O,t),setNextBlockTimestamp:t=>(0,_.setNextBlockTimestamp)(O,t),setNonce:t=>(0,f.setNonce)(O,t),setRpcUrl:t=>(0,h.setRpcUrl)(O,t),setStorageAt:t=>(0,E.setStorageAt)(O,t),snapshot:()=>(0,F.snapshot)(O),stopImpersonatingAccount:t=>(0,R.stopImpersonatingAccount)(O,t)}}};var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),c=r(d[4]),l=r(d[5]),p=r(d[6]),u=r(d[7]),T=r(d[8]),B=r(d[9]),v=r(d[10]),x=r(d[11]),A=r(d[12]),k=r(d[13]),I=r(d[14]),S=r(d[15]),C=r(d[16]),G=r(d[17]),N=r(d[18]),b=r(d[19]),M=r(d[20]),P=r(d[21]),L=r(d[22]),U=r(d[23]),_=r(d[24]),f=r(d[25]),h=r(d[26]),E=r(d[27]),F=r(d[28]),R=r(d[29])}),8368,[8369,8370,8371,8372,8373,8374,8375,8376,8377,8378,8379,8380,8381,8382,8383,8384,8385,8386,8387,8388,8389,8390,8391,8392,8393,8394,8395,8396,8397,8398]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.dropTransaction=async function(n,{hash:o}){await n.request({method:`${n.mode}_dropTransaction`,params:[o]})}}),8369,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.dumpState=async function(t){return t.request({method:`${t.mode}_dumpState`})}}),8370,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getAutomine=async function(t){return'ganache'===t.mode?await t.request({method:'eth_mining'}):await t.request({method:`${t.mode}_getAutomine`})}}),8371,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTxpoolContent=async function(t){return await t.request({method:'txpool_content'})}}),8372,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTxpoolStatus=async function(u){const{pending:n,queued:o}=await u.request({method:'txpool_status'});return{pending:(0,t.hexToNumber)(n),queued:(0,t.hexToNumber)(o)}};var t=r(d[0])}),8373,[8098]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.impersonateAccount=async function(t,{address:n}){await t.request({method:`${t.mode}_impersonateAccount`,params:[n]})}}),8374,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.increaseTime=async function(s,{seconds:t}){return await s.request({method:'evm_increaseTime',params:[(0,n.numberToHex)(t)]})};var n=r(d[0])}),8375,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.inspectTxpool=async function(t){return await t.request({method:'txpool_inspect'})}}),8376,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.loadState=async function(t,{state:o}){await t.request({method:`${t.mode}_loadState`,params:[o]})}}),8377,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.mine=async function(o,{blocks:t,interval:u}){'ganache'===o.mode?await o.request({method:'evm_mine',params:[{blocks:(0,n.numberToHex)(t)}]}):await o.request({method:`${o.mode}_mine`,params:[(0,n.numberToHex)(t),(0,n.numberToHex)(u||0)]})};var n=r(d[0])}),8378,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.removeBlockTimestampInterval=async function(t){await t.request({method:`${t.mode}_removeBlockTimestampInterval`})}}),8379,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.reset=async function(o,{blockNumber:n,jsonRpcUrl:t}={}){await o.request({method:`${o.mode}_reset`,params:[{forking:{blockNumber:Number(n),jsonRpcUrl:t}}]})}}),8380,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.revert=async function(t,{id:n}){await t.request({method:'evm_revert',params:[n]})}}),8381,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sendUnsignedTransaction=async function(n,o){const{accessList:c,data:u,from:f,gas:P,gasPrice:x,maxFeePerGas:_,maxPriorityFeePerGas:l,nonce:v,to:y,value:F,...G}=o,h=n.chain?.formatters?.transactionRequest?.format,q=(h||s.formatTransactionRequest)({...(0,t.extract)(G,{format:h}),accessList:c,data:u,from:f,gas:P,gasPrice:x,maxFeePerGas:_,maxPriorityFeePerGas:l,nonce:v,to:y,value:F});return await n.request({method:'eth_sendUnsignedTransaction',params:[q]})};var t=r(d[0]),s=r(d[1])}),8382,[8141,8142]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setAutomine=async function(t,n){'ganache'===t.mode?n?await t.request({method:'miner_start'}):await t.request({method:'miner_stop'}):await t.request({method:'evm_setAutomine',params:[n]})}}),8383,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setBalance=async function(n,{address:o,value:s}){'ganache'===n.mode?await n.request({method:'evm_setAccountBalance',params:[o,(0,t.numberToHex)(s)]}):await n.request({method:`${n.mode}_setBalance`,params:[o,(0,t.numberToHex)(s)]})};var t=r(d[0])}),8384,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setBlockGasLimit=async function(s,{gasLimit:o}){await s.request({method:'evm_setBlockGasLimit',params:[(0,t.numberToHex)(o)]})};var t=r(d[0])}),8385,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setBlockTimestampInterval=async function(t,{interval:n}){const o='hardhat'===t.mode?1e3*n:n;await t.request({method:`${t.mode}_setBlockTimestampInterval`,params:[o]})}}),8386,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setCode=async function(t,{address:o,bytecode:s}){'ganache'===t.mode?await t.request({method:'evm_setAccountCode',params:[o,s]}):await t.request({method:`${t.mode}_setCode`,params:[o,s]})}}),8387,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setCoinbase=async function(s,{address:t}){await s.request({method:`${s.mode}_setCoinbase`,params:[t]})}}),8388,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setIntervalMining=async function(n,{interval:t}){const o='hardhat'===n.mode?1e3*t:t;await n.request({method:'evm_setIntervalMining',params:[o]})}}),8389,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setLoggingEnabled=async function(n,t){await n.request({method:`${n.mode}_setLoggingEnabled`,params:[t]})}}),8390,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setMinGasPrice=async function(s,{gasPrice:t}){await s.request({method:`${s.mode}_setMinGasPrice`,params:[(0,n.numberToHex)(t)]})};var n=r(d[0])}),8391,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setNextBlockBaseFeePerGas=async function(t,{baseFeePerGas:o}){await t.request({method:`${t.mode}_setNextBlockBaseFeePerGas`,params:[(0,s.numberToHex)(o)]})};var s=r(d[0])}),8392,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setNextBlockTimestamp=async function(s,{timestamp:o}){await s.request({method:'evm_setNextBlockTimestamp',params:[(0,t.numberToHex)(o)]})};var t=r(d[0])}),8393,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setNonce=async function(o,{address:t,nonce:s}){await o.request({method:`${o.mode}_setNonce`,params:[t,(0,n.numberToHex)(s)]})};var n=r(d[0])}),8394,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setRpcUrl=async function(t,c){await t.request({method:`${t.mode}_setRpcUrl`,params:[c]})}}),8395,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setStorageAt=async function(o,{address:n,index:s,value:u}){await o.request({method:`${o.mode}_setStorageAt`,params:[n,'number'==typeof s?(0,t.numberToHex)(s):s,u]})};var t=r(d[0])}),8396,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.snapshot=async function(t){return await t.request({method:'evm_snapshot'})}}),8397,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.stopImpersonatingAccount=async function(t,{address:n}){await t.request({method:`${t.mode}_stopImpersonatingAccount`,params:[n]})}}),8398,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.walletActions=function(v){return{addChain:s=>(0,t.addChain)(v,s),deployContract:s=>(0,n.deployContract)(v,s),getAddresses:()=>(0,o.getAddresses)(v),getCallsStatus:s=>(0,l.getCallsStatus)(v,s),getCapabilities:s=>(0,u.getCapabilities)(v,s),getChainId:()=>(0,s.getChainId)(v),getPermissions:()=>(0,c.getPermissions)(v),prepareAuthorization:s=>(0,C.prepareAuthorization)(v,s),prepareTransactionRequest:s=>(0,h.prepareTransactionRequest)(v,s),requestAddresses:()=>(0,p.requestAddresses)(v),requestPermissions:s=>(0,w.requestPermissions)(v,s),sendCalls:s=>(0,A.sendCalls)(v,s),sendRawTransaction:s=>(0,T.sendRawTransaction)(v,s),sendTransaction:s=>(0,q.sendTransaction)(v,s),showCallsStatus:s=>(0,S.showCallsStatus)(v,s),signAuthorization:s=>(0,y.signAuthorization)(v,s),signMessage:s=>(0,P.signMessage)(v,s),signTransaction:s=>(0,z.signTransaction)(v,s),signTypedData:s=>(0,R.signTypedData)(v,s),switchChain:s=>(0,_.switchChain)(v,s),waitForCallsStatus:s=>(0,b.waitForCallsStatus)(v,s),watchAsset:s=>(0,f.watchAsset)(v,s),writeContract:s=>(0,M.writeContract)(v,s)}};var s=r(d[0]),t=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),u=r(d[5]),c=r(d[6]),C=r(d[7]),h=r(d[8]),p=r(d[9]),w=r(d[10]),A=r(d[11]),T=r(d[12]),q=r(d[13]),S=r(d[14]),y=r(d[15]),P=r(d[16]),z=r(d[17]),R=r(d[18]),_=r(d[19]),b=r(d[20]),f=r(d[21]),M=r(d[22])}),8399,[8221,8400,8401,8402,8245,8403,8404,8405,8200,8406,8407,8247,8243,8240,8408,8409,8410,8411,8412,8413,8244,8414,8238]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addChain=async function(t,{chain:c}){const{id:l,name:u,nativeCurrency:o,rpcUrls:s,blockExplorers:p}=c;await t.request({method:'wallet_addEthereumChain',params:[{chainId:(0,n.numberToHex)(l),chainName:u,nativeCurrency:o,rpcUrls:s.default.http,blockExplorerUrls:p?Object.values(p).map((({url:n})=>n)):void 0}]},{dedupe:!0,retryCount:0})};var n=r(d[0])}),8400,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.deployContract=function(n,c){const{abi:s,args:u,bytecode:l,...b}=c,y=(0,t.encodeDeployData)({abi:s,args:u,bytecode:l});return(0,o.sendTransaction)(n,{...b,...b.authorizationList?{to:null}:{},data:y})};var t=r(d[0]),o=r(d[1])}),8401,[8164,8240]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getAddresses=async function(c){if('local'===c.account?.type)return[c.account.address];return(await c.request({method:'eth_accounts'},{dedupe:!0})).map((c=>(0,t.checksumAddress)(c)))};var t=r(d[0])}),8402,[8112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getCapabilities=async function(c,o={}){const{account:u=c.account,chainId:s}=o,b=u?(0,t.parseAccount)(u):void 0,f=s?[b?.address,[(0,n.numberToHex)(s)]]:[b?.address],l=await c.request({method:'wallet_getCapabilities',params:f}),p={};for(const[t,n]of Object.entries(l)){p[Number(t)]={};for(let[c,o]of Object.entries(n))'addSubAccount'===c&&(c='unstable_addSubAccount'),p[Number(t)][c]=o}return'number'==typeof s?p[s]:p};var t=r(d[0]),n=r(d[1])}),8403,[8118,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getPermissions=async function(t){return await t.request({method:'wallet_getPermissions'},{dedupe:!0})}}),8404,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.prepareAuthorization=async function(h,p){const{account:A=h.account,chainId:f,nonce:l}=p;if(!A)throw new o.AccountNotFoundError({docsPath:'/docs/eip7702/prepareAuthorization'});const I=(0,n.parseAccount)(A),v=(()=>{if(p.executor)return'self'===p.executor?p.executor:(0,n.parseAccount)(p.executor)})(),w={address:p.contractAddress??p.address,chainId:f,nonce:l};void 0===w.chainId&&(w.chainId=h.chain?.id??await(0,c.getAction)(h,s.getChainId,'getChainId')({}));void 0===w.nonce&&(w.nonce=await(0,c.getAction)(h,u.getTransactionCount,'getTransactionCount')({address:I.address,blockTag:'pending'}),('self'===v||v?.address&&(0,t.isAddressEqual)(v.address,I.address))&&(w.nonce+=1));return w};var n=r(d[0]),o=r(d[1]),t=r(d[2]),c=r(d[3]),s=r(d[4]),u=r(d[5])}),8405,[8118,8239,8147,8184,8221,8209]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.requestAddresses=async function(s){return(await s.request({method:'eth_requestAccounts'},{dedupe:!0,retryCount:0})).map((s=>(0,t.getAddress)(s)))};var t=r(d[0])}),8406,[8112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.requestPermissions=async function(s,t){return s.request({method:'wallet_requestPermissions',params:[t]},{retryCount:0})}}),8407,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.showCallsStatus=async function(t,s){const{id:o}=s;return void await t.request({method:'wallet_showCallsStatus',params:[o]})}}),8408,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.signAuthorization=async function(c,s){const{account:u=c.account}=s;if(!u)throw new t.AccountNotFoundError({docsPath:'/docs/eip7702/signAuthorization'});const p=(0,o.parseAccount)(u);if(!p.signAuthorization)throw new t.AccountTypeNotSupportedError({docsPath:'/docs/eip7702/signAuthorization',metaMessages:['The `signAuthorization` Action does not support JSON-RPC Accounts.'],type:p.type});const h=await(0,n.prepareAuthorization)(c,s);return p.signAuthorization(h)};var o=r(d[0]),t=r(d[1]),n=r(d[2])}),8409,[8118,8239,8405]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.signMessage=async function(o,{account:c=o.account,message:u}){if(!c)throw new n.AccountNotFoundError({docsPath:'/docs/actions/wallet/signMessage'});const f=(0,s.parseAccount)(c);if(f.signMessage)return f.signMessage({message:u});const w='string'==typeof u?(0,t.stringToHex)(u):u.raw instanceof Uint8Array?(0,t.toHex)(u.raw):u.raw;return o.request({method:'personal_sign',params:[w,f.address]},{retryCount:0})};var s=r(d[0]),n=r(d[1]),t=r(d[2])}),8410,[8118,8239,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.signTransaction=async function(l,T){const{account:C=l.account,chain:w=l.chain,...I}=T;if(!C)throw new t.AccountNotFoundError({docsPath:'/docs/actions/wallet/signTransaction'});const _=(0,n.parseAccount)(C);(0,h.assertRequest)({account:_,...T});const q=await(0,u.getAction)(l,f.getChainId,'getChainId')({});null!==w&&(0,s.assertCurrentChain)({currentChainId:q,chain:w});const p=w?.formatters||l.chain?.formatters,y=p?.transactionRequest?.format||o.formatTransactionRequest;return _.signTransaction?_.signTransaction({...I,chainId:q},{serializer:l.chain?.serializers?.transaction}):await l.request({method:'eth_signTransaction',params:[{...y(I),chainId:(0,c.numberToHex)(q),from:_.address}]},{retryCount:0})};var n=r(d[0]),t=r(d[1]),s=r(d[2]),c=r(d[3]),o=r(d[4]),u=r(d[5]),h=r(d[6]),f=r(d[7])}),8411,[8118,8239,8241,8101,8142,8184,8145,8221]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.signTypedData=async function(o,p){const{account:y=o.account,domain:c,message:u,primaryType:T}=p;if(!y)throw new s.AccountNotFoundError({docsPath:'/docs/actions/wallet/signTypedData'});const D=(0,t.parseAccount)(y),l={EIP712Domain:(0,n.getTypesForEIP712Domain)({domain:c}),...p.types};if((0,n.validateTypedData)({domain:c,message:u,primaryType:T,types:l}),D.signTypedData)return D.signTypedData({domain:c,message:u,primaryType:T,types:l});const _=(0,n.serializeTypedData)({domain:c,message:u,primaryType:T,types:l});return o.request({method:'eth_signTypedData_v4',params:[D.address,_]},{retryCount:0})};var t=r(d[0]),s=r(d[1]),n=r(d[2])}),8412,[8118,8239,8297]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.switchChain=async function(n,{id:u}){await n.request({method:'wallet_switchEthereumChain',params:[{chainId:(0,t.numberToHex)(u)}]},{retryCount:0})};var t=r(d[0])}),8413,[8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.watchAsset=async function(t,n){return await t.request({method:'wallet_watchAsset',params:n},{retryCount:0})}}),8414,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createWalletClient=function(l){const{key:o="wallet",name:c="Wallet Client",transport:s}=l;return(0,t.createClient)({...l,key:o,name:c,transport:s,type:'walletClient'}).extend(n.walletActions)};var t=r(d[0]),n=r(d[1])}),8415,[8248,8399]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.webSocket=function(u,b={}){const{keepAlive:p,key:y="webSocket",methods:l,name:k="WebSocket JSON-RPC",reconnect:w,retryDelay:h}=b;return({chain:S,retryCount:R,timeout:f})=>{const C=b.retryCount??R,_=f??b.timeout??1e4,q=u||S?.rpcUrls.default.webSocket?.[0],v={keepAlive:p,reconnect:w};if(!q)throw new o.UrlRequiredError;return(0,c.createTransport)({key:y,methods:l,name:k,async request({method:o,params:n}){const c={method:o,params:n},u=await(0,s.getWebSocketRpcClient)(q,v),{error:b,result:p}=await u.requestAsync({body:c,timeout:_});if(b)throw new t.RpcRequestError({body:c,error:b,url:q});return p},retryCount:C,retryDelay:h,timeout:_,type:'webSocket'},{getSocket:()=>(0,n.getSocket)(q),getRpcClient:()=>(0,s.getWebSocketRpcClient)(q,v),async subscribe({params:t,onData:o,onError:n}){const c=await(0,s.getWebSocketRpcClient)(q,v),{result:u}=await new Promise(((s,u)=>c.request({body:{method:'eth_subscribe',params:t},onError(t){u(t),n?.(t)},onResponse(t){if(t.error)return u(t.error),void n?.(t.error);'number'!=typeof t.id?'eth_subscription'===t.method&&o(t.params):s(t)}})));return{subscriptionId:u,unsubscribe:async()=>new Promise((t=>c.request({body:{method:'eth_unsubscribe',params:[u]},onResponse:t})))}}})}};var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),c=r(d[4])}),8416,[8137,8257,8294,8295,8251]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ProviderRpcError=void 0;class o extends Error{constructor(o,t){super(t),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=o,this.details=t}}e.ProviderRpcError=o}),8417,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeDeployData=function(c){const{abi:s,bytecode:u,data:p}=c;if(p===u)return{bytecode:u};const b=s.find((t=>'type'in t&&'constructor'===t.type));if(!b)throw new t.AbiConstructorNotFoundError({docsPath:n});if(!('inputs'in b))throw new t.AbiConstructorParamsNotFoundError({docsPath:n});if(!b.inputs||0===b.inputs.length)throw new t.AbiConstructorParamsNotFoundError({docsPath:n});return{args:(0,o.decodeAbiParameters)(b.inputs,`0x${p.replace(u,'')}`),bytecode:u}};var t=r(d[0]),o=r(d[1]);const n='/docs/contract/decodeDeployData'}),8418,[8089,8124]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compactSignatureToSignature=function({r:n,yParityAndS:o}){const u=(0,t.hexToBytes)(o),y=128&u[0]?1:0,c=u;1===y&&(c[0]&=127);return{r:n,s:(0,r.bytesToHex)(c),yParity:y}};var t=_r(d[0]),r=_r(d[1])}),8419,[8095,8101]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseCompactSignature=function(t){const{r:o,s:u}=r.secp256k1.Signature.fromCompact(t.slice(2,130));return{r:(0,n.numberToHex)(o,{size:32}),yParityAndS:(0,n.numberToHex)(u,{size:32})}};var r=_r(d[0]),n=_r(d[1])}),8420,[8082,8101]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseSignature=function(t){const{r:u,s:o}=r.secp256k1.Signature.fromCompact(t.slice(2,130)),s=Number(`0x${t.slice(130)}`),[c,f]=(()=>{if(0===s||1===s)return[void 0,s];if(27===s)return[BigInt(s),0];if(28===s)return[BigInt(s),1];throw new Error('Invalid yParityOrV value')})();return void 0!==c?{r:(0,n.numberToHex)(u,{size:32}),s:(0,n.numberToHex)(o,{size:32}),v:c,yParity:f}:{r:(0,n.numberToHex)(u,{size:32}),s:(0,n.numberToHex)(o,{size:32}),yParity:f}};var r=_r(d[0]),n=_r(d[1])}),8421,[8082,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.recoverTransactionAddress=async function(c){const{serializedTransaction:v,signature:y}=c,u=(0,n.parseTransaction)(v),l=y??{r:u.r,s:u.s,v:u.v,yParity:u.yParity},P=(0,o.serializeTransaction)({...u,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await(0,t.recoverAddress)({hash:(0,s.keccak256)(P),signature:l})};var s=r(d[0]),n=r(d[1]),o=r(d[2]),t=r(d[3])}),8422,[8102,8328,8302,8193]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.signatureToCompactSignature=function(r){const{r:o,s:u,v:s,yParity:y}=r,c=Number(y??s-27n);let f=u;if(1===c){const r=(0,t.hexToBytes)(u);r[0]|=128,f=(0,n.bytesToHex)(r)}return{r:o,yParityAndS:f}};var t=_r(d[0]),n=_r(d[1])}),8423,[8095,8101]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeCompactSignature=function({r:r,yParityAndS:o}){return`0x${new t.secp256k1.Signature((0,n.hexToBigInt)(r),(0,n.hexToBigInt)(o)).toCompactHex()}`};var t=_r(d[0]),n=_r(d[1])}),8424,[8082,8098]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sidecarsToVersionedHashes=function(t){const{sidecars:s,version:n}=t,c=t.to??('string'==typeof s[0].blob?'hex':'bytes'),f=[];for(const{commitment:t}of s)f.push((0,o.commitmentToVersionedHash)({commitment:t,to:c,version:n}));return f};var o=r(d[0])}),8425,[8213]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBlobs=function(s){const c=s.to??('string'==typeof s.blobs[0]?'hex':'bytes'),l='string'==typeof s.blobs[0]?s.blobs.map((t=>(0,o.hexToBytes)(t))):s.blobs,b=l.reduce(((t,o)=>t+o.length),0),f=(0,t.createCursor)(new Uint8Array(b));let y=!0;for(const o of l){const n=(0,t.createCursor)(o);for(;y&&n.position<o.length;){n.incrementPosition(1);let t=31;o.length-n.position<31&&(t=o.length-n.position);for(const o in Array.from({length:t})){const t=n.readByte();if(128===t&&!n.inspectBytes(n.remaining).includes(128)){y=!1;break}f.pushByte(t)}}}const p=f.bytes.slice(0,f.position);return'hex'===c?(0,n.bytesToHex)(p):p};var t=r(d[0]),o=r(d[1]),n=r(d[2])}),8426,[8125,8095,8101]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defineKzg=function({blobToKzgCommitment:o,computeBlobKzgProof:t}){return{blobToKzgCommitment:o,computeBlobKzgProof:t}}}),8427,[]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.setupKzg=function(t,u){try{t.loadTrustedSetup(u)}catch(e){const t=e;if(!t.message.includes('trusted setup is already loaded'))throw t}return(0,e.defineKzg)(t)};var e=r(d[0])}),8428,[8427]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DecodeError",{enumerable:!0,get:function(){return u.DecodeError}}),Object.defineProperty(e,"Decoder",{enumerable:!0,get:function(){return c.Decoder}}),Object.defineProperty(e,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return T.EXT_TIMESTAMP}}),Object.defineProperty(e,"Encoder",{enumerable:!0,get:function(){return f.Encoder}}),Object.defineProperty(e,"ExtData",{enumerable:!0,get:function(){return p.ExtData}}),Object.defineProperty(e,"ExtensionCodec",{enumerable:!0,get:function(){return b.ExtensionCodec}}),Object.defineProperty(e,"decode",{enumerable:!0,get:function(){return n.decode}}),Object.defineProperty(e,"decodeArrayStream",{enumerable:!0,get:function(){return o.decodeArrayStream}}),Object.defineProperty(e,"decodeAsync",{enumerable:!0,get:function(){return o.decodeAsync}}),Object.defineProperty(e,"decodeMulti",{enumerable:!0,get:function(){return n.decodeMulti}}),Object.defineProperty(e,"decodeMultiStream",{enumerable:!0,get:function(){return o.decodeMultiStream}}),Object.defineProperty(e,"decodeTimestampExtension",{enumerable:!0,get:function(){return T.decodeTimestampExtension}}),Object.defineProperty(e,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return T.decodeTimestampToTimeSpec}}),Object.defineProperty(e,"encode",{enumerable:!0,get:function(){return t.encode}}),Object.defineProperty(e,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return T.encodeDateToTimeSpec}}),Object.defineProperty(e,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return T.encodeTimeSpecToTimestamp}}),Object.defineProperty(e,"encodeTimestampExtension",{enumerable:!0,get:function(){return T.encodeTimestampExtension}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),u=r(d[4]),f=r(d[5]),b=r(d[6]),p=r(d[7]),T=r(d[8])}),8429,[8430,8439,8443,8440,8436,8431,8433,8434,8435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encode=function(o,c){return new n.Encoder(c).encodeSharedRef(o)};var n=r(d[0])}),8430,[8431]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Encoder=e.DEFAULT_MAX_DEPTH=e.DEFAULT_INITIAL_BUFFER_SIZE=void 0;var t=r(d[0]),s=r(d[1]),o=r(d[2]),n=r(d[3]);const h=e.DEFAULT_MAX_DEPTH=100,w=e.DEFAULT_INITIAL_BUFFER_SIZE=2048;class f{constructor(t){this.entered=!1,this.extensionCodec=t?.extensionCodec??s.ExtensionCodec.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.maxDepth=t?.maxDepth??h,this.initialBufferSize=t?.initialBufferSize??w,this.sortKeys=t?.sortKeys??!1,this.forceFloat32=t?.forceFloat32??!1,this.ignoreUndefined=t?.ignoreUndefined??!1,this.forceIntegerToFloat=t?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new f({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(t){if(this.entered){return this.clone().encodeSharedRef(t)}try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(t){if(this.entered){return this.clone().encode(t)}try{return this.entered=!0,this.reinitializeState(),this.doEncode(t,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(t,s){if(s>this.maxDepth)throw new Error(`Too deep objects in depth ${s}`);null==t?this.encodeNil():"boolean"==typeof t?this.encodeBoolean(t):"number"==typeof t?this.forceIntegerToFloat?this.encodeNumberAsFloat(t):this.encodeNumber(t):"string"==typeof t?this.encodeString(t):this.useBigInt64&&"bigint"==typeof t?this.encodeBigInt64(t):this.encodeObject(t,s)}ensureBufferSizeToWrite(t){const s=this.pos+t;this.view.byteLength<s&&this.resizeBuffer(2*s)}resizeBuffer(t){const s=new ArrayBuffer(t),o=new Uint8Array(s),n=new DataView(s);o.set(this.bytes),this.view=n,this.bytes=o}encodeNil(){this.writeU8(192)}encodeBoolean(t){!1===t?this.writeU8(194):this.writeU8(195)}encodeNumber(t){!this.forceIntegerToFloat&&Number.isSafeInteger(t)?t>=0?t<128?this.writeU8(t):t<256?(this.writeU8(204),this.writeU8(t)):t<65536?(this.writeU8(205),this.writeU16(t)):t<4294967296?(this.writeU8(206),this.writeU32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(207),this.writeU64(t)):t>=-32?this.writeU8(224|t+32):t>=-128?(this.writeU8(208),this.writeI8(t)):t>=-32768?(this.writeU8(209),this.writeI16(t)):t>=-2147483648?(this.writeU8(210),this.writeI32(t)):this.useBigInt64?this.encodeNumberAsFloat(t):(this.writeU8(211),this.writeI64(t)):this.encodeNumberAsFloat(t)}encodeNumberAsFloat(t){this.forceFloat32?(this.writeU8(202),this.writeF32(t)):(this.writeU8(203),this.writeF64(t))}encodeBigInt64(t){t>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(t)):(this.writeU8(211),this.writeBigInt64(t))}writeStringHeader(t){if(t<32)this.writeU8(160+t);else if(t<256)this.writeU8(217),this.writeU8(t);else if(t<65536)this.writeU8(218),this.writeU16(t);else{if(!(t<4294967296))throw new Error(`Too long string: ${t} bytes in UTF-8`);this.writeU8(219),this.writeU32(t)}}encodeString(s){const o=(0,t.utf8Count)(s);this.ensureBufferSizeToWrite(5+o),this.writeStringHeader(o),(0,t.utf8Encode)(s,this.bytes,this.pos),this.pos+=o}encodeObject(t,s){const o=this.extensionCodec.tryToEncode(t,this.context);if(null!=o)this.encodeExtension(o);else if(Array.isArray(t))this.encodeArray(t,s);else if(ArrayBuffer.isView(t))this.encodeBinary(t);else{if("object"!=typeof t)throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(t)}`);this.encodeMap(t,s)}}encodeBinary(t){const s=t.byteLength;if(s<256)this.writeU8(196),this.writeU8(s);else if(s<65536)this.writeU8(197),this.writeU16(s);else{if(!(s<4294967296))throw new Error(`Too large binary: ${s}`);this.writeU8(198),this.writeU32(s)}const o=(0,n.ensureUint8Array)(t);this.writeU8a(o)}encodeArray(t,s){const o=t.length;if(o<16)this.writeU8(144+o);else if(o<65536)this.writeU8(220),this.writeU16(o);else{if(!(o<4294967296))throw new Error(`Too large array: ${o}`);this.writeU8(221),this.writeU32(o)}for(const o of t)this.doEncode(o,s+1)}countWithoutUndefined(t,s){let o=0;for(const n of s)void 0!==t[n]&&o++;return o}encodeMap(t,s){const o=Object.keys(t);this.sortKeys&&o.sort();const n=this.ignoreUndefined?this.countWithoutUndefined(t,o):o.length;if(n<16)this.writeU8(128+n);else if(n<65536)this.writeU8(222),this.writeU16(n);else{if(!(n<4294967296))throw new Error(`Too large map object: ${n}`);this.writeU8(223),this.writeU32(n)}for(const n of o){const o=t[n];this.ignoreUndefined&&void 0===o||(this.encodeString(n),this.doEncode(o,s+1))}}encodeExtension(t){if("function"==typeof t.data){const s=t.data(this.pos+6),o=s.length;if(o>=4294967296)throw new Error(`Too large extension object: ${o}`);return this.writeU8(201),this.writeU32(o),this.writeI8(t.type),void this.writeU8a(s)}const s=t.data.length;if(1===s)this.writeU8(212);else if(2===s)this.writeU8(213);else if(4===s)this.writeU8(214);else if(8===s)this.writeU8(215);else if(16===s)this.writeU8(216);else if(s<256)this.writeU8(199),this.writeU8(s);else if(s<65536)this.writeU8(200),this.writeU16(s);else{if(!(s<4294967296))throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s)}this.writeI8(t.type),this.writeU8a(t.data)}writeU8(t){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,t),this.pos++}writeU8a(t){const s=t.length;this.ensureBufferSizeToWrite(s),this.bytes.set(t,this.pos),this.pos+=s}writeI8(t){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,t),this.pos++}writeU16(t){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,t),this.pos+=2}writeI16(t){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,t),this.pos+=2}writeU32(t){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,t),this.pos+=4}writeI32(t){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,t),this.pos+=4}writeF32(t){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,t),this.pos+=4}writeF64(t){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,t),this.pos+=8}writeU64(t){this.ensureBufferSizeToWrite(8),(0,o.setUint64)(this.view,this.pos,t),this.pos+=8}writeI64(t){this.ensureBufferSizeToWrite(8),(0,o.setInt64)(this.view,this.pos,t),this.pos+=8}writeBigUint64(t){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,t),this.pos+=8}writeBigInt64(t){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,t),this.pos+=8}}e.Encoder=f}),8431,[8432,8433,8437,8438]);
__d((function(g,r,i,a,m,e,d){function t(t,n,o){const c=t.length;let f=o,s=0;for(;s<c;){let o=t.charCodeAt(s++);if(4294967168&o){if(4294965248&o){if(o>=55296&&o<=56319&&s<c){const n=t.charCodeAt(s);56320==(64512&n)&&(++s,o=((1023&o)<<10)+(1023&n)+65536)}4294901760&o?(n[f++]=o>>18&7|240,n[f++]=o>>12&63|128,n[f++]=o>>6&63|128):(n[f++]=o>>12&15|224,n[f++]=o>>6&63|128)}else n[f++]=o>>6&31|192;n[f++]=63&o|128}else n[f++]=o}}Object.defineProperty(e,"__esModule",{value:!0}),e.utf8Count=function(t){const n=t.length;let o=0,c=0;for(;c<n;){let f=t.charCodeAt(c++);if(4294967168&f)if(4294965248&f){if(f>=55296&&f<=56319&&c<n){const n=t.charCodeAt(c);56320==(64512&n)&&(++c,f=((1023&f)<<10)+(1023&n)+65536)}o+=4294901760&f?4:3}else o+=2;else o++}return o},e.utf8Decode=function(t,n,o){return o>l?h(t,n,o):s(t,n,o)},e.utf8DecodeJs=s,e.utf8DecodeTD=h,e.utf8Encode=function(n,f,s){n.length>o?c(n,f,s):t(n,f,s)},e.utf8EncodeJs=t,e.utf8EncodeTE=c;const n=new TextEncoder,o=50;function c(t,o,c){n.encodeInto(t,o.subarray(c))}const f=4096;function s(t,n,o){let c=n;const s=c+o,u=[];let l="";for(;c<s;){const n=t[c++];if(128&n)if(192==(224&n)){const o=63&t[c++];u.push((31&n)<<6|o)}else if(224==(240&n)){const o=63&t[c++],f=63&t[c++];u.push((31&n)<<12|o<<6|f)}else if(240==(248&n)){let o=(7&n)<<18|(63&t[c++])<<12|(63&t[c++])<<6|63&t[c++];o>65535&&(o-=65536,u.push(o>>>10&1023|55296),o=56320|1023&o),u.push(o)}else u.push(n);else u.push(n);u.length>=f&&(l+=String.fromCharCode(...u),u.length=0)}return u.length>0&&(l+=String.fromCharCode(...u)),l}const u=new TextDecoder,l=200;function h(t,n,o){const c=t.subarray(n,n+o);return u.decode(c)}}),8432,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionCodec=void 0;var t=r(d[0]),n=r(d[1]);class s{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(n.timestampExtension)}register({type:t,encode:n,decode:s}){if(t>=0)this.encoders[t]=n,this.decoders[t]=s;else{const o=-1-t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=s}}tryToEncode(n,s){for(let o=0;o<this.builtInEncoders.length;o++){const i=this.builtInEncoders[o];if(null!=i){const c=i(n,s);if(null!=c){const n=-1-o;return new t.ExtData(n,c)}}}for(let o=0;o<this.encoders.length;o++){const i=this.encoders[o];if(null!=i){const c=i(n,s);if(null!=c){const n=o;return new t.ExtData(n,c)}}}return n instanceof t.ExtData?n:null}decode(n,s,o){const i=s<0?this.builtInDecoders[-1-s]:this.decoders[s];return i?i(n,s,o):new t.ExtData(s,n)}}e.ExtensionCodec=s,s.defaultCodec=new s}),8433,[8434,8435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ExtData=void 0;e.ExtData=class{constructor(t,o){this.type=t,this.data=o}}}),8434,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.EXT_TIMESTAMP=void 0,e.decodeTimestampExtension=p,e.decodeTimestampToTimeSpec=w,e.encodeDateToTimeSpec=u,e.encodeTimeSpecToTimestamp=f,e.encodeTimestampExtension=T,e.timestampExtension=void 0;var t=r(d[0]),n=r(d[1]);const c=e.EXT_TIMESTAMP=-1,s=4294967295,o=17179869183;function f({sec:t,nsec:c}){if(t>=0&&c>=0&&t<=o){if(0===c&&t<=s){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}{const n=t/4294967296,s=4294967295&t,o=new Uint8Array(8),f=new DataView(o.buffer);return f.setUint32(0,c<<2|3&n),f.setUint32(4,s),o}}{const s=new Uint8Array(12),o=new DataView(s.buffer);return o.setUint32(0,c),(0,n.setInt64)(o,4,t),s}}function u(t){const n=t.getTime(),c=Math.floor(n/1e3),s=1e6*(n-1e3*c),o=Math.floor(s/1e9);return{sec:c+o,nsec:s-1e9*o}}function T(t){if(t instanceof Date){return f(u(t))}return null}function w(c){const s=new DataView(c.buffer,c.byteOffset,c.byteLength);switch(c.byteLength){case 4:return{sec:s.getUint32(0),nsec:0};case 8:{const t=s.getUint32(0);return{sec:4294967296*(3&t)+s.getUint32(4),nsec:t>>>2}}case 12:return{sec:(0,n.getInt64)(s,4),nsec:s.getUint32(0)};default:throw new t.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${c.length}`)}}function p(t){const n=w(t);return new Date(1e3*n.sec+n.nsec/1e6)}e.timestampExtension={type:c,encode:T,decode:p}}),8435,[8436,8437]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DecodeError=void 0;class t extends Error{constructor(o){super(o);const c=Object.create(t.prototype);Object.setPrototypeOf(this,c),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}}e.DecodeError=t}),8436,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UINT32_MAX=void 0,e.getInt64=function(t,n){const o=t.getInt32(n),s=t.getUint32(n+4);return 4294967296*o+s},e.getUint64=function(t,n){const o=t.getUint32(n),s=t.getUint32(n+4);return 4294967296*o+s},e.setInt64=function(t,n,o){const s=Math.floor(o/4294967296),U=o;t.setUint32(n,s),t.setUint32(n+4,U)},e.setUint64=function(t,n,o){const s=o/4294967296,U=o;t.setUint32(n,s),t.setUint32(n+4,U)};e.UINT32_MAX=4294967295}),8437,[]);
__d((function(g,r,i,a,m,e,d){function n(n){return n instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&n instanceof SharedArrayBuffer}Object.defineProperty(e,"__esModule",{value:!0}),e.ensureUint8Array=function(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):n(f)?new Uint8Array(f):Uint8Array.from(f)}}),8438,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.decode=function(o,c){return new n.Decoder(c).decode(o)},e.decodeMulti=function(o,c){return new n.Decoder(c).decodeMulti(o)};var n=r(d[0])}),8439,[8440]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.Decoder=void 0;var t=r(d[0]),e=r(d[1]),s=r(d[2]),n=r(d[3]),o=r(d[4]),h=r(d[5]),c=r(d[6]);const y="array",l="map_key",f="map_value",p=t=>{if("string"==typeof t||"number"==typeof t)return t;throw new c.DecodeError("The type of key must be string or number but "+typeof t)};class u{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(t){const e=this.getUninitializedStateFromPool();e.type=y,e.position=0,e.size=t,e.array=new Array(t)}pushMapState(t){const e=this.getUninitializedStateFromPool();e.type=l,e.readCount=0,e.size=t,e.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const t={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(t)}return this.stack[this.stackHeadPosition]}release(t){if(this.stack[this.stackHeadPosition]!==t)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(t.type===y){const e=t;e.size=0,e.array=void 0,e.position=0,e.type=void 0}if(t.type===l||t.type===f){const e=t;e.size=0,e.map=void 0,e.readCount=0,e.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const x=new DataView(new ArrayBuffer(0)),w=new Uint8Array(x.buffer);try{x.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const B=new RangeError("Insufficient data"),U=new h.CachedKeyDecoder;class k{constructor(t){this.totalPos=0,this.pos=0,this.view=x,this.bytes=w,this.headByte=-1,this.stack=new u,this.entered=!1,this.extensionCodec=t?.extensionCodec??e.ExtensionCodec.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??s.UINT32_MAX,this.maxBinLength=t?.maxBinLength??s.UINT32_MAX,this.maxArrayLength=t?.maxArrayLength??s.UINT32_MAX,this.maxMapLength=t?.maxMapLength??s.UINT32_MAX,this.maxExtLength=t?.maxExtLength??s.UINT32_MAX,this.keyDecoder=void 0!==t?.keyDecoder?t.keyDecoder:U,this.mapKeyConverter=t?.mapKeyConverter??p}clone(){return new k({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=-1,this.stack.reset()}setBuffer(t){const e=(0,o.ensureUint8Array)(t);this.bytes=e,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.pos=0}appendBuffer(t){if(-1!==this.headByte||this.hasRemaining(1)){const e=this.bytes.subarray(this.pos),s=(0,o.ensureUint8Array)(t),n=new Uint8Array(e.length+s.length);n.set(e),n.set(s,e.length),this.setBuffer(n)}else this.setBuffer(t)}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:e,pos:s}=this;return new RangeError(`Extra ${e.byteLength-s} of ${e.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered){return this.clone().decode(t)}try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const e=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return e}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){const e=this.clone();yield*e.decodeMulti(t)}else try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered){return this.clone().decodeAsync(e)}try{this.entered=!0;let s,n=!1;for await(const t of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(t);try{s=this.doDecodeSync(),n=!0}catch(t){if(!(t instanceof RangeError))throw t}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return s}const{headByte:o,pos:h,totalPos:c}=this;throw new RangeError(`Insufficient data in parsing ${(0,t.prettyByte)(o)} at ${c} (${h} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,e){if(this.entered){const s=this.clone();yield*s.decodeMultiAsync(t,e)}else try{this.entered=!0;let s=e,n=-1;for await(const o of t){if(e&&0===n)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o),s&&(n=this.readArraySize(),s=!1,this.complete());try{for(;yield this.doDecodeSync(),0!=--n;);}catch(t){if(!(t instanceof RangeError))throw t}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){t:for(;;){const e=this.readHeadByte();let s;if(e>=224)s=e-256;else if(e<192)if(e<128)s=e;else if(e<144){const t=e-128;if(0!==t){this.pushMapState(t),this.complete();continue t}s={}}else if(e<160){const t=e-144;if(0!==t){this.pushArrayState(t),this.complete();continue t}s=[]}else{const t=e-160;s=this.decodeString(t,0)}else if(192===e)s=null;else if(194===e)s=!1;else if(195===e)s=!0;else if(202===e)s=this.readF32();else if(203===e)s=this.readF64();else if(204===e)s=this.readU8();else if(205===e)s=this.readU16();else if(206===e)s=this.readU32();else if(207===e)s=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)s=this.readI8();else if(209===e)s=this.readI16();else if(210===e)s=this.readI32();else if(211===e)s=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){const t=this.lookU8();s=this.decodeString(t,1)}else if(218===e){const t=this.lookU16();s=this.decodeString(t,2)}else if(219===e){const t=this.lookU32();s=this.decodeString(t,4)}else if(220===e){const t=this.readU16();if(0!==t){this.pushArrayState(t),this.complete();continue t}s=[]}else if(221===e){const t=this.readU32();if(0!==t){this.pushArrayState(t),this.complete();continue t}s=[]}else if(222===e){const t=this.readU16();if(0!==t){this.pushMapState(t),this.complete();continue t}s={}}else if(223===e){const t=this.readU32();if(0!==t){this.pushMapState(t),this.complete();continue t}s={}}else if(196===e){const t=this.lookU8();s=this.decodeBinary(t,1)}else if(197===e){const t=this.lookU16();s=this.decodeBinary(t,2)}else if(198===e){const t=this.lookU32();s=this.decodeBinary(t,4)}else if(212===e)s=this.decodeExtension(1,0);else if(213===e)s=this.decodeExtension(2,0);else if(214===e)s=this.decodeExtension(4,0);else if(215===e)s=this.decodeExtension(8,0);else if(216===e)s=this.decodeExtension(16,0);else if(199===e){const t=this.lookU8();s=this.decodeExtension(t,1)}else if(200===e){const t=this.lookU16();s=this.decodeExtension(t,2)}else{if(201!==e)throw new c.DecodeError(`Unrecognized type byte: ${(0,t.prettyByte)(e)}`);{const t=this.lookU32();s=this.decodeExtension(t,4)}}this.complete();const n=this.stack;for(;n.length>0;){const t=n.top();if(t.type===y){if(t.array[t.position]=s,t.position++,t.position!==t.size)continue t;s=t.array,n.release(t)}else{if(t.type===l){if("__proto__"===s)throw new c.DecodeError("The key __proto__ is not allowed");t.key=this.mapKeyConverter(s),t.type=f;continue t}if(t.map[t.key]=s,t.readCount++,t.readCount!==t.size){t.key=null,t.type=l;continue t}s=t.map,n.release(t)}}return s}}readHeadByte(){return-1===this.headByte&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=-1}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new c.DecodeError(`Unrecognized array type byte: ${(0,t.prettyByte)(e)}`)}}pushMapState(t){if(t>this.maxMapLength)throw new c.DecodeError(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new c.DecodeError(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,e){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,e):this.decodeBinary(t,e)}decodeUtf8String(t,e){if(t>this.maxStrLength)throw new c.DecodeError(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+e+t)throw B;const s=this.pos+e;let o;return o=this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?this.keyDecoder.decode(this.bytes,s,t):(0,n.utf8Decode)(this.bytes,s,t),this.pos+=e+t,o}stateIsMapKey(){if(this.stack.length>0){return this.stack.top().type===l}return!1}decodeBinary(t,e){if(t>this.maxBinLength)throw new c.DecodeError(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+e))throw B;const s=this.pos+e,n=this.bytes.subarray(s,s+t);return this.pos+=e+t,n}decodeExtension(t,e){if(t>this.maxExtLength)throw new c.DecodeError(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const s=this.view.getInt8(this.pos+e),n=this.decodeBinary(t,e+1);return this.extensionCodec.decode(n,s,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=(0,s.getUint64)(this.view,this.pos);return this.pos+=8,t}readI64(){const t=(0,s.getInt64)(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}}_e.Decoder=k}),8440,[8441,8433,8437,8432,8438,8442,8436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.prettyByte=function(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}}),8441,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CachedKeyDecoder=void 0;var t=r(d[0]);e.CachedKeyDecoder=class{constructor(t=16,s=16){this.hit=0,this.miss=0,this.maxKeyLength=t,this.maxLengthPerKey=s,this.caches=[];for(let t=0;t<this.maxKeyLength;t++)this.caches.push([])}canBeCached(t){return t>0&&t<=this.maxKeyLength}find(t,s,h){const n=this.caches[h-1];t:for(const c of n){const n=c.bytes;for(let c=0;c<h;c++)if(n[c]!==t[s+c])continue t;return c.str}return null}store(t,s){const h=this.caches[t.length-1],n={bytes:t,str:s};h.length>=this.maxLengthPerKey?h[Math.random()*h.length|0]=n:h.push(n)}decode(s,h,n){const c=this.find(s,h,n);if(null!=c)return this.hit++,c;this.miss++;const i=(0,t.utf8DecodeJs)(s,h,n),o=Uint8Array.prototype.slice.call(s,h,h+n);return this.store(o,i),i}}}),8442,[8432]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeArrayStream=function(t,o){const s=(0,c.ensureAsyncIterable)(t);return new n.Decoder(o).decodeArrayStream(s)},e.decodeAsync=async function(t,o){const s=(0,c.ensureAsyncIterable)(t);return new n.Decoder(o).decodeAsync(s)},e.decodeMultiStream=function(t,o){const s=(0,c.ensureAsyncIterable)(t);return new n.Decoder(o).decodeStream(s)};var n=r(d[0]),c=r(d[1])}),8443,[8440,8444]);
__d((function(g,r,i,a,m,e,d){function n(n){return null!=n[Symbol.asyncIterator]}async function*t(n){const t=n.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)return;yield o}}finally{t.releaseLock()}}Object.defineProperty(e,"__esModule",{value:!0}),e.asyncIterableFromStream=t,e.ensureAsyncIterable=function(o){return n(o)?o:t(o)},e.isAsyncIterable=n}),8444,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"compare",{enumerable:!0,get:function(){return t.compare}}),Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return n.concat}}),Object.defineProperty(e,"equals",{enumerable:!0,get:function(){return o.equals}}),Object.defineProperty(e,"fromString",{enumerable:!0,get:function(){return u.fromString}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return c.toString}}),Object.defineProperty(e,"xor",{enumerable:!0,get:function(){return f.xor}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]),c=r(d[4]),f=r(d[5])}),8445,[8446,8447,8450,8451,8453,8454]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compare=function(t,n){for(let u=0;u<t.byteLength;u++){if(t[u]<n[u])return-1;if(t[u]>n[u])return 1}if(t.byteLength>n.byteLength)return 1;if(t.byteLength<n.byteLength)return-1;return 0}}),8446,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.concat=function(o,c){c||(c=o.reduce(((n,t)=>n+t.length),0));const l=(0,n.allocUnsafe)(c);let f=0;for(const n of o)l.set(n,f),f+=n.length;return(0,t.asUint8Array)(l)};var n=r(d[0]),t=r(d[1])}),8447,[8448,8449]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=function(n=0){if(null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc)return(0,l.asUint8Array)(globalThis.Buffer.alloc(n));return new Uint8Array(n)},e.allocUnsafe=function(n=0){if(null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe)return(0,l.asUint8Array)(globalThis.Buffer.allocUnsafe(n));return new Uint8Array(n)};var l=r(d[0])}),8448,[8449]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.asUint8Array=function(n){if(null!=globalThis.Buffer)return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return n}}),8449,[]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.equals=function(t,n){if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let u=0;u<t.byteLength;u++)if(t[u]!==n[u])return!1;return!0}}),8450,[]);
__d((function(g,r,i,a,m,e,d){var f=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.fromString=function(f,n="utf8"){const t=o.default[n];if(!t)throw new Error(`Unsupported encoding "${n}"`);if(('utf8'===n||'utf-8'===n)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from)return(0,u.asUint8Array)(globalThis.Buffer.from(f,'utf-8'));return t.decoder.decode(`${t.prefix}${f}`)};var o=f(r(d[1])),u=r(d[2])}),8451,[7,8452,8449]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),n=r(d[1]);function o(t,n,o,c){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:o},decoder:{decode:c}}}const c=o('utf8','u',(t=>'u'+new TextDecoder('utf8').decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),u=o('ascii','a',(t=>{let n='a';for(let o=0;o<t.length;o++)n+=String.fromCharCode(t[o]);return n}),(t=>{t=t.substring(1);const o=(0,n.allocUnsafe)(t.length);for(let n=0;n<t.length;n++)o[n]=t.charCodeAt(n);return o})),f={utf8:c,'utf-8':c,hex:t.bases.base16,latin1:u,ascii:u,binary:u,...t.bases};e.default=f}),8452,[4578,8448]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.toString=function(t,n="utf8"){const u=f.default[n];if(!u)throw new Error(`Unsupported encoding "${n}"`);if(('utf8'===n||'utf-8'===n)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from)return globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString('utf8');return u.encoder.encode(t).substring(1)};var f=t(r(d[1]))}),8453,[7,8452]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.xor=function(l,o){if(l.length!==o.length)throw new Error('Inputs should have the same length');const h=(0,n.allocUnsafe)(l.length);for(let n=0;n<l.length;n++)h[n]=l[n]^o[n];return(0,t.asUint8Array)(h)};var n=r(d[0]),t=r(d[1])}),8454,[8448,8449]);
__d((function(_g,r,_i,a,m,_e,d){var t='undefined'!=typeof globalThis&&globalThis||'undefined'!=typeof self&&self||void 0!==_g&&_g,e=(function(){function e(){this.fetch=!1,this.DOMException=t.DOMException}return e.prototype=t,new e})();!(function(t){!(function(e){var o=void 0!==t&&t||'undefined'!=typeof self&&self||void 0!==_g&&_g||{},n='URLSearchParams'in o,s='Symbol'in o&&'iterator'in Symbol,i='FileReader'in o&&'Blob'in o&&(function(){try{return new Blob,!0}catch(t){return!1}})(),h='FormData'in o,u='ArrayBuffer'in o;if(u)var f=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],c=ArrayBuffer.isView||function(t){return t&&f.indexOf(Object.prototype.toString.call(t))>-1};function y(t){if('string'!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||''===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function l(t){return'string'!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(e[Symbol.iterator]=function(){return e}),e}function b(t){this.map={},t instanceof b?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError('Headers constructor: expected name/value pair to be length 2, found'+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function w(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError('Already read')):void(t.bodyUsed=!0)}function v(t){return new Promise((function(e,o){t.onload=function(){e(t.result)},t.onerror=function(){o(t.error)}}))}function E(t){var e=new FileReader,o=v(e);return e.readAsArrayBuffer(t),o}function A(t){for(var e=new Uint8Array(t),o=new Array(e.length),n=0;n<e.length;n++)o[n]=String.fromCharCode(e[n]);return o.join('')}function _(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?'string'==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:h&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=_(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=_(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=''),this.headers.get('content-type')||('string'==typeof t?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'))},i&&(this.blob=function(){var t=w(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error('could not read FormData body as blob');return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=w(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i)return this.blob().then(E);throw new Error('could not read as ArrayBuffer')},this.text=function(){var t,e,o,n,s,i=w(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,o=v(e),n=/charset=([A-Za-z0-9_-]+)/.exec(t.type),s=n?n[1]:'utf-8',e.readAsText(t,s),o;if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error('could not read FormData body as text');return Promise.resolve(this._bodyText)},h&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}b.prototype.append=function(t,e){t=y(t),e=l(e);var o=this.map[t];this.map[t]=o?o+', '+e:e},b.prototype.delete=function(t){delete this.map[y(t)]},b.prototype.get=function(t){return t=y(t),this.has(t)?this.map[t]:null},b.prototype.has=function(t){return this.map.hasOwnProperty(y(t))},b.prototype.set=function(t,e){this.map[y(t)]=l(e)},b.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},b.prototype.keys=function(){var t=[];return this.forEach((function(e,o){t.push(o)})),p(t)},b.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},b.prototype.entries=function(){var t=[];return this.forEach((function(e,o){t.push([o,e])})),p(t)},s&&(b.prototype[Symbol.iterator]=b.prototype.entries);var g=['CONNECT','DELETE','GET','HEAD','OPTIONS','PATCH','POST','PUT','TRACE'];function x(t,e){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,s,i=(e=e||{}).body;if(t instanceof x){if(t.bodyUsed)throw new TypeError('Already read');this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new b(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||'same-origin',!e.headers&&this.headers||(this.headers=new b(e.headers)),this.method=(n=e.method||this.method||'GET',s=n.toUpperCase(),g.indexOf(s)>-1?s:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||(function(){if('AbortController'in o)return(new AbortController).signal})(),this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&i)throw new TypeError('Body not allowed for GET or HEAD requests');if(this._initBody(i),!('GET'!==this.method&&'HEAD'!==this.method||'no-store'!==e.cache&&'no-cache'!==e.cache)){var h=/([?&])_=[^&]*/;if(h.test(this.url))this.url=this.url.replace(h,'$1_='+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?'&':'?')+'_='+(new Date).getTime()}}}function O(t){var e=new FormData;return t.trim().split('&').forEach((function(t){if(t){var o=t.split('='),n=o.shift().replace(/\+/g,' '),s=o.join('=').replace(/\+/g,' ');e.append(decodeURIComponent(n),decodeURIComponent(s))}})),e}function B(t,e){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type='default',this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?'':''+e.statusText,this.headers=new b(e.headers),this.url=e.url||'',this._initBody(t)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},T.call(x.prototype),T.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},B.error=function(){var t=new B(null,{status:200,statusText:''});return t.ok=!1,t.status=0,t.type='error',t};var D=[301,302,303,307,308];B.redirect=function(t,e){if(-1===D.indexOf(e))throw new RangeError('Invalid status code');return new B(null,{status:e,headers:{location:t}})},e.DOMException=o.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var o=Error(t);this.stack=o.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function P(t,n){return new Promise((function(s,h){var f=new x(t,n);if(f.signal&&f.signal.aborted)return h(new e.DOMException('Aborted','AbortError'));var c=new XMLHttpRequest;function p(){c.abort()}if(c.onload=function(){var t,e,o={statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||'',e=new b,t.replace(/\r?\n[\t ]+/g,' ').split('\r').map((function(t){return 0===t.indexOf('\n')?t.substr(1,t.length):t})).forEach((function(t){var o=t.split(':'),n=o.shift().trim();if(n){var s=o.join(':').trim();try{e.append(n,s)}catch(t){console.warn('Response '+t.message)}}})),e)};0===f.url.indexOf('file://')&&(c.status<200||c.status>599)?o.status=200:o.status=c.status,o.url='responseURL'in c?c.responseURL:o.headers.get('X-Request-URL');var n='response'in c?c.response:c.responseText;setTimeout((function(){s(new B(n,o))}),0)},c.onerror=function(){setTimeout((function(){h(new TypeError('Network request failed'))}),0)},c.ontimeout=function(){setTimeout((function(){h(new TypeError('Network request timed out'))}),0)},c.onabort=function(){setTimeout((function(){h(new e.DOMException('Aborted','AbortError'))}),0)},c.open(f.method,(function(t){try{return''===t&&o.location.href?o.location.href:t}catch(e){return t}})(f.url),!0),'include'===f.credentials?c.withCredentials=!0:'omit'===f.credentials&&(c.withCredentials=!1),'responseType'in c&&(i?c.responseType='blob':u&&(c.responseType='arraybuffer')),n&&'object'==typeof n.headers&&!(n.headers instanceof b||o.Headers&&n.headers instanceof o.Headers)){var w=[];Object.getOwnPropertyNames(n.headers).forEach((function(t){w.push(y(t)),c.setRequestHeader(t,l(n.headers[t]))})),f.headers.forEach((function(t,e){-1===w.indexOf(e)&&c.setRequestHeader(e,t)}))}else f.headers.forEach((function(t,e){c.setRequestHeader(e,t)}));f.signal&&(f.signal.addEventListener('abort',p),c.onreadystatechange=function(){4===c.readyState&&f.signal.removeEventListener('abort',p)}),c.send(void 0===f._bodyInit?null:f._bodyInit)}))}P.polyfill=!0,o.fetch||(o.fetch=P,o.Headers=b,o.Request=x,o.Response=B),e.Headers=b,e.Request=x,e.Response=B,e.fetch=P,Object.defineProperty(e,'__esModule',{value:!0})})({})})(e),e.fetch.ponyfill=!0,delete e.fetch.polyfill;var o=t.fetch?t:e;(_e=o.fetch).default=o.fetch,_e.fetch=o.fetch,_e.Headers=o.Headers,_e.Request=o.Request,_e.Response=o.Response,m.exports=_e}),8455,[]);