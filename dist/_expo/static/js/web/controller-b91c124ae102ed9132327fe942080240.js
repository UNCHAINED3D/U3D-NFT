__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.autoConnectWC=async function(n,t,o,c,l){const p=c?await(0,h.getSavedConnectParamsFromStorage)(c,o):null,u=await(0,C.getWalletInfo)(o),f=await T(p?{chain:p.chain,client:n.client,walletConnect:{optionalChains:p.optionalChains,pairingTopic:p.pairingTopic}}:{client:n.client,walletConnect:{}},o,l);if(!f.session)throw await f.disconnect(),new Error("No wallet connect session found on provider.");const y=f.session?.namespaces?.[v.NAMESPACE]?.accounts,I=y?.[0]?.split(":")[2];if(!I)throw new Error("No accounts found on provider.");const _=n.chain?.id||1,A=(0,w.normalizeChainId)(_),q=n.chain&&n.chain.id===A?n.chain:(0,s.getCachedChain)(A);return D(I,q,f,t,c,n.client,u,l)},e.connectWC=async function(n,t,o,c,l){const p=await T(n,o,l),f=n.walletConnect;let{onDisplayUri:y}=f||{};const I=await(0,C.getWalletInfo)(o);if(!y&&l){y=n=>{const t=I.mobile.native||I.mobile.universal;if(!t)return void l(n);const s=(0,u.formatWalletConnectUrl)(t,n).redirect;l(s)}}y&&p.events.addListener("display_uri",y);let _=f?.optionalChains,A=n.chain;"global.safe"===o&&(_=U.map(s.getCachedChain),A&&!_.includes(A)&&(A=void 0));const{chains:q,rpcMap:b}=M({chain:A,client:n.client,optionalChains:_});await p.connect({...f?.pairingTopic?{pairingTopic:f?.pairingTopic}:{},namespaces:{[v.NAMESPACE]:{chains:q,events:["chainChanged","accountsChanged"],methods:["eth_sendTransaction","eth_signTransaction","eth_sign","personal_sign","eth_signTypedData","wallet_switchEthereumChain","wallet_addEthereumChain"],rpcMap:b}}}),E(q.map((n=>Number(n.split(":")[1]))),c);const H=q[0]?.split(":")[1]||1,P=(0,w.normalizeChainId)(H),R=(await p.request({method:"eth_requestAccounts",params:[]},`eip155:${P}`))[0];if(!R)throw new Error("No accounts found on provider.");const N=n.chain&&n.chain.id===P?n.chain:(0,s.getCachedChain)(P);if(n){const t={chain:n.chain,optionalChains:n.walletConnect?.optionalChains,pairingTopic:n.walletConnect?.pairingTopic};c&&(0,h.saveConnectParamsToStorage)(c,o,t)}f?.onDisplayUri&&p.events.removeListener("display_uri",f.onDisplayUri);return D(R,N,p,t,c,n.client,I,l)},e.isWalletConnect=function(n){return"walletConnect"===n.id};var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]),l=r(d[5]),p=r(d[6]),h=r(d[7]),u=r(d[8]),C=r(d[9]),f=r(d[10]),w=r(d[11]),v=r(d[12]);let y=null;const I={lastUsedChainId:"tw.wc.lastUsedChainId",requestedChains:"tw.wc.requestedChains"};async function T(n,t,o){if(y)return y;const c=await(0,C.getWalletInfo)(t),l=n.walletConnect,{UniversalProvider:p}=await r(d[14])(d[13],d.paths);let h=l?.optionalChains,u=n.chain;"global.safe"===t&&(h=U.map(s.getCachedChain),u&&!h.includes(u)&&(u=void 0));const w=await p.init({metadata:{description:l?.appMetadata?.description||(0,f.getDefaultAppMetadata)().description,icons:[l?.appMetadata?.logoUrl||(0,f.getDefaultAppMetadata)().logoUrl],name:l?.appMetadata?.name||(0,f.getDefaultAppMetadata)().name,url:l?.appMetadata?.url||(0,f.getDefaultAppMetadata)().url,redirect:{native:c.mobile.native||void 0,universal:c.mobile.universal||void 0}},projectId:l?.projectId||v.DEFAULT_PROJECT_ID});if(w.events.setMaxListeners(Number.POSITIVE_INFINITY),"walletConnect"!==t){async function I(){const n=w.session?.peer?.metadata?.redirect?.native||c.mobile.native||c.mobile.universal;o&&n&&await o(n)}w.on("session_request_sent",I),w.events.addListener("disconnect",(()=>{w.off("session_request_sent",I),y=null}))}return y=w,w}function _({provider:s,address:l,client:h,chain:u,sessionRequestHandler:C,walletInfo:f}){return{address:(0,o.getAddress)(l),async sendTransaction(n){const p=await A({provider:s,payload:{method:"eth_sendTransaction",params:[{data:n.data,from:(0,o.getAddress)(l),gas:n.gas?(0,c.numberToHex)(n.gas):void 0,to:n.to,value:n.value?(0,c.numberToHex)(n.value):void 0}]},chain:`eip155:${n.chainId}`,walletInfo:f,sessionRequestHandler:C});return(0,t.trackTransaction)({chainId:n.chainId,client:h,contractAddress:n.to??void 0,gasPrice:n.gasPrice,transactionHash:p,walletAddress:(0,o.getAddress)(l),walletType:"walletConnect"}),{transactionHash:p}},async signMessage({message:n}){const t="string"==typeof n?(0,c.stringToHex)(n):n.raw instanceof Uint8Array?(0,c.uint8ArrayToHex)(n.raw):n.raw;return A({provider:s,payload:{method:"personal_sign",params:[t,this.address]},chain:`eip155:${u.id}`,walletInfo:f,sessionRequestHandler:C})},async signTypedData(t){const o=(0,p.parseTypedData)(t),{domain:c,message:l,primaryType:h}=o,w={EIP712Domain:(0,n.getTypesForEIP712Domain)({domain:c}),...o.types};(0,n.validateTypedData)({domain:c,message:l,primaryType:h,types:w});const v=(0,n.serializeTypedData)({domain:c??{},message:l,primaryType:h,types:w});return await A({provider:s,payload:{method:"eth_signTypedData_v4",params:[this.address,v]},chain:`eip155:${u.id}`,walletInfo:f,sessionRequestHandler:C})}}}async function A(n){const{provider:t,payload:s,chain:o,walletInfo:c,sessionRequestHandler:l}=n,p=t.request(s,o),h=t.session?.peer?.metadata?.redirect?.native||c.mobile.native||c.mobile.universal;return l&&h&&await l(h),p}function D(n,t,c,l,p,h,u,C){const f=_({address:n,chain:t,client:h,provider:c,sessionRequestHandler:C,walletInfo:u});async function v(){c.removeListener("accountsChanged",A),c.removeListener("chainChanged",D),c.removeListener("disconnect",T),await c.disconnect(),y=null}function T(){E([],p),p?.removeItem(I.lastUsedChainId),v(),l.emit("disconnect",void 0)}function A(n){if(n[0]){const s=_({address:(0,o.getAddress)(n[0]),chain:t,client:h,provider:c,sessionRequestHandler:C,walletInfo:u});l.emit("accountChanged",s),l.emit("accountsChanged",n)}else T()}function D(n){const t=(0,s.getCachedChain)((0,w.normalizeChainId)(n));l.emit("chainChanged",t),p?.setItem(I.lastUsedChainId,String(n))}return c.on("accountsChanged",A),c.on("chainChanged",D),c.on("disconnect",T),c.on("session_delete",T),[f,t,v,n=>q(c,n)]}async function q(t,s){const o=s.id;try{t.setDefaultChain(`eip155:${o}`)}catch(t){if(/user rejected request/i.test("string"==typeof t?t:t?.message))throw new n.UserRejectedRequestError(t);throw new n.SwitchChainError(t)}}function E(n,t){t?.setItem(I.requestedChains,(0,l.stringify)(n))}function M(n){const t={},o=[];n.chain&&(t[n.chain.id]=(0,s.getRpcUrlForChain)({chain:n.chain,client:n.client}),o.push(n.chain.id));const c=(n?.optionalChains||[]).slice(0,10);for(const l of c)t[l.id]=(0,s.getRpcUrlForChain)({chain:l,client:n.client}),o.push(l.id);return n.chain||0!==c.length||(t[1]=(0,s.getCachedChain)(1).rpc,o.push(1)),{chains:o.map((n=>`eip155:${n}`)),rpcMap:t}}const U=[1,11155111,42161,43114,8453,1313161554,84532,56,42220,100,10,137,1101,324,534352]}),4175,{"0":1254,"1":1679,"2":1127,"3":1210,"4":1231,"5":1136,"6":4054,"7":4176,"8":4047,"9":3142,"10":4056,"11":4057,"12":4177,"13":4178,"14":1353,"paths":{"4178":"/_expo/static/js/web/index-59a0a2efab9d7fa127f9eb560567155f.js"}});